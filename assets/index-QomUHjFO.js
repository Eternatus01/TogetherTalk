const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/LoginPage-D70BFTQp-2yUwmsHH.js","assets/errors-ptkwsH4S-CVFA_oyv.js","assets/RegisterPage-CQcvccQi-BLWB9Spr.js","assets/PersonalProfilePage-DArx3E4g-BG7nxb_D.js"])))=>i.map(i=>d[i]);
(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(s){if(s.ep)return;s.ep=!0;const i=n(s);fetch(s.href,i)}})();const Yl="modulepreload",Zl=function(e){return"/TogetherTalk/"+e},Oi={},Ie=function(t,n,r){let s=Promise.resolve();if(n&&n.length>0){document.getElementsByTagName("link");const o=document.querySelector("meta[property=csp-nonce]"),a=(o==null?void 0:o.nonce)||(o==null?void 0:o.getAttribute("nonce"));s=Promise.allSettled(n.map(l=>{if(l=Zl(l),l in Oi)return;Oi[l]=!0;const u=l.endsWith(".css"),c=u?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${l}"]${c}`))return;const h=document.createElement("link");if(h.rel=u?"stylesheet":Yl,u||(h.as="script"),h.crossOrigin="",h.href=l,a&&h.setAttribute("nonce",a),document.head.appendChild(h),u)return new Promise((f,g)=>{h.addEventListener("load",f),h.addEventListener("error",()=>g(new Error(`Unable to preload CSS for ${l}`)))})}))}function i(o){const a=new Event("vite:preloadError",{cancelable:!0});if(a.payload=o,window.dispatchEvent(a),!a.defaultPrevented)throw o}return s.then(o=>{for(const a of o||[])a.status==="rejected"&&i(a.reason);return t().catch(i)})},Ge=(e,t=Ge,n=t.f||(t.f=["assets/LoginPage-D70BFTQp.js","assets/errors-ptkwsH4S.js","assets/RegisterPage-CQcvccQi.js","assets/PersonalProfilePage-DArx3E4g.js","assets/PersonalProfilePage-zNqbIaso.css","assets/FriendsPage-D-On8di-.js","assets/FriendsPage-BjGI8GiC.css","assets/ProfilePage-ItwmKgu1.js","assets/ProfilePage-DU7dPsQC.css","assets/NoticesPage-DPF1cLtU.js","assets/NoticesPage-BargIcbs.css","assets/ChatsPage-C6wyps7s.js","assets/ChatsPage-DUPsc5NR.css","assets/ChatSlideBar-CfChXzOU.js","assets/ChatSlideBar-Lcv8jytC.css","assets/ChatsDetailsPage-DH1WKgQr.js","assets/ChatsDetailsPage-DFXYQHu6.css"]))=>e.map(r=>n[r]);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))n(r);new MutationObserver(r=>{for(const s of r)if(s.type==="childList")for(const i of s.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&n(i)}).observe(document,{childList:!0,subtree:!0});function t(r){const s={};return r.integrity&&(s.integrity=r.integrity),r.referrerPolicy&&(s.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?s.credentials="include":r.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function n(r){if(r.ep)return;r.ep=!0;const s=t(r);fetch(r.href,s)}})();/**
* @vue/shared v3.5.13
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**//*! #__NO_SIDE_EFFECTS__ */function Qs(e){const t=Object.create(null);for(const n of e.split(","))t[n]=1;return n=>n in t}const ee={},gn=[],it=()=>{},ec=()=>!1,Mr=e=>e.charCodeAt(0)===111&&e.charCodeAt(1)===110&&(e.charCodeAt(2)>122||e.charCodeAt(2)<97),Xs=e=>e.startsWith("onUpdate:"),ve=Object.assign,Ys=(e,t)=>{const n=e.indexOf(t);n>-1&&e.splice(n,1)},tc=Object.prototype.hasOwnProperty,X=(e,t)=>tc.call(e,t),M=Array.isArray,mn=e=>sr(e)==="[object Map]",Tn=e=>sr(e)==="[object Set]",ji=e=>sr(e)==="[object Date]",z=e=>typeof e=="function",he=e=>typeof e=="string",ot=e=>typeof e=="symbol",re=e=>e!==null&&typeof e=="object",ia=e=>(re(e)||z(e))&&z(e.then)&&z(e.catch),oa=Object.prototype.toString,sr=e=>oa.call(e),nc=e=>sr(e).slice(8,-1),aa=e=>sr(e)==="[object Object]",Zs=e=>he(e)&&e!=="NaN"&&e[0]!=="-"&&""+parseInt(e,10)===e,Mn=Qs(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),Fr=e=>{const t=Object.create(null);return n=>t[n]||(t[n]=e(n))},rc=/-(\w)/g,We=Fr(e=>e.replace(rc,(t,n)=>n?n.toUpperCase():"")),sc=/\B([A-Z])/g,Ut=Fr(e=>e.replace(sc,"-$1").toLowerCase()),Br=Fr(e=>e.charAt(0).toUpperCase()+e.slice(1)),ss=Fr(e=>e?`on${Br(e)}`:""),Pt=(e,t)=>!Object.is(e,t),wr=(e,...t)=>{for(let n=0;n<e.length;n++)e[n](...t)},la=(e,t,n,r=!1)=>{Object.defineProperty(e,t,{configurable:!0,enumerable:!1,writable:r,value:n})},Or=e=>{const t=parseFloat(e);return isNaN(t)?e:t};let Pi;const zr=()=>Pi||(Pi=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function ei(e){if(M(e)){const t={};for(let n=0;n<e.length;n++){const r=e[n],s=he(r)?lc(r):ei(r);if(s)for(const i in s)t[i]=s[i]}return t}else if(he(e)||re(e))return e}const ic=/;(?![^(]*\))/g,oc=/:([^]+)/,ac=/\/\*[^]*?\*\//g;function lc(e){const t={};return e.replace(ac,"").split(ic).forEach(n=>{if(n){const r=n.split(oc);r.length>1&&(t[r[0].trim()]=r[1].trim())}}),t}function ti(e){let t="";if(he(e))t=e;else if(M(e))for(let n=0;n<e.length;n++){const r=ti(e[n]);r&&(t+=r+" ")}else if(re(e))for(const n in e)e[n]&&(t+=n+" ");return t.trim()}const cc="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",uc=Qs(cc);function ca(e){return!!e||e===""}function hc(e,t){if(e.length!==t.length)return!1;let n=!0;for(let r=0;n&&r<e.length;r++)n=Gt(e[r],t[r]);return n}function Gt(e,t){if(e===t)return!0;let n=ji(e),r=ji(t);if(n||r)return n&&r?e.getTime()===t.getTime():!1;if(n=ot(e),r=ot(t),n||r)return e===t;if(n=M(e),r=M(t),n||r)return n&&r?hc(e,t):!1;if(n=re(e),r=re(t),n||r){if(!n||!r)return!1;const s=Object.keys(e).length,i=Object.keys(t).length;if(s!==i)return!1;for(const o in e){const a=e.hasOwnProperty(o),l=t.hasOwnProperty(o);if(a&&!l||!a&&l||!Gt(e[o],t[o]))return!1}}return String(e)===String(t)}function ni(e,t){return e.findIndex(n=>Gt(n,t))}const ua=e=>!!(e&&e.__v_isRef===!0),ha=e=>he(e)?e:e==null?"":M(e)||re(e)&&(e.toString===oa||!z(e.toString))?ua(e)?ha(e.value):JSON.stringify(e,da,2):String(e),da=(e,t)=>ua(t)?da(e,t.value):mn(t)?{[`Map(${t.size})`]:[...t.entries()].reduce((n,[r,s],i)=>(n[is(r,i)+" =>"]=s,n),{})}:Tn(t)?{[`Set(${t.size})`]:[...t.values()].map(n=>is(n))}:ot(t)?is(t):re(t)&&!M(t)&&!aa(t)?String(t):t,is=(e,t="")=>{var n;return ot(e)?`Symbol(${(n=e.description)!=null?n:t})`:e};/**
* @vue/reactivity v3.5.13
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let Te;class fa{constructor(t=!1){this.detached=t,this._active=!0,this.effects=[],this.cleanups=[],this._isPaused=!1,this.parent=Te,!t&&Te&&(this.index=(Te.scopes||(Te.scopes=[])).push(this)-1)}get active(){return this._active}pause(){if(this._active){this._isPaused=!0;let t,n;if(this.scopes)for(t=0,n=this.scopes.length;t<n;t++)this.scopes[t].pause();for(t=0,n=this.effects.length;t<n;t++)this.effects[t].pause()}}resume(){if(this._active&&this._isPaused){this._isPaused=!1;let t,n;if(this.scopes)for(t=0,n=this.scopes.length;t<n;t++)this.scopes[t].resume();for(t=0,n=this.effects.length;t<n;t++)this.effects[t].resume()}}run(t){if(this._active){const n=Te;try{return Te=this,t()}finally{Te=n}}}on(){Te=this}off(){Te=this.parent}stop(t){if(this._active){this._active=!1;let n,r;for(n=0,r=this.effects.length;n<r;n++)this.effects[n].stop();for(this.effects.length=0,n=0,r=this.cleanups.length;n<r;n++)this.cleanups[n]();if(this.cleanups.length=0,this.scopes){for(n=0,r=this.scopes.length;n<r;n++)this.scopes[n].stop(!0);this.scopes.length=0}if(!this.detached&&this.parent&&!t){const s=this.parent.scopes.pop();s&&s!==this&&(this.parent.scopes[this.index]=s,s.index=this.index)}this.parent=void 0}}}function pa(e){return new fa(e)}function ga(){return Te}function dc(e,t=!1){Te&&Te.cleanups.push(e)}let ne;const os=new WeakSet;class ma{constructor(t){this.fn=t,this.deps=void 0,this.depsTail=void 0,this.flags=5,this.next=void 0,this.cleanup=void 0,this.scheduler=void 0,Te&&Te.active&&Te.effects.push(this)}pause(){this.flags|=64}resume(){this.flags&64&&(this.flags&=-65,os.has(this)&&(os.delete(this),this.trigger()))}notify(){this.flags&2&&!(this.flags&32)||this.flags&8||ya(this)}run(){if(!(this.flags&1))return this.fn();this.flags|=2,Ci(this),_a(this);const t=ne,n=Xe;ne=this,Xe=!0;try{return this.fn()}finally{ba(this),ne=t,Xe=n,this.flags&=-3}}stop(){if(this.flags&1){for(let t=this.deps;t;t=t.nextDep)ii(t);this.deps=this.depsTail=void 0,Ci(this),this.onStop&&this.onStop(),this.flags&=-2}}trigger(){this.flags&64?os.add(this):this.scheduler?this.scheduler():this.runIfDirty()}runIfDirty(){Ss(this)&&this.run()}get dirty(){return Ss(this)}}let va=0,Fn,Bn;function ya(e,t=!1){if(e.flags|=8,t){e.next=Bn,Bn=e;return}e.next=Fn,Fn=e}function ri(){va++}function si(){if(--va>0)return;if(Bn){let t=Bn;for(Bn=void 0;t;){const n=t.next;t.next=void 0,t.flags&=-9,t=n}}let e;for(;Fn;){let t=Fn;for(Fn=void 0;t;){const n=t.next;if(t.next=void 0,t.flags&=-9,t.flags&1)try{t.trigger()}catch(r){e||(e=r)}t=n}}if(e)throw e}function _a(e){for(let t=e.deps;t;t=t.nextDep)t.version=-1,t.prevActiveLink=t.dep.activeLink,t.dep.activeLink=t}function ba(e){let t,n=e.depsTail,r=n;for(;r;){const s=r.prevDep;r.version===-1?(r===n&&(n=s),ii(r),fc(r)):t=r,r.dep.activeLink=r.prevActiveLink,r.prevActiveLink=void 0,r=s}e.deps=t,e.depsTail=n}function Ss(e){for(let t=e.deps;t;t=t.nextDep)if(t.dep.version!==t.version||t.dep.computed&&(wa(t.dep.computed)||t.dep.version!==t.version))return!0;return!!e._dirty}function wa(e){if(e.flags&4&&!(e.flags&16)||(e.flags&=-17,e.globalVersion===Qn))return;e.globalVersion=Qn;const t=e.dep;if(e.flags|=2,t.version>0&&!e.isSSR&&e.deps&&!Ss(e)){e.flags&=-3;return}const n=ne,r=Xe;ne=e,Xe=!0;try{_a(e);const s=e.fn(e._value);(t.version===0||Pt(s,e._value))&&(e._value=s,t.version++)}catch(s){throw t.version++,s}finally{ne=n,Xe=r,ba(e),e.flags&=-3}}function ii(e,t=!1){const{dep:n,prevSub:r,nextSub:s}=e;if(r&&(r.nextSub=s,e.prevSub=void 0),s&&(s.prevSub=r,e.nextSub=void 0),n.subs===e&&(n.subs=r,!r&&n.computed)){n.computed.flags&=-5;for(let i=n.computed.deps;i;i=i.nextDep)ii(i,!0)}!t&&!--n.sc&&n.map&&n.map.delete(n.key)}function fc(e){const{prevDep:t,nextDep:n}=e;t&&(t.nextDep=n,e.prevDep=void 0),n&&(n.prevDep=t,e.nextDep=void 0)}let Xe=!0;const ka=[];function Dt(){ka.push(Xe),Xe=!1}function Nt(){const e=ka.pop();Xe=e===void 0?!0:e}function Ci(e){const{cleanup:t}=e;if(e.cleanup=void 0,t){const n=ne;ne=void 0;try{t()}finally{ne=n}}}let Qn=0;class pc{constructor(t,n){this.sub=t,this.dep=n,this.version=n.version,this.nextDep=this.prevDep=this.nextSub=this.prevSub=this.prevActiveLink=void 0}}class oi{constructor(t){this.computed=t,this.version=0,this.activeLink=void 0,this.subs=void 0,this.map=void 0,this.key=void 0,this.sc=0}track(t){if(!ne||!Xe||ne===this.computed)return;let n=this.activeLink;if(n===void 0||n.sub!==ne)n=this.activeLink=new pc(ne,this),ne.deps?(n.prevDep=ne.depsTail,ne.depsTail.nextDep=n,ne.depsTail=n):ne.deps=ne.depsTail=n,Ea(n);else if(n.version===-1&&(n.version=this.version,n.nextDep)){const r=n.nextDep;r.prevDep=n.prevDep,n.prevDep&&(n.prevDep.nextDep=r),n.prevDep=ne.depsTail,n.nextDep=void 0,ne.depsTail.nextDep=n,ne.depsTail=n,ne.deps===n&&(ne.deps=r)}return n}trigger(t){this.version++,Qn++,this.notify(t)}notify(t){ri();try{for(let n=this.subs;n;n=n.prevSub)n.sub.notify()&&n.sub.dep.notify()}finally{si()}}}function Ea(e){if(e.dep.sc++,e.sub.flags&4){const t=e.dep.computed;if(t&&!e.dep.subs){t.flags|=20;for(let r=t.deps;r;r=r.nextDep)Ea(r)}const n=e.dep.subs;n!==e&&(e.prevSub=n,n&&(n.nextSub=e)),e.dep.subs=e}}const jr=new WeakMap,Jt=Symbol(""),As=Symbol(""),Xn=Symbol("");function we(e,t,n){if(Xe&&ne){let r=jr.get(e);r||jr.set(e,r=new Map);let s=r.get(n);s||(r.set(n,s=new oi),s.map=r,s.key=n),s.track()}}function gt(e,t,n,r,s,i){const o=jr.get(e);if(!o){Qn++;return}const a=l=>{l&&l.trigger()};if(ri(),t==="clear")o.forEach(a);else{const l=M(e),u=l&&Zs(n);if(l&&n==="length"){const c=Number(r);o.forEach((h,f)=>{(f==="length"||f===Xn||!ot(f)&&f>=c)&&a(h)})}else switch((n!==void 0||o.has(void 0))&&a(o.get(n)),u&&a(o.get(Xn)),t){case"add":l?u&&a(o.get("length")):(a(o.get(Jt)),mn(e)&&a(o.get(As)));break;case"delete":l||(a(o.get(Jt)),mn(e)&&a(o.get(As)));break;case"set":mn(e)&&a(o.get(Jt));break}}si()}function gc(e,t){const n=jr.get(e);return n&&n.get(t)}function nn(e){const t=K(e);return t===e?t:(we(t,"iterate",Xn),qe(e)?t:t.map(ke))}function qr(e){return we(e=K(e),"iterate",Xn),e}const mc={__proto__:null,[Symbol.iterator](){return as(this,Symbol.iterator,ke)},concat(...e){return nn(this).concat(...e.map(t=>M(t)?nn(t):t))},entries(){return as(this,"entries",e=>(e[1]=ke(e[1]),e))},every(e,t){return ht(this,"every",e,t,void 0,arguments)},filter(e,t){return ht(this,"filter",e,t,n=>n.map(ke),arguments)},find(e,t){return ht(this,"find",e,t,ke,arguments)},findIndex(e,t){return ht(this,"findIndex",e,t,void 0,arguments)},findLast(e,t){return ht(this,"findLast",e,t,ke,arguments)},findLastIndex(e,t){return ht(this,"findLastIndex",e,t,void 0,arguments)},forEach(e,t){return ht(this,"forEach",e,t,void 0,arguments)},includes(...e){return ls(this,"includes",e)},indexOf(...e){return ls(this,"indexOf",e)},join(e){return nn(this).join(e)},lastIndexOf(...e){return ls(this,"lastIndexOf",e)},map(e,t){return ht(this,"map",e,t,void 0,arguments)},pop(){return Pn(this,"pop")},push(...e){return Pn(this,"push",e)},reduce(e,...t){return $i(this,"reduce",e,t)},reduceRight(e,...t){return $i(this,"reduceRight",e,t)},shift(){return Pn(this,"shift")},some(e,t){return ht(this,"some",e,t,void 0,arguments)},splice(...e){return Pn(this,"splice",e)},toReversed(){return nn(this).toReversed()},toSorted(e){return nn(this).toSorted(e)},toSpliced(...e){return nn(this).toSpliced(...e)},unshift(...e){return Pn(this,"unshift",e)},values(){return as(this,"values",ke)}};function as(e,t,n){const r=qr(e),s=r[t]();return r!==e&&!qe(e)&&(s._next=s.next,s.next=()=>{const i=s._next();return i.value&&(i.value=n(i.value)),i}),s}const vc=Array.prototype;function ht(e,t,n,r,s,i){const o=qr(e),a=o!==e&&!qe(e),l=o[t];if(l!==vc[t]){const h=l.apply(e,i);return a?ke(h):h}let u=n;o!==e&&(a?u=function(h,f){return n.call(this,ke(h),f,e)}:n.length>2&&(u=function(h,f){return n.call(this,h,f,e)}));const c=l.call(o,u,r);return a&&s?s(c):c}function $i(e,t,n,r){const s=qr(e);let i=n;return s!==e&&(qe(e)?n.length>3&&(i=function(o,a,l){return n.call(this,o,a,l,e)}):i=function(o,a,l){return n.call(this,o,ke(a),l,e)}),s[t](i,...r)}function ls(e,t,n){const r=K(e);we(r,"iterate",Xn);const s=r[t](...n);return(s===-1||s===!1)&&ci(n[0])?(n[0]=K(n[0]),r[t](...n)):s}function Pn(e,t,n=[]){Dt(),ri();const r=K(e)[t].apply(e,n);return si(),Nt(),r}const yc=Qs("__proto__,__v_isRef,__isVue"),Sa=new Set(Object.getOwnPropertyNames(Symbol).filter(e=>e!=="arguments"&&e!=="caller").map(e=>Symbol[e]).filter(ot));function _c(e){ot(e)||(e=String(e));const t=K(this);return we(t,"has",e),t.hasOwnProperty(e)}class Aa{constructor(t=!1,n=!1){this._isReadonly=t,this._isShallow=n}get(t,n,r){if(n==="__v_skip")return t.__v_skip;const s=this._isReadonly,i=this._isShallow;if(n==="__v_isReactive")return!s;if(n==="__v_isReadonly")return s;if(n==="__v_isShallow")return i;if(n==="__v_raw")return r===(s?i?jc:ja:i?Oa:xa).get(t)||Object.getPrototypeOf(t)===Object.getPrototypeOf(r)?t:void 0;const o=M(t);if(!s){let l;if(o&&(l=mc[n]))return l;if(n==="hasOwnProperty")return _c}const a=Reflect.get(t,n,ue(t)?t:r);return(ot(n)?Sa.has(n):yc(n))||(s||we(t,"get",n),i)?a:ue(a)?o&&Zs(n)?a:a.value:re(a)?s?Ca(a):yt(a):a}}class Ta extends Aa{constructor(t=!1){super(!1,t)}set(t,n,r,s){let i=t[n];if(!this._isShallow){const l=Qt(i);if(!qe(r)&&!Qt(r)&&(i=K(i),r=K(r)),!M(t)&&ue(i)&&!ue(r))return l?!1:(i.value=r,!0)}const o=M(t)&&Zs(n)?Number(n)<t.length:X(t,n),a=Reflect.set(t,n,r,ue(t)?t:s);return t===K(s)&&(o?Pt(r,i)&&gt(t,"set",n,r):gt(t,"add",n,r)),a}deleteProperty(t,n){const r=X(t,n);t[n];const s=Reflect.deleteProperty(t,n);return s&&r&&gt(t,"delete",n,void 0),s}has(t,n){const r=Reflect.has(t,n);return(!ot(n)||!Sa.has(n))&&we(t,"has",n),r}ownKeys(t){return we(t,"iterate",M(t)?"length":Jt),Reflect.ownKeys(t)}}class bc extends Aa{constructor(t=!1){super(!0,t)}set(t,n){return!0}deleteProperty(t,n){return!0}}const wc=new Ta,kc=new bc,Ec=new Ta(!0),Ts=e=>e,ur=e=>Reflect.getPrototypeOf(e);function Sc(e,t,n){return function(...r){const s=this.__v_raw,i=K(s),o=mn(i),a=e==="entries"||e===Symbol.iterator&&o,l=e==="keys"&&o,u=s[e](...r),c=n?Ts:t?xs:ke;return!t&&we(i,"iterate",l?As:Jt),{next(){const{value:h,done:f}=u.next();return f?{value:h,done:f}:{value:a?[c(h[0]),c(h[1])]:c(h),done:f}},[Symbol.iterator](){return this}}}}function hr(e){return function(...t){return e==="delete"?!1:e==="clear"?void 0:this}}function Ac(e,t){const n={get(r){const s=this.__v_raw,i=K(s),o=K(r);e||(Pt(r,o)&&we(i,"get",r),we(i,"get",o));const{has:a}=ur(i),l=t?Ts:e?xs:ke;if(a.call(i,r))return l(s.get(r));if(a.call(i,o))return l(s.get(o));s!==i&&s.get(r)},get size(){const r=this.__v_raw;return!e&&we(K(r),"iterate",Jt),Reflect.get(r,"size",r)},has(r){const s=this.__v_raw,i=K(s),o=K(r);return e||(Pt(r,o)&&we(i,"has",r),we(i,"has",o)),r===o?s.has(r):s.has(r)||s.has(o)},forEach(r,s){const i=this,o=i.__v_raw,a=K(o),l=t?Ts:e?xs:ke;return!e&&we(a,"iterate",Jt),o.forEach((u,c)=>r.call(s,l(u),l(c),i))}};return ve(n,e?{add:hr("add"),set:hr("set"),delete:hr("delete"),clear:hr("clear")}:{add(r){!t&&!qe(r)&&!Qt(r)&&(r=K(r));const s=K(this);return ur(s).has.call(s,r)||(s.add(r),gt(s,"add",r,r)),this},set(r,s){!t&&!qe(s)&&!Qt(s)&&(s=K(s));const i=K(this),{has:o,get:a}=ur(i);let l=o.call(i,r);l||(r=K(r),l=o.call(i,r));const u=a.call(i,r);return i.set(r,s),l?Pt(s,u)&&gt(i,"set",r,s):gt(i,"add",r,s),this},delete(r){const s=K(this),{has:i,get:o}=ur(s);let a=i.call(s,r);a||(r=K(r),a=i.call(s,r)),o&&o.call(s,r);const l=s.delete(r);return a&&gt(s,"delete",r,void 0),l},clear(){const r=K(this),s=r.size!==0,i=r.clear();return s&&gt(r,"clear",void 0,void 0),i}}),["keys","values","entries",Symbol.iterator].forEach(r=>{n[r]=Sc(r,e,t)}),n}function ai(e,t){const n=Ac(e,t);return(r,s,i)=>s==="__v_isReactive"?!e:s==="__v_isReadonly"?e:s==="__v_raw"?r:Reflect.get(X(n,s)&&s in r?n:r,s,i)}const Tc={get:ai(!1,!1)},xc={get:ai(!1,!0)},Oc={get:ai(!0,!1)},xa=new WeakMap,Oa=new WeakMap,ja=new WeakMap,jc=new WeakMap;function Pc(e){switch(e){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function Cc(e){return e.__v_skip||!Object.isExtensible(e)?0:Pc(nc(e))}function yt(e){return Qt(e)?e:li(e,!1,wc,Tc,xa)}function Pa(e){return li(e,!1,Ec,xc,Oa)}function Ca(e){return li(e,!0,kc,Oc,ja)}function li(e,t,n,r,s){if(!re(e)||e.__v_raw&&!(t&&e.__v_isReactive))return e;const i=s.get(e);if(i)return i;const o=Cc(e);if(o===0)return e;const a=new Proxy(e,o===2?r:n);return s.set(e,a),a}function Ct(e){return Qt(e)?Ct(e.__v_raw):!!(e&&e.__v_isReactive)}function Qt(e){return!!(e&&e.__v_isReadonly)}function qe(e){return!!(e&&e.__v_isShallow)}function ci(e){return e?!!e.__v_raw:!1}function K(e){const t=e&&e.__v_raw;return t?K(t):e}function vn(e){return!X(e,"__v_skip")&&Object.isExtensible(e)&&la(e,"__v_skip",!0),e}const ke=e=>re(e)?yt(e):e,xs=e=>re(e)?Ca(e):e;function ue(e){return e?e.__v_isRef===!0:!1}function de(e){return $a(e,!1)}function $c(e){return $a(e,!0)}function $a(e,t){return ue(e)?e:new Rc(e,t)}class Rc{constructor(t,n){this.dep=new oi,this.__v_isRef=!0,this.__v_isShallow=!1,this._rawValue=n?t:K(t),this._value=n?t:ke(t),this.__v_isShallow=n}get value(){return this.dep.track(),this._value}set value(t){const n=this._rawValue,r=this.__v_isShallow||qe(t)||Qt(t);t=r?t:K(t),Pt(t,n)&&(this._rawValue=t,this._value=r?t:ke(t),this.dep.trigger())}}function yn(e){return ue(e)?e.value:e}const Lc={get:(e,t,n)=>t==="__v_raw"?e:yn(Reflect.get(e,t,n)),set:(e,t,n,r)=>{const s=e[t];return ue(s)&&!ue(n)?(s.value=n,!0):Reflect.set(e,t,n,r)}};function Ra(e){return Ct(e)?e:new Proxy(e,Lc)}function Ic(e){const t=M(e)?new Array(e.length):{};for(const n in e)t[n]=Dc(e,n);return t}class Uc{constructor(t,n,r){this._object=t,this._key=n,this._defaultValue=r,this.__v_isRef=!0,this._value=void 0}get value(){const t=this._object[this._key];return this._value=t===void 0?this._defaultValue:t}set value(t){this._object[this._key]=t}get dep(){return gc(K(this._object),this._key)}}function Dc(e,t,n){const r=e[t];return ue(r)?r:new Uc(e,t,n)}class Nc{constructor(t,n,r){this.fn=t,this.setter=n,this._value=void 0,this.dep=new oi(this),this.__v_isRef=!0,this.deps=void 0,this.depsTail=void 0,this.flags=16,this.globalVersion=Qn-1,this.next=void 0,this.effect=this,this.__v_isReadonly=!n,this.isSSR=r}notify(){if(this.flags|=16,!(this.flags&8)&&ne!==this)return ya(this,!0),!0}get value(){const t=this.dep.track();return wa(this),t&&(t.version=this.dep.version),this._value}set value(t){this.setter&&this.setter(t)}}function Mc(e,t,n=!1){let r,s;return z(e)?r=e:(r=e.get,s=e.set),new Nc(r,s,n)}const dr={},Pr=new WeakMap;let Vt;function Fc(e,t=!1,n=Vt){if(n){let r=Pr.get(n);r||Pr.set(n,r=[]),r.push(e)}}function Bc(e,t,n=ee){const{immediate:r,deep:s,once:i,scheduler:o,augmentJob:a,call:l}=n,u=T=>s?T:qe(T)||s===!1||s===0?mt(T,1):mt(T);let c,h,f,g,v=!1,b=!1;if(ue(e)?(h=()=>e.value,v=qe(e)):Ct(e)?(h=()=>u(e),v=!0):M(e)?(b=!0,v=e.some(T=>Ct(T)||qe(T)),h=()=>e.map(T=>{if(ue(T))return T.value;if(Ct(T))return u(T);if(z(T))return l?l(T,2):T()})):z(e)?t?h=l?()=>l(e,2):e:h=()=>{if(f){Dt();try{f()}finally{Nt()}}const T=Vt;Vt=c;try{return l?l(e,3,[g]):e(g)}finally{Vt=T}}:h=it,t&&s){const T=h,N=s===!0?1/0:s;h=()=>mt(T(),N)}const x=ga(),$=()=>{c.stop(),x&&x.active&&Ys(x.effects,c)};if(i&&t){const T=t;t=(...N)=>{T(...N),$()}}let w=b?new Array(e.length).fill(dr):dr;const E=T=>{if(!(!(c.flags&1)||!c.dirty&&!T))if(t){const N=c.run();if(s||v||(b?N.some((ae,F)=>Pt(ae,w[F])):Pt(N,w))){f&&f();const ae=Vt;Vt=c;try{const F=[N,w===dr?void 0:b&&w[0]===dr?[]:w,g];l?l(t,3,F):t(...F),w=N}finally{Vt=ae}}}else c.run()};return a&&a(E),c=new ma(h),c.scheduler=o?()=>o(E,!1):E,g=T=>Fc(T,!1,c),f=c.onStop=()=>{const T=Pr.get(c);if(T){if(l)l(T,4);else for(const N of T)N();Pr.delete(c)}},t?r?E(!0):w=c.run():o?o(E.bind(null,!0),!0):c.run(),$.pause=c.pause.bind(c),$.resume=c.resume.bind(c),$.stop=$,$}function mt(e,t=1/0,n){if(t<=0||!re(e)||e.__v_skip||(n=n||new Set,n.has(e)))return e;if(n.add(e),t--,ue(e))mt(e.value,t,n);else if(M(e))for(let r=0;r<e.length;r++)mt(e[r],t,n);else if(Tn(e)||mn(e))e.forEach(r=>{mt(r,t,n)});else if(aa(e)){for(const r in e)mt(e[r],t,n);for(const r of Object.getOwnPropertySymbols(e))Object.prototype.propertyIsEnumerable.call(e,r)&&mt(e[r],t,n)}return e}/**
* @vue/runtime-core v3.5.13
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/function ir(e,t,n,r){try{return r?e(...r):e()}catch(s){Vr(s,t,n)}}function at(e,t,n,r){if(z(e)){const s=ir(e,t,n,r);return s&&ia(s)&&s.catch(i=>{Vr(i,t,n)}),s}if(M(e)){const s=[];for(let i=0;i<e.length;i++)s.push(at(e[i],t,n,r));return s}}function Vr(e,t,n,r=!0){const s=t?t.vnode:null,{errorHandler:i,throwUnhandledErrorInProduction:o}=t&&t.appContext.config||ee;if(t){let a=t.parent;const l=t.proxy,u=`https://vuejs.org/error-reference/#runtime-${n}`;for(;a;){const c=a.ec;if(c){for(let h=0;h<c.length;h++)if(c[h](e,l,u)===!1)return}a=a.parent}if(i){Dt(),ir(i,null,10,[e,l,u]),Nt();return}}zc(e,n,s,r,o)}function zc(e,t,n,r=!0,s=!1){if(s)throw e;console.error(e)}const xe=[];let nt=-1;const _n=[];let St=null,fn=0;const La=Promise.resolve();let Cr=null;function jt(e){const t=Cr||La;return e?t.then(this?e.bind(this):e):t}function qc(e){let t=nt+1,n=xe.length;for(;t<n;){const r=t+n>>>1,s=xe[r],i=Yn(s);i<e||i===e&&s.flags&2?t=r+1:n=r}return t}function ui(e){if(!(e.flags&1)){const t=Yn(e),n=xe[xe.length-1];!n||!(e.flags&2)&&t>=Yn(n)?xe.push(e):xe.splice(qc(t),0,e),e.flags|=1,Ia()}}function Ia(){Cr||(Cr=La.then(Da))}function Vc(e){M(e)?_n.push(...e):St&&e.id===-1?St.splice(fn+1,0,e):e.flags&1||(_n.push(e),e.flags|=1),Ia()}function Ri(e,t,n=nt+1){for(;n<xe.length;n++){const r=xe[n];if(r&&r.flags&2){if(e&&r.id!==e.uid)continue;xe.splice(n,1),n--,r.flags&4&&(r.flags&=-2),r(),r.flags&4||(r.flags&=-2)}}}function Ua(e){if(_n.length){const t=[...new Set(_n)].sort((n,r)=>Yn(n)-Yn(r));if(_n.length=0,St){St.push(...t);return}for(St=t,fn=0;fn<St.length;fn++){const n=St[fn];n.flags&4&&(n.flags&=-2),n.flags&8||n(),n.flags&=-2}St=null,fn=0}}const Yn=e=>e.id==null?e.flags&2?-1:1/0:e.id;function Da(e){try{for(nt=0;nt<xe.length;nt++){const t=xe[nt];t&&!(t.flags&8)&&(t.flags&4&&(t.flags&=-2),ir(t,t.i,t.i?15:14),t.flags&4||(t.flags&=-2))}}finally{for(;nt<xe.length;nt++){const t=xe[nt];t&&(t.flags&=-2)}nt=-1,xe.length=0,Ua(),Cr=null,(xe.length||_n.length)&&Da()}}let Pe=null,Na=null;function $r(e){const t=Pe;return Pe=e,Na=e&&e.type.__scopeId||null,t}function Os(e,t=Pe,n){if(!t||e._n)return e;const r=(...s)=>{r._d&&qi(-1);const i=$r(t);let o;try{o=e(...s)}finally{$r(i),r._d&&qi(1)}return o};return r._n=!0,r._c=!0,r._d=!0,r}function Ng(e,t){if(Pe===null)return e;const n=Qr(Pe),r=e.dirs||(e.dirs=[]);for(let s=0;s<t.length;s++){let[i,o,a,l=ee]=t[s];i&&(z(i)&&(i={mounted:i,updated:i}),i.deep&&mt(o),r.push({dir:i,instance:n,value:o,oldValue:void 0,arg:a,modifiers:l}))}return e}function Ft(e,t,n,r){const s=e.dirs,i=t&&t.dirs;for(let o=0;o<s.length;o++){const a=s[o];i&&(a.oldValue=i[o].value);let l=a.dir[r];l&&(Dt(),at(l,n,8,[e.el,a,e,t]),Nt())}}const Hc=Symbol("_vte"),Wc=e=>e.__isTeleport;function hi(e,t){e.shapeFlag&6&&e.component?(e.transition=t,hi(e.component.subTree,t)):e.shapeFlag&128?(e.ssContent.transition=t.clone(e.ssContent),e.ssFallback.transition=t.clone(e.ssFallback)):e.transition=t}/*! #__NO_SIDE_EFFECTS__ */function Hr(e,t){return z(e)?ve({name:e.name},t,{setup:e}):e}function Ma(e){e.ids=[e.ids[0]+e.ids[2]+++"-",0,0]}function Rr(e,t,n,r,s=!1){if(M(e)){e.forEach((v,b)=>Rr(v,t&&(M(t)?t[b]:t),n,r,s));return}if(zn(r)&&!s){r.shapeFlag&512&&r.type.__asyncResolved&&r.component.subTree.component&&Rr(e,t,n,r.component.subTree);return}const i=r.shapeFlag&4?Qr(r.component):r.el,o=s?null:i,{i:a,r:l}=e,u=t&&t.r,c=a.refs===ee?a.refs={}:a.refs,h=a.setupState,f=K(h),g=h===ee?()=>!1:v=>X(f,v);if(u!=null&&u!==l&&(he(u)?(c[u]=null,g(u)&&(h[u]=null)):ue(u)&&(u.value=null)),z(l))ir(l,a,12,[o,c]);else{const v=he(l),b=ue(l);if(v||b){const x=()=>{if(e.f){const $=v?g(l)?h[l]:c[l]:l.value;s?M($)&&Ys($,i):M($)?$.includes(i)||$.push(i):v?(c[l]=[i],g(l)&&(h[l]=c[l])):(l.value=[i],e.k&&(c[e.k]=l.value))}else v?(c[l]=o,g(l)&&(h[l]=o)):b&&(l.value=o,e.k&&(c[e.k]=o))};o?(x.id=-1,Ue(x,n)):x()}}}zr().requestIdleCallback;zr().cancelIdleCallback;const zn=e=>!!e.type.__asyncLoader,Fa=e=>e.type.__isKeepAlive;function Jc(e,t){Ba(e,"a",t)}function Kc(e,t){Ba(e,"da",t)}function Ba(e,t,n=_e){const r=e.__wdc||(e.__wdc=()=>{let s=n;for(;s;){if(s.isDeactivated)return;s=s.parent}return e()});if(Wr(t,r,n),n){let s=n.parent;for(;s&&s.parent;)Fa(s.parent.vnode)&&Gc(r,t,n,s),s=s.parent}}function Gc(e,t,n,r){const s=Wr(t,e,r,!0);Jr(()=>{Ys(r[t],s)},n)}function Wr(e,t,n=_e,r=!1){if(n){const s=n[e]||(n[e]=[]),i=t.__weh||(t.__weh=(...o)=>{Dt();const a=ar(n),l=at(t,n,e,o);return a(),Nt(),l});return r?s.unshift(i):s.push(i),i}}const _t=e=>(t,n=_e)=>{(!er||e==="sp")&&Wr(e,(...r)=>t(...r),n)},Qc=_t("bm"),or=_t("m"),Xc=_t("bu"),Yc=_t("u"),Zc=_t("bum"),Jr=_t("um"),eu=_t("sp"),tu=_t("rtg"),nu=_t("rtc");function ru(e,t=_e){Wr("ec",e,t)}const di="components",su="directives";function za(e,t){return fi(di,e,!0,t)||e}const qa=Symbol.for("v-ndc");function Li(e){return he(e)?fi(di,e,!1)||e:e||qa}function Mg(e){return fi(su,e)}function fi(e,t,n=!0,r=!1){const s=Pe||_e;if(s){const i=s.type;if(e===di){const a=Ku(i,!1);if(a&&(a===t||a===We(t)||a===Br(We(t))))return i}const o=Ii(s[e]||i[e],t)||Ii(s.appContext[e],t);return!o&&r?i:o}}function Ii(e,t){return e&&(e[t]||e[We(t)]||e[Br(We(t))])}function iu(e,t,n,r){let s;const i=n,o=M(e);if(o||he(e)){const a=o&&Ct(e);let l=!1;a&&(l=!qe(e),e=qr(e)),s=new Array(e.length);for(let u=0,c=e.length;u<c;u++)s[u]=t(l?ke(e[u]):e[u],u,void 0,i)}else if(typeof e=="number"){s=new Array(e);for(let a=0;a<e;a++)s[a]=t(a+1,a,void 0,i)}else if(re(e))if(e[Symbol.iterator])s=Array.from(e,(a,l)=>t(a,l,void 0,i));else{const a=Object.keys(e);s=new Array(a.length);for(let l=0,u=a.length;l<u;l++){const c=a[l];s[l]=t(e[c],c,l,i)}}else s=[];return s}const js=e=>e?cl(e)?Qr(e):js(e.parent):null,qn=ve(Object.create(null),{$:e=>e,$el:e=>e.vnode.el,$data:e=>e.data,$props:e=>e.props,$attrs:e=>e.attrs,$slots:e=>e.slots,$refs:e=>e.refs,$parent:e=>js(e.parent),$root:e=>js(e.root),$host:e=>e.ce,$emit:e=>e.emit,$options:e=>pi(e),$forceUpdate:e=>e.f||(e.f=()=>{ui(e.update)}),$nextTick:e=>e.n||(e.n=jt.bind(e.proxy)),$watch:e=>xu.bind(e)}),cs=(e,t)=>e!==ee&&!e.__isScriptSetup&&X(e,t),ou={get({_:e},t){if(t==="__v_skip")return!0;const{ctx:n,setupState:r,data:s,props:i,accessCache:o,type:a,appContext:l}=e;let u;if(t[0]!=="$"){const g=o[t];if(g!==void 0)switch(g){case 1:return r[t];case 2:return s[t];case 4:return n[t];case 3:return i[t]}else{if(cs(r,t))return o[t]=1,r[t];if(s!==ee&&X(s,t))return o[t]=2,s[t];if((u=e.propsOptions[0])&&X(u,t))return o[t]=3,i[t];if(n!==ee&&X(n,t))return o[t]=4,n[t];Ps&&(o[t]=0)}}const c=qn[t];let h,f;if(c)return t==="$attrs"&&we(e.attrs,"get",""),c(e);if((h=a.__cssModules)&&(h=h[t]))return h;if(n!==ee&&X(n,t))return o[t]=4,n[t];if(f=l.config.globalProperties,X(f,t))return f[t]},set({_:e},t,n){const{data:r,setupState:s,ctx:i}=e;return cs(s,t)?(s[t]=n,!0):r!==ee&&X(r,t)?(r[t]=n,!0):X(e.props,t)||t[0]==="$"&&t.slice(1)in e?!1:(i[t]=n,!0)},has({_:{data:e,setupState:t,accessCache:n,ctx:r,appContext:s,propsOptions:i}},o){let a;return!!n[o]||e!==ee&&X(e,o)||cs(t,o)||(a=i[0])&&X(a,o)||X(r,o)||X(qn,o)||X(s.config.globalProperties,o)},defineProperty(e,t,n){return n.get!=null?e._.accessCache[t]=0:X(n,"value")&&this.set(e,t,n.value,null),Reflect.defineProperty(e,t,n)}};function Ui(e){return M(e)?e.reduce((t,n)=>(t[n]=null,t),{}):e}let Ps=!0;function au(e){const t=pi(e),n=e.proxy,r=e.ctx;Ps=!1,t.beforeCreate&&Di(t.beforeCreate,e,"bc");const{data:s,computed:i,methods:o,watch:a,provide:l,inject:u,created:c,beforeMount:h,mounted:f,beforeUpdate:g,updated:v,activated:b,deactivated:x,beforeDestroy:$,beforeUnmount:w,destroyed:E,unmounted:T,render:N,renderTracked:ae,renderTriggered:F,errorCaptured:H,serverPrefetch:ce,expose:Se,inheritAttrs:Oe,components:Je,directives:Me,filters:Mt}=t;if(u&&lu(u,r,null),o)for(const V in o){const G=o[V];z(G)&&(r[V]=G.bind(n))}if(s){const V=s.call(n,n);re(V)&&(e.data=yt(V))}if(Ps=!0,i)for(const V in i){const G=i[V],Ce=z(G)?G.bind(n,n):z(G.get)?G.get.bind(n,n):it,On=!z(G)&&z(G.set)?G.set.bind(n):it,ct=Ee({get:Ce,set:On});Object.defineProperty(r,V,{enumerable:!0,configurable:!0,get:()=>ct.value,set:ut=>ct.value=ut})}if(a)for(const V in a)Va(a[V],r,n,V);if(l){const V=z(l)?l.call(n):l;Reflect.ownKeys(V).forEach(G=>{kr(G,V[G])})}c&&Di(c,e,"c");function se(V,G){M(G)?G.forEach(Ce=>V(Ce.bind(n))):G&&V(G.bind(n))}if(se(Qc,h),se(or,f),se(Xc,g),se(Yc,v),se(Jc,b),se(Kc,x),se(ru,H),se(nu,ae),se(tu,F),se(Zc,w),se(Jr,T),se(eu,ce),M(Se))if(Se.length){const V=e.exposed||(e.exposed={});Se.forEach(G=>{Object.defineProperty(V,G,{get:()=>n[G],set:Ce=>n[G]=Ce})})}else e.exposed||(e.exposed={});N&&e.render===it&&(e.render=N),Oe!=null&&(e.inheritAttrs=Oe),Je&&(e.components=Je),Me&&(e.directives=Me),ce&&Ma(e)}function lu(e,t,n=it){M(e)&&(e=Cs(e));for(const r in e){const s=e[r];let i;re(s)?"default"in s?i=Ve(s.from||r,s.default,!0):i=Ve(s.from||r):i=Ve(s),ue(i)?Object.defineProperty(t,r,{enumerable:!0,configurable:!0,get:()=>i.value,set:o=>i.value=o}):t[r]=i}}function Di(e,t,n){at(M(e)?e.map(r=>r.bind(t.proxy)):e.bind(t.proxy),t,n)}function Va(e,t,n,r){let s=r.includes(".")?sl(n,r):()=>n[r];if(he(e)){const i=t[e];z(i)&&$t(s,i)}else if(z(e))$t(s,e.bind(n));else if(re(e))if(M(e))e.forEach(i=>Va(i,t,n,r));else{const i=z(e.handler)?e.handler.bind(n):t[e.handler];z(i)&&$t(s,i,e)}}function pi(e){const t=e.type,{mixins:n,extends:r}=t,{mixins:s,optionsCache:i,config:{optionMergeStrategies:o}}=e.appContext,a=i.get(t);let l;return a?l=a:!s.length&&!n&&!r?l=t:(l={},s.length&&s.forEach(u=>Lr(l,u,o,!0)),Lr(l,t,o)),re(t)&&i.set(t,l),l}function Lr(e,t,n,r=!1){const{mixins:s,extends:i}=t;i&&Lr(e,i,n,!0),s&&s.forEach(o=>Lr(e,o,n,!0));for(const o in t)if(!(r&&o==="expose")){const a=cu[o]||n&&n[o];e[o]=a?a(e[o],t[o]):t[o]}return e}const cu={data:Ni,props:Mi,emits:Mi,methods:Un,computed:Un,beforeCreate:Ae,created:Ae,beforeMount:Ae,mounted:Ae,beforeUpdate:Ae,updated:Ae,beforeDestroy:Ae,beforeUnmount:Ae,destroyed:Ae,unmounted:Ae,activated:Ae,deactivated:Ae,errorCaptured:Ae,serverPrefetch:Ae,components:Un,directives:Un,watch:hu,provide:Ni,inject:uu};function Ni(e,t){return t?e?function(){return ve(z(e)?e.call(this,this):e,z(t)?t.call(this,this):t)}:t:e}function uu(e,t){return Un(Cs(e),Cs(t))}function Cs(e){if(M(e)){const t={};for(let n=0;n<e.length;n++)t[e[n]]=e[n];return t}return e}function Ae(e,t){return e?[...new Set([].concat(e,t))]:t}function Un(e,t){return e?ve(Object.create(null),e,t):t}function Mi(e,t){return e?M(e)&&M(t)?[...new Set([...e,...t])]:ve(Object.create(null),Ui(e),Ui(t??{})):t}function hu(e,t){if(!e)return t;if(!t)return e;const n=ve(Object.create(null),e);for(const r in t)n[r]=Ae(e[r],t[r]);return n}function Ha(){return{app:null,config:{isNativeTag:ec,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let du=0;function fu(e,t){return function(n,r=null){z(n)||(n=ve({},n)),r!=null&&!re(r)&&(r=null);const s=Ha(),i=new WeakSet,o=[];let a=!1;const l=s.app={_uid:du++,_component:n,_props:r,_container:null,_context:s,_instance:null,version:Qu,get config(){return s.config},set config(u){},use(u,...c){return i.has(u)||(u&&z(u.install)?(i.add(u),u.install(l,...c)):z(u)&&(i.add(u),u(l,...c))),l},mixin(u){return s.mixins.includes(u)||s.mixins.push(u),l},component(u,c){return c?(s.components[u]=c,l):s.components[u]},directive(u,c){return c?(s.directives[u]=c,l):s.directives[u]},mount(u,c,h){if(!a){const f=l._ceVNode||fe(n,r);return f.appContext=s,h===!0?h="svg":h===!1&&(h=void 0),c&&t?t(f,u):e(f,u,h),a=!0,l._container=u,u.__vue_app__=l,Qr(f.component)}},onUnmount(u){o.push(u)},unmount(){a&&(at(o,l._instance,16),e(null,l._container),delete l._container.__vue_app__)},provide(u,c){return s.provides[u]=c,l},runWithContext(u){const c=Kt;Kt=l;try{return u()}finally{Kt=c}}};return l}}let Kt=null;function kr(e,t){if(_e){let n=_e.provides;const r=_e.parent&&_e.parent.provides;r===n&&(n=_e.provides=Object.create(r)),n[e]=t}}function Ve(e,t,n=!1){const r=_e||Pe;if(r||Kt){const s=Kt?Kt._context.provides:r?r.parent==null?r.vnode.appContext&&r.vnode.appContext.provides:r.parent.provides:void 0;if(s&&e in s)return s[e];if(arguments.length>1)return n&&z(t)?t.call(r&&r.proxy):t}}function pu(){return!!(_e||Pe||Kt)}const Wa={},Ja=()=>Object.create(Wa),Ka=e=>Object.getPrototypeOf(e)===Wa;function gu(e,t,n,r=!1){const s={},i=Ja();e.propsDefaults=Object.create(null),Ga(e,t,s,i);for(const o in e.propsOptions[0])o in s||(s[o]=void 0);n?e.props=r?s:Pa(s):e.type.props?e.props=s:e.props=i,e.attrs=i}function mu(e,t,n,r){const{props:s,attrs:i,vnode:{patchFlag:o}}=e,a=K(s),[l]=e.propsOptions;let u=!1;if((r||o>0)&&!(o&16)){if(o&8){const c=e.vnode.dynamicProps;for(let h=0;h<c.length;h++){let f=c[h];if(Kr(e.emitsOptions,f))continue;const g=t[f];if(l)if(X(i,f))g!==i[f]&&(i[f]=g,u=!0);else{const v=We(f);s[v]=$s(l,a,v,g,e,!1)}else g!==i[f]&&(i[f]=g,u=!0)}}}else{Ga(e,t,s,i)&&(u=!0);let c;for(const h in a)(!t||!X(t,h)&&((c=Ut(h))===h||!X(t,c)))&&(l?n&&(n[h]!==void 0||n[c]!==void 0)&&(s[h]=$s(l,a,h,void 0,e,!0)):delete s[h]);if(i!==a)for(const h in i)(!t||!X(t,h))&&(delete i[h],u=!0)}u&&gt(e.attrs,"set","")}function Ga(e,t,n,r){const[s,i]=e.propsOptions;let o=!1,a;if(t)for(let l in t){if(Mn(l))continue;const u=t[l];let c;s&&X(s,c=We(l))?!i||!i.includes(c)?n[c]=u:(a||(a={}))[c]=u:Kr(e.emitsOptions,l)||(!(l in r)||u!==r[l])&&(r[l]=u,o=!0)}if(i){const l=K(n),u=a||ee;for(let c=0;c<i.length;c++){const h=i[c];n[h]=$s(s,l,h,u[h],e,!X(u,h))}}return o}function $s(e,t,n,r,s,i){const o=e[n];if(o!=null){const a=X(o,"default");if(a&&r===void 0){const l=o.default;if(o.type!==Function&&!o.skipFactory&&z(l)){const{propsDefaults:u}=s;if(n in u)r=u[n];else{const c=ar(s);r=u[n]=l.call(null,t),c()}}else r=l;s.ce&&s.ce._setProp(n,r)}o[0]&&(i&&!a?r=!1:o[1]&&(r===""||r===Ut(n))&&(r=!0))}return r}const vu=new WeakMap;function Qa(e,t,n=!1){const r=n?vu:t.propsCache,s=r.get(e);if(s)return s;const i=e.props,o={},a=[];let l=!1;if(!z(e)){const c=h=>{l=!0;const[f,g]=Qa(h,t,!0);ve(o,f),g&&a.push(...g)};!n&&t.mixins.length&&t.mixins.forEach(c),e.extends&&c(e.extends),e.mixins&&e.mixins.forEach(c)}if(!i&&!l)return re(e)&&r.set(e,gn),gn;if(M(i))for(let c=0;c<i.length;c++){const h=We(i[c]);Fi(h)&&(o[h]=ee)}else if(i)for(const c in i){const h=We(c);if(Fi(h)){const f=i[c],g=o[h]=M(f)||z(f)?{type:f}:ve({},f),v=g.type;let b=!1,x=!0;if(M(v))for(let $=0;$<v.length;++$){const w=v[$],E=z(w)&&w.name;if(E==="Boolean"){b=!0;break}else E==="String"&&(x=!1)}else b=z(v)&&v.name==="Boolean";g[0]=b,g[1]=x,(b||X(g,"default"))&&a.push(h)}}const u=[o,a];return re(e)&&r.set(e,u),u}function Fi(e){return e[0]!=="$"&&!Mn(e)}const Xa=e=>e[0]==="_"||e==="$stable",gi=e=>M(e)?e.map(st):[st(e)],yu=(e,t,n)=>{if(t._n)return t;const r=Os((...s)=>gi(t(...s)),n);return r._c=!1,r},Ya=(e,t,n)=>{const r=e._ctx;for(const s in e){if(Xa(s))continue;const i=e[s];if(z(i))t[s]=yu(s,i,r);else if(i!=null){const o=gi(i);t[s]=()=>o}}},Za=(e,t)=>{const n=gi(t);e.slots.default=()=>n},el=(e,t,n)=>{for(const r in t)(n||r!=="_")&&(e[r]=t[r])},_u=(e,t,n)=>{const r=e.slots=Ja();if(e.vnode.shapeFlag&32){const s=t._;s?(el(r,t,n),n&&la(r,"_",s,!0)):Ya(t,r)}else t&&Za(e,t)},bu=(e,t,n)=>{const{vnode:r,slots:s}=e;let i=!0,o=ee;if(r.shapeFlag&32){const a=t._;a?n&&a===1?i=!1:el(s,t,n):(i=!t.$stable,Ya(t,s)),o=t}else t&&(Za(e,t),o={default:1});if(i)for(const a in s)!Xa(a)&&o[a]==null&&delete s[a]},Ue=Lu;function wu(e){return ku(e)}function ku(e,t){const n=zr();n.__VUE__=!0;const{insert:r,remove:s,patchProp:i,createElement:o,createText:a,createComment:l,setText:u,setElementText:c,parentNode:h,nextSibling:f,setScopeId:g=it,insertStaticContent:v}=e,b=(d,p,m,k=null,y=null,S=null,C=void 0,j=null,O=!!p.dynamicChildren)=>{if(d===p)return;d&&!Cn(d,p)&&(k=_(d),Fe(d,y,S,!0),d=null),p.patchFlag===-2&&(O=!1,p.dynamicChildren=null);const{type:A,ref:D,shapeFlag:L}=p;switch(A){case Gr:x(d,p,m,k);break;case Xt:$(d,p,m,k);break;case Er:d==null&&w(p,m,k,C);break;case rt:Je(d,p,m,k,y,S,C,j,O);break;default:L&1?N(d,p,m,k,y,S,C,j,O):L&6?Me(d,p,m,k,y,S,C,j,O):(L&64||L&128)&&A.process(d,p,m,k,y,S,C,j,O,I)}D!=null&&y&&Rr(D,d&&d.ref,S,p||d,!p)},x=(d,p,m,k)=>{if(d==null)r(p.el=a(p.children),m,k);else{const y=p.el=d.el;p.children!==d.children&&u(y,p.children)}},$=(d,p,m,k)=>{d==null?r(p.el=l(p.children||""),m,k):p.el=d.el},w=(d,p,m,k)=>{[d.el,d.anchor]=v(d.children,p,m,k,d.el,d.anchor)},E=({el:d,anchor:p},m,k)=>{let y;for(;d&&d!==p;)y=f(d),r(d,m,k),d=y;r(p,m,k)},T=({el:d,anchor:p})=>{let m;for(;d&&d!==p;)m=f(d),s(d),d=m;s(p)},N=(d,p,m,k,y,S,C,j,O)=>{p.type==="svg"?C="svg":p.type==="math"&&(C="mathml"),d==null?ae(p,m,k,y,S,C,j,O):ce(d,p,y,S,C,j,O)},ae=(d,p,m,k,y,S,C,j)=>{let O,A;const{props:D,shapeFlag:L,transition:U,dirs:B}=d;if(O=d.el=o(d.type,S,D&&D.is,D),L&8?c(O,d.children):L&16&&H(d.children,O,null,k,y,us(d,S),C,j),B&&Ft(d,null,k,"created"),F(O,d,d.scopeId,C,k),D){for(const oe in D)oe!=="value"&&!Mn(oe)&&i(O,oe,null,D[oe],S,k);"value"in D&&i(O,"value",null,D.value,S),(A=D.onVnodeBeforeMount)&&et(A,k,d)}B&&Ft(d,null,k,"beforeMount");const J=Eu(y,U);J&&U.beforeEnter(O),r(O,p,m),((A=D&&D.onVnodeMounted)||J||B)&&Ue(()=>{A&&et(A,k,d),J&&U.enter(O),B&&Ft(d,null,k,"mounted")},y)},F=(d,p,m,k,y)=>{if(m&&g(d,m),k)for(let S=0;S<k.length;S++)g(d,k[S]);if(y){let S=y.subTree;if(p===S||ol(S.type)&&(S.ssContent===p||S.ssFallback===p)){const C=y.vnode;F(d,C,C.scopeId,C.slotScopeIds,y.parent)}}},H=(d,p,m,k,y,S,C,j,O=0)=>{for(let A=O;A<d.length;A++){const D=d[A]=j?At(d[A]):st(d[A]);b(null,D,p,m,k,y,S,C,j)}},ce=(d,p,m,k,y,S,C)=>{const j=p.el=d.el;let{patchFlag:O,dynamicChildren:A,dirs:D}=p;O|=d.patchFlag&16;const L=d.props||ee,U=p.props||ee;let B;if(m&&Bt(m,!1),(B=U.onVnodeBeforeUpdate)&&et(B,m,p,d),D&&Ft(p,d,m,"beforeUpdate"),m&&Bt(m,!0),(L.innerHTML&&U.innerHTML==null||L.textContent&&U.textContent==null)&&c(j,""),A?Se(d.dynamicChildren,A,j,m,k,us(p,y),S):C||Ce(d,p,j,null,m,k,us(p,y),S,!1),O>0){if(O&16)Oe(j,L,U,m,y);else if(O&2&&L.class!==U.class&&i(j,"class",null,U.class,y),O&4&&i(j,"style",L.style,U.style,y),O&8){const J=p.dynamicProps;for(let oe=0;oe<J.length;oe++){const Z=J[oe],$e=L[Z],be=U[Z];(be!==$e||Z==="value")&&i(j,Z,$e,be,y,m)}}O&1&&d.children!==p.children&&c(j,p.children)}else!C&&A==null&&Oe(j,L,U,m,y);((B=U.onVnodeUpdated)||D)&&Ue(()=>{B&&et(B,m,p,d),D&&Ft(p,d,m,"updated")},k)},Se=(d,p,m,k,y,S,C)=>{for(let j=0;j<p.length;j++){const O=d[j],A=p[j],D=O.el&&(O.type===rt||!Cn(O,A)||O.shapeFlag&70)?h(O.el):m;b(O,A,D,null,k,y,S,C,!0)}},Oe=(d,p,m,k,y)=>{if(p!==m){if(p!==ee)for(const S in p)!Mn(S)&&!(S in m)&&i(d,S,p[S],null,y,k);for(const S in m){if(Mn(S))continue;const C=m[S],j=p[S];C!==j&&S!=="value"&&i(d,S,j,C,y,k)}"value"in m&&i(d,"value",p.value,m.value,y)}},Je=(d,p,m,k,y,S,C,j,O)=>{const A=p.el=d?d.el:a(""),D=p.anchor=d?d.anchor:a("");let{patchFlag:L,dynamicChildren:U,slotScopeIds:B}=p;B&&(j=j?j.concat(B):B),d==null?(r(A,m,k),r(D,m,k),H(p.children||[],m,D,y,S,C,j,O)):L>0&&L&64&&U&&d.dynamicChildren?(Se(d.dynamicChildren,U,m,y,S,C,j),(p.key!=null||y&&p===y.subTree)&&tl(d,p,!0)):Ce(d,p,m,D,y,S,C,j,O)},Me=(d,p,m,k,y,S,C,j,O)=>{p.slotScopeIds=j,d==null?p.shapeFlag&512?y.ctx.activate(p,m,k,C,O):Mt(p,m,k,y,S,C,O):se(d,p,O)},Mt=(d,p,m,k,y,S,C)=>{const j=d.component=qu(d,k,y);if(Fa(d)&&(j.ctx.renderer=I),Vu(j,!1,C),j.asyncDep){if(y&&y.registerDep(j,V,C),!d.el){const O=j.subTree=fe(Xt);$(null,O,p,m)}}else V(j,d,p,m,y,S,C)},se=(d,p,m)=>{const k=p.component=d.component;if($u(d,p,m))if(k.asyncDep&&!k.asyncResolved){G(k,p,m);return}else k.next=p,k.update();else p.el=d.el,k.vnode=p},V=(d,p,m,k,y,S,C)=>{const j=()=>{if(d.isMounted){let{next:L,bu:U,u:B,parent:J,vnode:oe}=d;{const Re=nl(d);if(Re){L&&(L.el=oe.el,G(d,L,C)),Re.asyncDep.then(()=>{d.isUnmounted||j()});return}}let Z=L,$e;Bt(d,!1),L?(L.el=oe.el,G(d,L,C)):L=oe,U&&wr(U),($e=L.props&&L.props.onVnodeBeforeUpdate)&&et($e,J,L,oe),Bt(d,!0);const be=hs(d),Ke=d.subTree;d.subTree=be,b(Ke,be,h(Ke.el),_(Ke),d,y,S),L.el=be.el,Z===null&&Ru(d,be.el),B&&Ue(B,y),($e=L.props&&L.props.onVnodeUpdated)&&Ue(()=>et($e,J,L,oe),y)}else{let L;const{el:U,props:B}=p,{bm:J,m:oe,parent:Z,root:$e,type:be}=d,Ke=zn(p);if(Bt(d,!1),J&&wr(J),!Ke&&(L=B&&B.onVnodeBeforeMount)&&et(L,Z,p),Bt(d,!0),U&&ie){const Re=()=>{d.subTree=hs(d),ie(U,d.subTree,d,y,null)};Ke&&be.__asyncHydrate?be.__asyncHydrate(U,d,Re):Re()}else{$e.ce&&$e.ce._injectChildStyle(be);const Re=d.subTree=hs(d);b(null,Re,m,k,d,y,S),p.el=Re.el}if(oe&&Ue(oe,y),!Ke&&(L=B&&B.onVnodeMounted)){const Re=p;Ue(()=>et(L,Z,Re),y)}(p.shapeFlag&256||Z&&zn(Z.vnode)&&Z.vnode.shapeFlag&256)&&d.a&&Ue(d.a,y),d.isMounted=!0,p=m=k=null}};d.scope.on();const O=d.effect=new ma(j);d.scope.off();const A=d.update=O.run.bind(O),D=d.job=O.runIfDirty.bind(O);D.i=d,D.id=d.uid,O.scheduler=()=>ui(D),Bt(d,!0),A()},G=(d,p,m)=>{p.component=d;const k=d.vnode.props;d.vnode=p,d.next=null,mu(d,p.props,k,m),bu(d,p.children,m),Dt(),Ri(d),Nt()},Ce=(d,p,m,k,y,S,C,j,O=!1)=>{const A=d&&d.children,D=d?d.shapeFlag:0,L=p.children,{patchFlag:U,shapeFlag:B}=p;if(U>0){if(U&128){ct(A,L,m,k,y,S,C,j,O);return}else if(U&256){On(A,L,m,k,y,S,C,j,O);return}}B&8?(D&16&&Be(A,y,S),L!==A&&c(m,L)):D&16?B&16?ct(A,L,m,k,y,S,C,j,O):Be(A,y,S,!0):(D&8&&c(m,""),B&16&&H(L,m,k,y,S,C,j,O))},On=(d,p,m,k,y,S,C,j,O)=>{d=d||gn,p=p||gn;const A=d.length,D=p.length,L=Math.min(A,D);let U;for(U=0;U<L;U++){const B=p[U]=O?At(p[U]):st(p[U]);b(d[U],B,m,null,y,S,C,j,O)}A>D?Be(d,y,S,!0,!1,L):H(p,m,k,y,S,C,j,O,L)},ct=(d,p,m,k,y,S,C,j,O)=>{let A=0;const D=p.length;let L=d.length-1,U=D-1;for(;A<=L&&A<=U;){const B=d[A],J=p[A]=O?At(p[A]):st(p[A]);if(Cn(B,J))b(B,J,m,null,y,S,C,j,O);else break;A++}for(;A<=L&&A<=U;){const B=d[L],J=p[U]=O?At(p[U]):st(p[U]);if(Cn(B,J))b(B,J,m,null,y,S,C,j,O);else break;L--,U--}if(A>L){if(A<=U){const B=U+1,J=B<D?p[B].el:k;for(;A<=U;)b(null,p[A]=O?At(p[A]):st(p[A]),m,J,y,S,C,j,O),A++}}else if(A>U)for(;A<=L;)Fe(d[A],y,S,!0),A++;else{const B=A,J=A,oe=new Map;for(A=J;A<=U;A++){const Le=p[A]=O?At(p[A]):st(p[A]);Le.key!=null&&oe.set(Le.key,A)}let Z,$e=0;const be=U-J+1;let Ke=!1,Re=0;const jn=new Array(be);for(A=0;A<be;A++)jn[A]=0;for(A=B;A<=L;A++){const Le=d[A];if($e>=be){Fe(Le,y,S,!0);continue}let Ze;if(Le.key!=null)Ze=oe.get(Le.key);else for(Z=J;Z<=U;Z++)if(jn[Z-J]===0&&Cn(Le,p[Z])){Ze=Z;break}Ze===void 0?Fe(Le,y,S,!0):(jn[Ze-J]=A+1,Ze>=Re?Re=Ze:Ke=!0,b(Le,p[Ze],m,null,y,S,C,j,O),$e++)}const Ti=Ke?Su(jn):gn;for(Z=Ti.length-1,A=be-1;A>=0;A--){const Le=J+A,Ze=p[Le],xi=Le+1<D?p[Le+1].el:k;jn[A]===0?b(null,Ze,m,xi,y,S,C,j,O):Ke&&(Z<0||A!==Ti[Z]?ut(Ze,m,xi,2):Z--)}}},ut=(d,p,m,k,y=null)=>{const{el:S,type:C,transition:j,children:O,shapeFlag:A}=d;if(A&6){ut(d.component.subTree,p,m,k);return}if(A&128){d.suspense.move(p,m,k);return}if(A&64){C.move(d,p,m,I);return}if(C===rt){r(S,p,m);for(let D=0;D<O.length;D++)ut(O[D],p,m,k);r(d.anchor,p,m);return}if(C===Er){E(d,p,m);return}if(k!==2&&A&1&&j)if(k===0)j.beforeEnter(S),r(S,p,m),Ue(()=>j.enter(S),y);else{const{leave:D,delayLeave:L,afterLeave:U}=j,B=()=>r(S,p,m),J=()=>{D(S,()=>{B(),U&&U()})};L?L(S,B,J):J()}else r(S,p,m)},Fe=(d,p,m,k=!1,y=!1)=>{const{type:S,props:C,ref:j,children:O,dynamicChildren:A,shapeFlag:D,patchFlag:L,dirs:U,cacheIndex:B}=d;if(L===-2&&(y=!1),j!=null&&Rr(j,null,m,d,!0),B!=null&&(p.renderCache[B]=void 0),D&256){p.ctx.deactivate(d);return}const J=D&1&&U,oe=!zn(d);let Z;if(oe&&(Z=C&&C.onVnodeBeforeUnmount)&&et(Z,p,d),D&6)cr(d.component,m,k);else{if(D&128){d.suspense.unmount(m,k);return}J&&Ft(d,null,p,"beforeUnmount"),D&64?d.type.remove(d,p,m,I,k):A&&!A.hasOnce&&(S!==rt||L>0&&L&64)?Be(A,p,m,!1,!0):(S===rt&&L&384||!y&&D&16)&&Be(O,p,m),k&&en(d)}(oe&&(Z=C&&C.onVnodeUnmounted)||J)&&Ue(()=>{Z&&et(Z,p,d),J&&Ft(d,null,p,"unmounted")},m)},en=d=>{const{type:p,el:m,anchor:k,transition:y}=d;if(p===rt){tn(m,k);return}if(p===Er){T(d);return}const S=()=>{s(m),y&&!y.persisted&&y.afterLeave&&y.afterLeave()};if(d.shapeFlag&1&&y&&!y.persisted){const{leave:C,delayLeave:j}=y,O=()=>C(m,S);j?j(d.el,S,O):O()}else S()},tn=(d,p)=>{let m;for(;d!==p;)m=f(d),s(d),d=m;s(p)},cr=(d,p,m)=>{const{bum:k,scope:y,job:S,subTree:C,um:j,m:O,a:A}=d;Bi(O),Bi(A),k&&wr(k),y.stop(),S&&(S.flags|=8,Fe(C,d,p,m)),j&&Ue(j,p),Ue(()=>{d.isUnmounted=!0},p),p&&p.pendingBranch&&!p.isUnmounted&&d.asyncDep&&!d.asyncResolved&&d.suspenseId===p.pendingId&&(p.deps--,p.deps===0&&p.resolve())},Be=(d,p,m,k=!1,y=!1,S=0)=>{for(let C=S;C<d.length;C++)Fe(d[C],p,m,k,y)},_=d=>{if(d.shapeFlag&6)return _(d.component.subTree);if(d.shapeFlag&128)return d.suspense.next();const p=f(d.anchor||d.el),m=p&&p[Hc];return m?f(m):p};let R=!1;const P=(d,p,m)=>{d==null?p._vnode&&Fe(p._vnode,null,null,!0):b(p._vnode||null,d,p,null,null,null,m),p._vnode=d,R||(R=!0,Ri(),Ua(),R=!1)},I={p:b,um:Fe,m:ut,r:en,mt:Mt,mc:H,pc:Ce,pbc:Se,n:_,o:e};let Y,ie;return{render:P,hydrate:Y,createApp:fu(P,Y)}}function us({type:e,props:t},n){return n==="svg"&&e==="foreignObject"||n==="mathml"&&e==="annotation-xml"&&t&&t.encoding&&t.encoding.includes("html")?void 0:n}function Bt({effect:e,job:t},n){n?(e.flags|=32,t.flags|=4):(e.flags&=-33,t.flags&=-5)}function Eu(e,t){return(!e||e&&!e.pendingBranch)&&t&&!t.persisted}function tl(e,t,n=!1){const r=e.children,s=t.children;if(M(r)&&M(s))for(let i=0;i<r.length;i++){const o=r[i];let a=s[i];a.shapeFlag&1&&!a.dynamicChildren&&((a.patchFlag<=0||a.patchFlag===32)&&(a=s[i]=At(s[i]),a.el=o.el),!n&&a.patchFlag!==-2&&tl(o,a)),a.type===Gr&&(a.el=o.el)}}function Su(e){const t=e.slice(),n=[0];let r,s,i,o,a;const l=e.length;for(r=0;r<l;r++){const u=e[r];if(u!==0){if(s=n[n.length-1],e[s]<u){t[r]=s,n.push(r);continue}for(i=0,o=n.length-1;i<o;)a=i+o>>1,e[n[a]]<u?i=a+1:o=a;u<e[n[i]]&&(i>0&&(t[r]=n[i-1]),n[i]=r)}}for(i=n.length,o=n[i-1];i-- >0;)n[i]=o,o=t[o];return n}function nl(e){const t=e.subTree.component;if(t)return t.asyncDep&&!t.asyncResolved?t:nl(t)}function Bi(e){if(e)for(let t=0;t<e.length;t++)e[t].flags|=8}const Au=Symbol.for("v-scx"),Tu=()=>Ve(Au);function $t(e,t,n){return rl(e,t,n)}function rl(e,t,n=ee){const{immediate:r,deep:s,flush:i,once:o}=n,a=ve({},n),l=t&&r||!t&&i!=="post";let u;if(er){if(i==="sync"){const g=Tu();u=g.__watcherHandles||(g.__watcherHandles=[])}else if(!l){const g=()=>{};return g.stop=it,g.resume=it,g.pause=it,g}}const c=_e;a.call=(g,v,b)=>at(g,c,v,b);let h=!1;i==="post"?a.scheduler=g=>{Ue(g,c&&c.suspense)}:i!=="sync"&&(h=!0,a.scheduler=(g,v)=>{v?g():ui(g)}),a.augmentJob=g=>{t&&(g.flags|=4),h&&(g.flags|=2,c&&(g.id=c.uid,g.i=c))};const f=Bc(e,t,a);return er&&(u?u.push(f):l&&f()),f}function xu(e,t,n){const r=this.proxy,s=he(e)?e.includes(".")?sl(r,e):()=>r[e]:e.bind(r,r);let i;z(t)?i=t:(i=t.handler,n=t);const o=ar(this),a=rl(s,i.bind(r),n);return o(),a}function sl(e,t){const n=t.split(".");return()=>{let r=e;for(let s=0;s<n.length&&r;s++)r=r[n[s]];return r}}const Ou=(e,t)=>t==="modelValue"||t==="model-value"?e.modelModifiers:e[`${t}Modifiers`]||e[`${We(t)}Modifiers`]||e[`${Ut(t)}Modifiers`];function ju(e,t,...n){if(e.isUnmounted)return;const r=e.vnode.props||ee;let s=n;const i=t.startsWith("update:"),o=i&&Ou(r,t.slice(7));o&&(o.trim&&(s=n.map(c=>he(c)?c.trim():c)),o.number&&(s=n.map(Or)));let a,l=r[a=ss(t)]||r[a=ss(We(t))];!l&&i&&(l=r[a=ss(Ut(t))]),l&&at(l,e,6,s);const u=r[a+"Once"];if(u){if(!e.emitted)e.emitted={};else if(e.emitted[a])return;e.emitted[a]=!0,at(u,e,6,s)}}function il(e,t,n=!1){const r=t.emitsCache,s=r.get(e);if(s!==void 0)return s;const i=e.emits;let o={},a=!1;if(!z(e)){const l=u=>{const c=il(u,t,!0);c&&(a=!0,ve(o,c))};!n&&t.mixins.length&&t.mixins.forEach(l),e.extends&&l(e.extends),e.mixins&&e.mixins.forEach(l)}return!i&&!a?(re(e)&&r.set(e,null),null):(M(i)?i.forEach(l=>o[l]=null):ve(o,i),re(e)&&r.set(e,o),o)}function Kr(e,t){return!e||!Mr(t)?!1:(t=t.slice(2).replace(/Once$/,""),X(e,t[0].toLowerCase()+t.slice(1))||X(e,Ut(t))||X(e,t))}function hs(e){const{type:t,vnode:n,proxy:r,withProxy:s,propsOptions:[i],slots:o,attrs:a,emit:l,render:u,renderCache:c,props:h,data:f,setupState:g,ctx:v,inheritAttrs:b}=e,x=$r(e);let $,w;try{if(n.shapeFlag&4){const T=s||r,N=T;$=st(u.call(N,T,c,h,g,f,v)),w=a}else{const T=t;$=st(T.length>1?T(h,{attrs:a,slots:o,emit:l}):T(h,null)),w=t.props?a:Pu(a)}}catch(T){Vn.length=0,Vr(T,e,1),$=fe(Xt)}let E=$;if(w&&b!==!1){const T=Object.keys(w),{shapeFlag:N}=E;T.length&&N&7&&(i&&T.some(Xs)&&(w=Cu(w,i)),E=wn(E,w,!1,!0))}return n.dirs&&(E=wn(E,null,!1,!0),E.dirs=E.dirs?E.dirs.concat(n.dirs):n.dirs),n.transition&&hi(E,n.transition),$=E,$r(x),$}const Pu=e=>{let t;for(const n in e)(n==="class"||n==="style"||Mr(n))&&((t||(t={}))[n]=e[n]);return t},Cu=(e,t)=>{const n={};for(const r in e)(!Xs(r)||!(r.slice(9)in t))&&(n[r]=e[r]);return n};function $u(e,t,n){const{props:r,children:s,component:i}=e,{props:o,children:a,patchFlag:l}=t,u=i.emitsOptions;if(t.dirs||t.transition)return!0;if(n&&l>=0){if(l&1024)return!0;if(l&16)return r?zi(r,o,u):!!o;if(l&8){const c=t.dynamicProps;for(let h=0;h<c.length;h++){const f=c[h];if(o[f]!==r[f]&&!Kr(u,f))return!0}}}else return(s||a)&&(!a||!a.$stable)?!0:r===o?!1:r?o?zi(r,o,u):!0:!!o;return!1}function zi(e,t,n){const r=Object.keys(t);if(r.length!==Object.keys(e).length)return!0;for(let s=0;s<r.length;s++){const i=r[s];if(t[i]!==e[i]&&!Kr(n,i))return!0}return!1}function Ru({vnode:e,parent:t},n){for(;t;){const r=t.subTree;if(r.suspense&&r.suspense.activeBranch===e&&(r.el=e.el),r===e)(e=t.vnode).el=n,t=t.parent;else break}}const ol=e=>e.__isSuspense;function Lu(e,t){t&&t.pendingBranch?M(e)?t.effects.push(...e):t.effects.push(e):Vc(e)}const rt=Symbol.for("v-fgt"),Gr=Symbol.for("v-txt"),Xt=Symbol.for("v-cmt"),Er=Symbol.for("v-stc"),Vn=[];let Ne=null;function ze(e=!1){Vn.push(Ne=e?null:[])}function Iu(){Vn.pop(),Ne=Vn[Vn.length-1]||null}let Zn=1;function qi(e,t=!1){Zn+=e,e<0&&Ne&&t&&(Ne.hasOnce=!0)}function al(e){return e.dynamicChildren=Zn>0?Ne||gn:null,Iu(),Zn>0&&Ne&&Ne.push(e),e}function Rt(e,t,n,r,s,i){return al(lt(e,t,n,r,s,i,!0))}function Sr(e,t,n,r,s){return al(fe(e,t,n,r,s,!0))}function Ir(e){return e?e.__v_isVNode===!0:!1}function Cn(e,t){return e.type===t.type&&e.key===t.key}const ll=({key:e})=>e??null,Ar=({ref:e,ref_key:t,ref_for:n})=>(typeof e=="number"&&(e=""+e),e!=null?he(e)||ue(e)||z(e)?{i:Pe,r:e,k:t,f:!!n}:e:null);function lt(e,t=null,n=null,r=0,s=null,i=e===rt?0:1,o=!1,a=!1){const l={__v_isVNode:!0,__v_skip:!0,type:e,props:t,key:t&&ll(t),ref:t&&Ar(t),scopeId:Na,slotScopeIds:null,children:n,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetStart:null,targetAnchor:null,staticCount:0,shapeFlag:i,patchFlag:r,dynamicProps:s,dynamicChildren:null,appContext:null,ctx:Pe};return a?(mi(l,n),i&128&&e.normalize(l)):n&&(l.shapeFlag|=he(n)?8:16),Zn>0&&!o&&Ne&&(l.patchFlag>0||i&6)&&l.patchFlag!==32&&Ne.push(l),l}const fe=Uu;function Uu(e,t=null,n=null,r=0,s=null,i=!1){if((!e||e===qa)&&(e=Xt),Ir(e)){const a=wn(e,t,!0);return n&&mi(a,n),Zn>0&&!i&&Ne&&(a.shapeFlag&6?Ne[Ne.indexOf(e)]=a:Ne.push(a)),a.patchFlag=-2,a}if(Gu(e)&&(e=e.__vccOpts),t){t=Du(t);let{class:a,style:l}=t;a&&!he(a)&&(t.class=ti(a)),re(l)&&(ci(l)&&!M(l)&&(l=ve({},l)),t.style=ei(l))}const o=he(e)?1:ol(e)?128:Wc(e)?64:re(e)?4:z(e)?2:0;return lt(e,t,n,r,s,o,i,!0)}function Du(e){return e?ci(e)||Ka(e)?ve({},e):e:null}function wn(e,t,n=!1,r=!1){const{props:s,ref:i,patchFlag:o,children:a,transition:l}=e,u=t?Fu(s||{},t):s,c={__v_isVNode:!0,__v_skip:!0,type:e.type,props:u,key:u&&ll(u),ref:t&&t.ref?n&&i?M(i)?i.concat(Ar(t)):[i,Ar(t)]:Ar(t):i,scopeId:e.scopeId,slotScopeIds:e.slotScopeIds,children:a,target:e.target,targetStart:e.targetStart,targetAnchor:e.targetAnchor,staticCount:e.staticCount,shapeFlag:e.shapeFlag,patchFlag:t&&e.type!==rt?o===-1?16:o|16:o,dynamicProps:e.dynamicProps,dynamicChildren:e.dynamicChildren,appContext:e.appContext,dirs:e.dirs,transition:l,component:e.component,suspense:e.suspense,ssContent:e.ssContent&&wn(e.ssContent),ssFallback:e.ssFallback&&wn(e.ssFallback),el:e.el,anchor:e.anchor,ctx:e.ctx,ce:e.ce};return l&&r&&hi(c,l.clone(c)),c}function Tr(e=" ",t=0){return fe(Gr,null,e,t)}function Nu(e,t){const n=fe(Er,null,e);return n.staticCount=t,n}function Mu(e="",t=!1){return t?(ze(),Sr(Xt,null,e)):fe(Xt,null,e)}function st(e){return e==null||typeof e=="boolean"?fe(Xt):M(e)?fe(rt,null,e.slice()):Ir(e)?At(e):fe(Gr,null,String(e))}function At(e){return e.el===null&&e.patchFlag!==-1||e.memo?e:wn(e)}function mi(e,t){let n=0;const{shapeFlag:r}=e;if(t==null)t=null;else if(M(t))n=16;else if(typeof t=="object")if(r&65){const s=t.default;s&&(s._c&&(s._d=!1),mi(e,s()),s._c&&(s._d=!0));return}else{n=32;const s=t._;!s&&!Ka(t)?t._ctx=Pe:s===3&&Pe&&(Pe.slots._===1?t._=1:(t._=2,e.patchFlag|=1024))}else z(t)?(t={default:t,_ctx:Pe},n=32):(t=String(t),r&64?(n=16,t=[Tr(t)]):n=8);e.children=t,e.shapeFlag|=n}function Fu(...e){const t={};for(let n=0;n<e.length;n++){const r=e[n];for(const s in r)if(s==="class")t.class!==r.class&&(t.class=ti([t.class,r.class]));else if(s==="style")t.style=ei([t.style,r.style]);else if(Mr(s)){const i=t[s],o=r[s];o&&i!==o&&!(M(i)&&i.includes(o))&&(t[s]=i?[].concat(i,o):o)}else s!==""&&(t[s]=r[s])}return t}function et(e,t,n,r=null){at(e,t,7,[n,r])}const Bu=Ha();let zu=0;function qu(e,t,n){const r=e.type,s=(t?t.appContext:e.appContext)||Bu,i={uid:zu++,vnode:e,type:r,parent:t,appContext:s,root:null,next:null,subTree:null,effect:null,update:null,job:null,scope:new fa(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:t?t.provides:Object.create(s.provides),ids:t?t.ids:["",0,0],accessCache:null,renderCache:[],components:null,directives:null,propsOptions:Qa(r,s),emitsOptions:il(r,s),emit:null,emitted:null,propsDefaults:ee,inheritAttrs:r.inheritAttrs,ctx:ee,data:ee,props:ee,attrs:ee,slots:ee,refs:ee,setupState:ee,setupContext:null,suspense:n,suspenseId:n?n.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return i.ctx={_:i},i.root=t?t.root:i,i.emit=ju.bind(null,i),e.ce&&e.ce(i),i}let _e=null,Ur,Rs;{const e=zr(),t=(n,r)=>{let s;return(s=e[n])||(s=e[n]=[]),s.push(r),i=>{s.length>1?s.forEach(o=>o(i)):s[0](i)}};Ur=t("__VUE_INSTANCE_SETTERS__",n=>_e=n),Rs=t("__VUE_SSR_SETTERS__",n=>er=n)}const ar=e=>{const t=_e;return Ur(e),e.scope.on(),()=>{e.scope.off(),Ur(t)}},Vi=()=>{_e&&_e.scope.off(),Ur(null)};function cl(e){return e.vnode.shapeFlag&4}let er=!1;function Vu(e,t=!1,n=!1){t&&Rs(t);const{props:r,children:s}=e.vnode,i=cl(e);gu(e,r,i,t),_u(e,s,n);const o=i?Hu(e,t):void 0;return t&&Rs(!1),o}function Hu(e,t){const n=e.type;e.accessCache=Object.create(null),e.proxy=new Proxy(e.ctx,ou);const{setup:r}=n;if(r){Dt();const s=e.setupContext=r.length>1?Ju(e):null,i=ar(e),o=ir(r,e,0,[e.props,s]),a=ia(o);if(Nt(),i(),(a||e.sp)&&!zn(e)&&Ma(e),a){if(o.then(Vi,Vi),t)return o.then(l=>{Hi(e,l,t)}).catch(l=>{Vr(l,e,0)});e.asyncDep=o}else Hi(e,o,t)}else ul(e,t)}function Hi(e,t,n){z(t)?e.type.__ssrInlineRender?e.ssrRender=t:e.render=t:re(t)&&(e.setupState=Ra(t)),ul(e,n)}let Wi;function ul(e,t,n){const r=e.type;if(!e.render){if(!t&&Wi&&!r.render){const s=r.template||pi(e).template;if(s){const{isCustomElement:i,compilerOptions:o}=e.appContext.config,{delimiters:a,compilerOptions:l}=r,u=ve(ve({isCustomElement:i,delimiters:a},o),l);r.render=Wi(s,u)}}e.render=r.render||it}{const s=ar(e);Dt();try{au(e)}finally{Nt(),s()}}}const Wu={get(e,t){return we(e,"get",""),e[t]}};function Ju(e){const t=n=>{e.exposed=n||{}};return{attrs:new Proxy(e.attrs,Wu),slots:e.slots,emit:e.emit,expose:t}}function Qr(e){return e.exposed?e.exposeProxy||(e.exposeProxy=new Proxy(Ra(vn(e.exposed)),{get(t,n){if(n in t)return t[n];if(n in qn)return qn[n](e)},has(t,n){return n in t||n in qn}})):e.proxy}function Ku(e,t=!0){return z(e)?e.displayName||e.name:e.name||t&&e.__name}function Gu(e){return z(e)&&"__vccOpts"in e}const Ee=(e,t)=>Mc(e,t,er);function hl(e,t,n){const r=arguments.length;return r===2?re(t)&&!M(t)?Ir(t)?fe(e,null,[t]):fe(e,t):fe(e,null,t):(r>3?n=Array.prototype.slice.call(arguments,2):r===3&&Ir(n)&&(n=[n]),fe(e,t,n))}const Qu="3.5.13";/**
* @vue/runtime-dom v3.5.13
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let Ls;const Ji=typeof window<"u"&&window.trustedTypes;if(Ji)try{Ls=Ji.createPolicy("vue",{createHTML:e=>e})}catch{}const dl=Ls?e=>Ls.createHTML(e):e=>e,Xu="http://www.w3.org/2000/svg",Yu="http://www.w3.org/1998/Math/MathML",ft=typeof document<"u"?document:null,Ki=ft&&ft.createElement("template"),Zu={insert:(e,t,n)=>{t.insertBefore(e,n||null)},remove:e=>{const t=e.parentNode;t&&t.removeChild(e)},createElement:(e,t,n,r)=>{const s=t==="svg"?ft.createElementNS(Xu,e):t==="mathml"?ft.createElementNS(Yu,e):n?ft.createElement(e,{is:n}):ft.createElement(e);return e==="select"&&r&&r.multiple!=null&&s.setAttribute("multiple",r.multiple),s},createText:e=>ft.createTextNode(e),createComment:e=>ft.createComment(e),setText:(e,t)=>{e.nodeValue=t},setElementText:(e,t)=>{e.textContent=t},parentNode:e=>e.parentNode,nextSibling:e=>e.nextSibling,querySelector:e=>ft.querySelector(e),setScopeId(e,t){e.setAttribute(t,"")},insertStaticContent(e,t,n,r,s,i){const o=n?n.previousSibling:t.lastChild;if(s&&(s===i||s.nextSibling))for(;t.insertBefore(s.cloneNode(!0),n),!(s===i||!(s=s.nextSibling)););else{Ki.innerHTML=dl(r==="svg"?`<svg>${e}</svg>`:r==="mathml"?`<math>${e}</math>`:e);const a=Ki.content;if(r==="svg"||r==="mathml"){const l=a.firstChild;for(;l.firstChild;)a.appendChild(l.firstChild);a.removeChild(l)}t.insertBefore(a,n)}return[o?o.nextSibling:t.firstChild,n?n.previousSibling:t.lastChild]}},eh=Symbol("_vtc");function th(e,t,n){const r=e[eh];r&&(t=(t?[t,...r]:[...r]).join(" ")),t==null?e.removeAttribute("class"):n?e.setAttribute("class",t):e.className=t}const Dr=Symbol("_vod"),fl=Symbol("_vsh"),Fg={beforeMount(e,{value:t},{transition:n}){e[Dr]=e.style.display==="none"?"":e.style.display,n&&t?n.beforeEnter(e):$n(e,t)},mounted(e,{value:t},{transition:n}){n&&t&&n.enter(e)},updated(e,{value:t,oldValue:n},{transition:r}){!t!=!n&&(r?t?(r.beforeEnter(e),$n(e,!0),r.enter(e)):r.leave(e,()=>{$n(e,!1)}):$n(e,t))},beforeUnmount(e,{value:t}){$n(e,t)}};function $n(e,t){e.style.display=t?e[Dr]:"none",e[fl]=!t}const nh=Symbol(""),rh=/(^|;)\s*display\s*:/;function sh(e,t,n){const r=e.style,s=he(n);let i=!1;if(n&&!s){if(t)if(he(t))for(const o of t.split(";")){const a=o.slice(0,o.indexOf(":")).trim();n[a]==null&&xr(r,a,"")}else for(const o in t)n[o]==null&&xr(r,o,"");for(const o in n)o==="display"&&(i=!0),xr(r,o,n[o])}else if(s){if(t!==n){const o=r[nh];o&&(n+=";"+o),r.cssText=n,i=rh.test(n)}}else t&&e.removeAttribute("style");Dr in e&&(e[Dr]=i?r.display:"",e[fl]&&(r.display="none"))}const Gi=/\s*!important$/;function xr(e,t,n){if(M(n))n.forEach(r=>xr(e,t,r));else if(n==null&&(n=""),t.startsWith("--"))e.setProperty(t,n);else{const r=ih(e,t);Gi.test(n)?e.setProperty(Ut(r),n.replace(Gi,""),"important"):e[r]=n}}const Qi=["Webkit","Moz","ms"],ds={};function ih(e,t){const n=ds[t];if(n)return n;let r=We(t);if(r!=="filter"&&r in e)return ds[t]=r;r=Br(r);for(let s=0;s<Qi.length;s++){const i=Qi[s]+r;if(i in e)return ds[t]=i}return t}const Xi="http://www.w3.org/1999/xlink";function Yi(e,t,n,r,s,i=uc(t)){r&&t.startsWith("xlink:")?n==null?e.removeAttributeNS(Xi,t.slice(6,t.length)):e.setAttributeNS(Xi,t,n):n==null||i&&!ca(n)?e.removeAttribute(t):e.setAttribute(t,i?"":ot(n)?String(n):n)}function Zi(e,t,n,r,s){if(t==="innerHTML"||t==="textContent"){n!=null&&(e[t]=t==="innerHTML"?dl(n):n);return}const i=e.tagName;if(t==="value"&&i!=="PROGRESS"&&!i.includes("-")){const a=i==="OPTION"?e.getAttribute("value")||"":e.value,l=n==null?e.type==="checkbox"?"on":"":String(n);(a!==l||!("_value"in e))&&(e.value=l),n==null&&e.removeAttribute(t),e._value=n;return}let o=!1;if(n===""||n==null){const a=typeof e[t];a==="boolean"?n=ca(n):n==null&&a==="string"?(n="",o=!0):a==="number"&&(n=0,o=!0)}try{e[t]=n}catch{}o&&e.removeAttribute(s||t)}function vt(e,t,n,r){e.addEventListener(t,n,r)}function oh(e,t,n,r){e.removeEventListener(t,n,r)}const eo=Symbol("_vei");function ah(e,t,n,r,s=null){const i=e[eo]||(e[eo]={}),o=i[t];if(r&&o)o.value=r;else{const[a,l]=lh(t);if(r){const u=i[t]=hh(r,s);vt(e,a,u,l)}else o&&(oh(e,a,o,l),i[t]=void 0)}}const to=/(?:Once|Passive|Capture)$/;function lh(e){let t;if(to.test(e)){t={};let n;for(;n=e.match(to);)e=e.slice(0,e.length-n[0].length),t[n[0].toLowerCase()]=!0}return[e[2]===":"?e.slice(3):Ut(e.slice(2)),t]}let fs=0;const ch=Promise.resolve(),uh=()=>fs||(ch.then(()=>fs=0),fs=Date.now());function hh(e,t){const n=r=>{if(!r._vts)r._vts=Date.now();else if(r._vts<=n.attached)return;at(dh(r,n.value),t,5,[r])};return n.value=e,n.attached=uh(),n}function dh(e,t){if(M(t)){const n=e.stopImmediatePropagation;return e.stopImmediatePropagation=()=>{n.call(e),e._stopped=!0},t.map(r=>s=>!s._stopped&&r&&r(s))}else return t}const no=e=>e.charCodeAt(0)===111&&e.charCodeAt(1)===110&&e.charCodeAt(2)>96&&e.charCodeAt(2)<123,fh=(e,t,n,r,s,i)=>{const o=s==="svg";t==="class"?th(e,r,o):t==="style"?sh(e,n,r):Mr(t)?Xs(t)||ah(e,t,n,r,i):(t[0]==="."?(t=t.slice(1),!0):t[0]==="^"?(t=t.slice(1),!1):ph(e,t,r,o))?(Zi(e,t,r),!e.tagName.includes("-")&&(t==="value"||t==="checked"||t==="selected")&&Yi(e,t,r,o,i,t!=="value")):e._isVueCE&&(/[A-Z]/.test(t)||!he(r))?Zi(e,We(t),r,i,t):(t==="true-value"?e._trueValue=r:t==="false-value"&&(e._falseValue=r),Yi(e,t,r,o))};function ph(e,t,n,r){if(r)return!!(t==="innerHTML"||t==="textContent"||t in e&&no(t)&&z(n));if(t==="spellcheck"||t==="draggable"||t==="translate"||t==="form"||t==="list"&&e.tagName==="INPUT"||t==="type"&&e.tagName==="TEXTAREA")return!1;if(t==="width"||t==="height"){const s=e.tagName;if(s==="IMG"||s==="VIDEO"||s==="CANVAS"||s==="SOURCE")return!1}return no(t)&&he(n)?!1:t in e}const Lt=e=>{const t=e.props["onUpdate:modelValue"]||!1;return M(t)?n=>wr(t,n):t};function gh(e){e.target.composing=!0}function ro(e){const t=e.target;t.composing&&(t.composing=!1,t.dispatchEvent(new Event("input")))}const He=Symbol("_assign"),so={created(e,{modifiers:{lazy:t,trim:n,number:r}},s){e[He]=Lt(s);const i=r||s.props&&s.props.type==="number";vt(e,t?"change":"input",o=>{if(o.target.composing)return;let a=e.value;n&&(a=a.trim()),i&&(a=Or(a)),e[He](a)}),n&&vt(e,"change",()=>{e.value=e.value.trim()}),t||(vt(e,"compositionstart",gh),vt(e,"compositionend",ro),vt(e,"change",ro))},mounted(e,{value:t}){e.value=t??""},beforeUpdate(e,{value:t,oldValue:n,modifiers:{lazy:r,trim:s,number:i}},o){if(e[He]=Lt(o),e.composing)return;const a=(i||e.type==="number")&&!/^0\d/.test(e.value)?Or(e.value):e.value,l=t??"";a!==l&&(document.activeElement===e&&e.type!=="range"&&(r&&t===n||s&&e.value.trim()===l)||(e.value=l))}},mh={deep:!0,created(e,t,n){e[He]=Lt(n),vt(e,"change",()=>{const r=e._modelValue,s=kn(e),i=e.checked,o=e[He];if(M(r)){const a=ni(r,s),l=a!==-1;if(i&&!l)o(r.concat(s));else if(!i&&l){const u=[...r];u.splice(a,1),o(u)}}else if(Tn(r)){const a=new Set(r);i?a.add(s):a.delete(s),o(a)}else o(pl(e,i))})},mounted:io,beforeUpdate(e,t,n){e[He]=Lt(n),io(e,t,n)}};function io(e,{value:t,oldValue:n},r){e._modelValue=t;let s;if(M(t))s=ni(t,r.props.value)>-1;else if(Tn(t))s=t.has(r.props.value);else{if(t===n)return;s=Gt(t,pl(e,!0))}e.checked!==s&&(e.checked=s)}const vh={created(e,{value:t},n){e.checked=Gt(t,n.props.value),e[He]=Lt(n),vt(e,"change",()=>{e[He](kn(e))})},beforeUpdate(e,{value:t,oldValue:n},r){e[He]=Lt(r),t!==n&&(e.checked=Gt(t,r.props.value))}},yh={deep:!0,created(e,{value:t,modifiers:{number:n}},r){const s=Tn(t);vt(e,"change",()=>{const i=Array.prototype.filter.call(e.options,o=>o.selected).map(o=>n?Or(kn(o)):kn(o));e[He](e.multiple?s?new Set(i):i:i[0]),e._assigning=!0,jt(()=>{e._assigning=!1})}),e[He]=Lt(r)},mounted(e,{value:t}){oo(e,t)},beforeUpdate(e,t,n){e[He]=Lt(n)},updated(e,{value:t}){e._assigning||oo(e,t)}};function oo(e,t){const n=e.multiple,r=M(t);if(!(n&&!r&&!Tn(t))){for(let s=0,i=e.options.length;s<i;s++){const o=e.options[s],a=kn(o);if(n)if(r){const l=typeof a;l==="string"||l==="number"?o.selected=t.some(u=>String(u)===String(a)):o.selected=ni(t,a)>-1}else o.selected=t.has(a);else if(Gt(kn(o),t)){e.selectedIndex!==s&&(e.selectedIndex=s);return}}!n&&e.selectedIndex!==-1&&(e.selectedIndex=-1)}}function kn(e){return"_value"in e?e._value:e.value}function pl(e,t){const n=t?"_trueValue":"_falseValue";return n in e?e[n]:t}const Bg={created(e,t,n){fr(e,t,n,null,"created")},mounted(e,t,n){fr(e,t,n,null,"mounted")},beforeUpdate(e,t,n,r){fr(e,t,n,r,"beforeUpdate")},updated(e,t,n,r){fr(e,t,n,r,"updated")}};function _h(e,t){switch(e){case"SELECT":return yh;case"TEXTAREA":return so;default:switch(t){case"checkbox":return mh;case"radio":return vh;default:return so}}}function fr(e,t,n,r,s){const i=_h(e.tagName,n.props&&n.props.type)[s];i&&i(e,t,n,r)}const bh={esc:"escape",space:" ",up:"arrow-up",left:"arrow-left",right:"arrow-right",down:"arrow-down",delete:"backspace"},zg=(e,t)=>{const n=e._withKeys||(e._withKeys={}),r=t.join(".");return n[r]||(n[r]=s=>{if(!("key"in s))return;const i=Ut(s.key);if(t.some(o=>o===i||bh[o]===i))return e(s)})},wh=ve({patchProp:fh},Zu);let ao;function kh(){return ao||(ao=wu(wh))}const Eh=(...e)=>{const t=kh().createApp(...e),{mount:n}=t;return t.mount=r=>{const s=Ah(r);if(!s)return;const i=t._component;!z(i)&&!i.render&&!i.template&&(i.template=s.innerHTML),s.nodeType===1&&(s.textContent="");const o=n(s,!1,Sh(s));return s instanceof Element&&(s.removeAttribute("v-cloak"),s.setAttribute("data-v-app","")),o},t};function Sh(e){if(e instanceof SVGElement)return"svg";if(typeof MathMLElement=="function"&&e instanceof MathMLElement)return"mathml"}function Ah(e){return he(e)?document.querySelector(e):e}var Th=!1;/*!
* pinia v2.3.0
* (c) 2024 Eduardo San Martin Morote
* @license MIT
*/let gl;const Xr=e=>gl=e,ml=Symbol();function Is(e){return e&&typeof e=="object"&&Object.prototype.toString.call(e)==="[object Object]"&&typeof e.toJSON!="function"}var Hn;(function(e){e.direct="direct",e.patchObject="patch object",e.patchFunction="patch function"})(Hn||(Hn={}));function xh(){const e=pa(!0),t=e.run(()=>de({}));let n=[],r=[];const s=vn({install(i){Xr(s),s._a=i,i.provide(ml,s),i.config.globalProperties.$pinia=s,r.forEach(o=>n.push(o)),r=[]},use(i){return!this._a&&!Th?r.push(i):n.push(i),this},_p:n,_a:null,_e:e,_s:new Map,state:t});return s}const vl=()=>{};function lo(e,t,n,r=vl){e.push(t);const s=()=>{const i=e.indexOf(t);i>-1&&(e.splice(i,1),r())};return!n&&ga()&&dc(s),s}function rn(e,...t){e.slice().forEach(n=>{n(...t)})}const Oh=e=>e(),co=Symbol(),ps=Symbol();function Us(e,t){e instanceof Map&&t instanceof Map?t.forEach((n,r)=>e.set(r,n)):e instanceof Set&&t instanceof Set&&t.forEach(e.add,e);for(const n in t){if(!t.hasOwnProperty(n))continue;const r=t[n],s=e[n];Is(s)&&Is(r)&&e.hasOwnProperty(n)&&!ue(r)&&!Ct(r)?e[n]=Us(s,r):e[n]=r}return e}const jh=Symbol();function Ph(e){return!Is(e)||!e.hasOwnProperty(jh)}const{assign:wt}=Object;function Ch(e){return!!(ue(e)&&e.effect)}function $h(e,t,n,r){const{state:s,actions:i,getters:o}=t,a=n.state.value[e];let l;function u(){a||(n.state.value[e]=s?s():{});const c=Ic(n.state.value[e]);return wt(c,i,Object.keys(o||{}).reduce((h,f)=>(h[f]=vn(Ee(()=>{Xr(n);const g=n._s.get(e);return o[f].call(g,g)})),h),{}))}return l=yl(e,u,t,n,r,!0),l}function yl(e,t,n={},r,s,i){let o;const a=wt({actions:{}},n),l={deep:!0};let u,c,h=[],f=[],g;const v=r.state.value[e];!i&&!v&&(r.state.value[e]={}),de({});let b;function x(F){let H;u=c=!1,typeof F=="function"?(F(r.state.value[e]),H={type:Hn.patchFunction,storeId:e,events:g}):(Us(r.state.value[e],F),H={type:Hn.patchObject,payload:F,storeId:e,events:g});const ce=b=Symbol();jt().then(()=>{b===ce&&(u=!0)}),c=!0,rn(h,H,r.state.value[e])}const $=i?function(){const{state:F}=n,H=F?F():{};this.$patch(ce=>{wt(ce,H)})}:vl;function w(){o.stop(),h=[],f=[],r._s.delete(e)}const E=(F,H="")=>{if(co in F)return F[ps]=H,F;const ce=function(){Xr(r);const Se=Array.from(arguments),Oe=[],Je=[];function Me(V){Oe.push(V)}function Mt(V){Je.push(V)}rn(f,{args:Se,name:ce[ps],store:N,after:Me,onError:Mt});let se;try{se=F.apply(this&&this.$id===e?this:N,Se)}catch(V){throw rn(Je,V),V}return se instanceof Promise?se.then(V=>(rn(Oe,V),V)).catch(V=>(rn(Je,V),Promise.reject(V))):(rn(Oe,se),se)};return ce[co]=!0,ce[ps]=H,ce},T={_p:r,$id:e,$onAction:lo.bind(null,f),$patch:x,$reset:$,$subscribe(F,H={}){const ce=lo(h,F,H.detached,()=>Se()),Se=o.run(()=>$t(()=>r.state.value[e],Oe=>{(H.flush==="sync"?c:u)&&F({storeId:e,type:Hn.direct,events:g},Oe)},wt({},l,H)));return ce},$dispose:w},N=yt(T);r._s.set(e,N);const ae=(r._a&&r._a.runWithContext||Oh)(()=>r._e.run(()=>(o=pa()).run(()=>t({action:E}))));for(const F in ae){const H=ae[F];if(ue(H)&&!Ch(H)||Ct(H))i||(v&&Ph(H)&&(ue(H)?H.value=v[F]:Us(H,v[F])),r.state.value[e][F]=H);else if(typeof H=="function"){const ce=E(H,F);ae[F]=ce,a.actions[F]=H}}return wt(N,ae),wt(K(N),ae),Object.defineProperty(N,"$state",{get:()=>r.state.value[e],set:F=>{x(H=>{wt(H,F)})}}),r._p.forEach(F=>{wt(N,o.run(()=>F({store:N,app:r._a,pinia:r,options:a})))}),v&&i&&n.hydrate&&n.hydrate(N.$state,v),u=!0,c=!0,N}/*! #__NO_SIDE_EFFECTS__ */function Yr(e,t,n){let r,s;const i=typeof t=="function";typeof e=="string"?(r=e,s=i?n:t):(s=e,r=e.id);function o(a,l){const u=pu();return a=a||(u?Ve(ml,null):null),a&&Xr(a),a=gl,a._s.has(r)||(i?yl(r,t,s,a):$h(r,s,a)),a._s.get(r)}return o.$id=r,o}const Rh="modulepreload",Lh=function(e){return"/"+e},uo={},ge=function(e,t,n){let r=Promise.resolve();if(t&&t.length>0){document.getElementsByTagName("link");const i=document.querySelector("meta[property=csp-nonce]"),o=(i==null?void 0:i.nonce)||(i==null?void 0:i.getAttribute("nonce"));r=Promise.allSettled(t.map(a=>{if(a=Lh(a),a in uo)return;uo[a]=!0;const l=a.endsWith(".css"),u=l?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${a}"]${u}`))return;const c=document.createElement("link");if(c.rel=l?"stylesheet":Rh,l||(c.as="script"),c.crossOrigin="",c.href=a,o&&c.setAttribute("nonce",o),document.head.appendChild(c),l)return new Promise((h,f)=>{c.addEventListener("load",h),c.addEventListener("error",()=>f(new Error(`Unable to preload CSS for ${a}`)))})}))}function s(i){const o=new Event("vite:preloadError",{cancelable:!0});if(o.payload=i,window.dispatchEvent(o),!o.defaultPrevented)throw i}return r.then(i=>{for(const o of i||[])o.status==="rejected"&&s(o.reason);return e().catch(s)})},Ih=e=>{let t;return e?t=e:typeof fetch>"u"?t=(...n)=>ge(async()=>{const{default:r}=await Promise.resolve().then(()=>xn);return{default:r}},void 0).then(({default:r})=>r(...n)):t=fetch,(...n)=>t(...n)};class vi extends Error{constructor(t,n="FunctionsError",r){super(t),this.name=n,this.context=r}}class Uh extends vi{constructor(t){super("Failed to send a request to the Edge Function","FunctionsFetchError",t)}}class Dh extends vi{constructor(t){super("Relay Error invoking the Edge Function","FunctionsRelayError",t)}}class Nh extends vi{constructor(t){super("Edge Function returned a non-2xx status code","FunctionsHttpError",t)}}var Ds;(function(e){e.Any="any",e.ApNortheast1="ap-northeast-1",e.ApNortheast2="ap-northeast-2",e.ApSouth1="ap-south-1",e.ApSoutheast1="ap-southeast-1",e.ApSoutheast2="ap-southeast-2",e.CaCentral1="ca-central-1",e.EuCentral1="eu-central-1",e.EuWest1="eu-west-1",e.EuWest2="eu-west-2",e.EuWest3="eu-west-3",e.SaEast1="sa-east-1",e.UsEast1="us-east-1",e.UsWest1="us-west-1",e.UsWest2="us-west-2"})(Ds||(Ds={}));var Mh=function(e,t,n,r){function s(i){return i instanceof n?i:new n(function(o){o(i)})}return new(n||(n=Promise))(function(i,o){function a(c){try{u(r.next(c))}catch(h){o(h)}}function l(c){try{u(r.throw(c))}catch(h){o(h)}}function u(c){c.done?i(c.value):s(c.value).then(a,l)}u((r=r.apply(e,[])).next())})};class Fh{constructor(t,{headers:n={},customFetch:r,region:s=Ds.Any}={}){this.url=t,this.headers=n,this.region=s,this.fetch=Ih(r)}setAuth(t){this.headers.Authorization=`Bearer ${t}`}invoke(t,n={}){var r;return Mh(this,void 0,void 0,function*(){try{const{headers:s,method:i,body:o}=n;let a={},{region:l}=n;l||(l=this.region),l&&l!=="any"&&(a["x-region"]=l);let u;o&&(s&&!Object.prototype.hasOwnProperty.call(s,"Content-Type")||!s)&&(typeof Blob<"u"&&o instanceof Blob||o instanceof ArrayBuffer?(a["Content-Type"]="application/octet-stream",u=o):typeof o=="string"?(a["Content-Type"]="text/plain",u=o):typeof FormData<"u"&&o instanceof FormData?u=o:(a["Content-Type"]="application/json",u=JSON.stringify(o)));const c=yield this.fetch(`${this.url}/${t}`,{method:i||"POST",headers:Object.assign(Object.assign(Object.assign({},a),this.headers),s),body:u}).catch(v=>{throw new Uh(v)}),h=c.headers.get("x-relay-error");if(h&&h==="true")throw new Dh(c);if(!c.ok)throw new Nh(c);let f=((r=c.headers.get("Content-Type"))!==null&&r!==void 0?r:"text/plain").split(";")[0].trim(),g;return f==="application/json"?g=yield c.json():f==="application/octet-stream"?g=yield c.blob():f==="text/event-stream"?g=c:f==="multipart/form-data"?g=yield c.formData():g=yield c.text(),{data:g,error:null}}catch(s){return{data:null,error:s}}})}}var qg=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Bh(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function zh(e){if(e.__esModule)return e;var t=e.default;if(typeof t=="function"){var n=function r(){return this instanceof r?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};n.prototype=t.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(e).forEach(function(r){var s=Object.getOwnPropertyDescriptor(e,r);Object.defineProperty(n,r,s.get?s:{enumerable:!0,get:function(){return e[r]}})}),n}var pe={},sn={},on={},an={},ln={},cn={},qh=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")},En=qh();const Vh=En.fetch,_l=En.fetch.bind(En),bl=En.Headers,Hh=En.Request,Wh=En.Response,xn=Object.freeze(Object.defineProperty({__proto__:null,Headers:bl,Request:Hh,Response:Wh,default:_l,fetch:Vh},Symbol.toStringTag,{value:"Module"})),Jh=zh(xn);var pr={},ho;function wl(){if(ho)return pr;ho=1,Object.defineProperty(pr,"__esModule",{value:!0});class e extends Error{constructor(n){super(n.message),this.name="PostgrestError",this.details=n.details,this.hint=n.hint,this.code=n.code}}return pr.default=e,pr}var fo;function kl(){if(fo)return cn;fo=1;var e=cn&&cn.__importDefault||function(s){return s&&s.__esModule?s:{default:s}};Object.defineProperty(cn,"__esModule",{value:!0});const t=e(Jh),n=e(wl());class r{constructor(i){this.shouldThrowOnError=!1,this.method=i.method,this.url=i.url,this.headers=i.headers,this.schema=i.schema,this.body=i.body,this.shouldThrowOnError=i.shouldThrowOnError,this.signal=i.signal,this.isMaybeSingle=i.isMaybeSingle,i.fetch?this.fetch=i.fetch:typeof fetch>"u"?this.fetch=t.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(i,o){return this.headers=Object.assign({},this.headers),this.headers[i]=o,this}then(i,o){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers["Accept-Profile"]=this.schema:this.headers["Content-Profile"]=this.schema),this.method!=="GET"&&this.method!=="HEAD"&&(this.headers["Content-Type"]="application/json");const a=this.fetch;let l=a(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async u=>{var c,h,f;let g=null,v=null,b=null,x=u.status,$=u.statusText;if(u.ok){if(this.method!=="HEAD"){const T=await u.text();T===""||(this.headers.Accept==="text/csv"||this.headers.Accept&&this.headers.Accept.includes("application/vnd.pgrst.plan+text")?v=T:v=JSON.parse(T))}const w=(c=this.headers.Prefer)===null||c===void 0?void 0:c.match(/count=(exact|planned|estimated)/),E=(h=u.headers.get("content-range"))===null||h===void 0?void 0:h.split("/");w&&E&&E.length>1&&(b=parseInt(E[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(v)&&(v.length>1?(g={code:"PGRST116",details:`Results contain ${v.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},v=null,b=null,x=406,$="Not Acceptable"):v.length===1?v=v[0]:v=null)}else{const w=await u.text();try{g=JSON.parse(w),Array.isArray(g)&&u.status===404&&(v=[],g=null,x=200,$="OK")}catch{u.status===404&&w===""?(x=204,$="No Content"):g={message:w}}if(g&&this.isMaybeSingle&&!((f=g==null?void 0:g.details)===null||f===void 0)&&f.includes("0 rows")&&(g=null,x=200,$="OK"),g&&this.shouldThrowOnError)throw new n.default(g)}return{error:g,data:v,count:b,status:x,statusText:$}});return this.shouldThrowOnError||(l=l.catch(u=>{var c,h,f;return{error:{message:`${(c=u==null?void 0:u.name)!==null&&c!==void 0?c:"FetchError"}: ${u==null?void 0:u.message}`,details:`${(h=u==null?void 0:u.stack)!==null&&h!==void 0?h:""}`,hint:"",code:`${(f=u==null?void 0:u.code)!==null&&f!==void 0?f:""}`},data:null,count:null,status:0,statusText:""}})),l.then(i,o)}}return cn.default=r,cn}var po;function El(){if(po)return ln;po=1;var e=ln&&ln.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(ln,"__esModule",{value:!0});const t=e(kl());class n extends t.default{select(s){let i=!1;const o=(s??"*").split("").map(a=>/\s/.test(a)&&!i?"":(a==='"'&&(i=!i),a)).join("");return this.url.searchParams.set("select",o),this.headers.Prefer&&(this.headers.Prefer+=","),this.headers.Prefer+="return=representation",this}order(s,{ascending:i=!0,nullsFirst:o,foreignTable:a,referencedTable:l=a}={}){const u=l?`${l}.order`:"order",c=this.url.searchParams.get(u);return this.url.searchParams.set(u,`${c?`${c},`:""}${s}.${i?"asc":"desc"}${o===void 0?"":o?".nullsfirst":".nullslast"}`),this}limit(s,{foreignTable:i,referencedTable:o=i}={}){const a=typeof o>"u"?"limit":`${o}.limit`;return this.url.searchParams.set(a,`${s}`),this}range(s,i,{foreignTable:o,referencedTable:a=o}={}){const l=typeof a>"u"?"offset":`${a}.offset`,u=typeof a>"u"?"limit":`${a}.limit`;return this.url.searchParams.set(l,`${s}`),this.url.searchParams.set(u,`${i-s+1}`),this}abortSignal(s){return this.signal=s,this}single(){return this.headers.Accept="application/vnd.pgrst.object+json",this}maybeSingle(){return this.method==="GET"?this.headers.Accept="application/json":this.headers.Accept="application/vnd.pgrst.object+json",this.isMaybeSingle=!0,this}csv(){return this.headers.Accept="text/csv",this}geojson(){return this.headers.Accept="application/geo+json",this}explain({analyze:s=!1,verbose:i=!1,settings:o=!1,buffers:a=!1,wal:l=!1,format:u="text"}={}){var c;const h=[s?"analyze":null,i?"verbose":null,o?"settings":null,a?"buffers":null,l?"wal":null].filter(Boolean).join("|"),f=(c=this.headers.Accept)!==null&&c!==void 0?c:"application/json";return this.headers.Accept=`application/vnd.pgrst.plan+${u}; for="${f}"; options=${h};`,u==="json"?this:this}rollback(){var s;return((s=this.headers.Prefer)!==null&&s!==void 0?s:"").trim().length>0?this.headers.Prefer+=",tx=rollback":this.headers.Prefer="tx=rollback",this}returns(){return this}}return ln.default=n,ln}var go;function yi(){if(go)return an;go=1;var e=an&&an.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(an,"__esModule",{value:!0});const t=e(El());class n extends t.default{eq(s,i){return this.url.searchParams.append(s,`eq.${i}`),this}neq(s,i){return this.url.searchParams.append(s,`neq.${i}`),this}gt(s,i){return this.url.searchParams.append(s,`gt.${i}`),this}gte(s,i){return this.url.searchParams.append(s,`gte.${i}`),this}lt(s,i){return this.url.searchParams.append(s,`lt.${i}`),this}lte(s,i){return this.url.searchParams.append(s,`lte.${i}`),this}like(s,i){return this.url.searchParams.append(s,`like.${i}`),this}likeAllOf(s,i){return this.url.searchParams.append(s,`like(all).{${i.join(",")}}`),this}likeAnyOf(s,i){return this.url.searchParams.append(s,`like(any).{${i.join(",")}}`),this}ilike(s,i){return this.url.searchParams.append(s,`ilike.${i}`),this}ilikeAllOf(s,i){return this.url.searchParams.append(s,`ilike(all).{${i.join(",")}}`),this}ilikeAnyOf(s,i){return this.url.searchParams.append(s,`ilike(any).{${i.join(",")}}`),this}is(s,i){return this.url.searchParams.append(s,`is.${i}`),this}in(s,i){const o=Array.from(new Set(i)).map(a=>typeof a=="string"&&new RegExp("[,()]").test(a)?`"${a}"`:`${a}`).join(",");return this.url.searchParams.append(s,`in.(${o})`),this}contains(s,i){return typeof i=="string"?this.url.searchParams.append(s,`cs.${i}`):Array.isArray(i)?this.url.searchParams.append(s,`cs.{${i.join(",")}}`):this.url.searchParams.append(s,`cs.${JSON.stringify(i)}`),this}containedBy(s,i){return typeof i=="string"?this.url.searchParams.append(s,`cd.${i}`):Array.isArray(i)?this.url.searchParams.append(s,`cd.{${i.join(",")}}`):this.url.searchParams.append(s,`cd.${JSON.stringify(i)}`),this}rangeGt(s,i){return this.url.searchParams.append(s,`sr.${i}`),this}rangeGte(s,i){return this.url.searchParams.append(s,`nxl.${i}`),this}rangeLt(s,i){return this.url.searchParams.append(s,`sl.${i}`),this}rangeLte(s,i){return this.url.searchParams.append(s,`nxr.${i}`),this}rangeAdjacent(s,i){return this.url.searchParams.append(s,`adj.${i}`),this}overlaps(s,i){return typeof i=="string"?this.url.searchParams.append(s,`ov.${i}`):this.url.searchParams.append(s,`ov.{${i.join(",")}}`),this}textSearch(s,i,{config:o,type:a}={}){let l="";a==="plain"?l="pl":a==="phrase"?l="ph":a==="websearch"&&(l="w");const u=o===void 0?"":`(${o})`;return this.url.searchParams.append(s,`${l}fts${u}.${i}`),this}match(s){return Object.entries(s).forEach(([i,o])=>{this.url.searchParams.append(i,`eq.${o}`)}),this}not(s,i,o){return this.url.searchParams.append(s,`not.${i}.${o}`),this}or(s,{foreignTable:i,referencedTable:o=i}={}){const a=o?`${o}.or`:"or";return this.url.searchParams.append(a,`(${s})`),this}filter(s,i,o){return this.url.searchParams.append(s,`${i}.${o}`),this}}return an.default=n,an}var mo;function Sl(){if(mo)return on;mo=1;var e=on&&on.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(on,"__esModule",{value:!0});const t=e(yi());class n{constructor(s,{headers:i={},schema:o,fetch:a}){this.url=s,this.headers=i,this.schema=o,this.fetch=a}select(s,{head:i=!1,count:o}={}){const a=i?"HEAD":"GET";let l=!1;const u=(s??"*").split("").map(c=>/\s/.test(c)&&!l?"":(c==='"'&&(l=!l),c)).join("");return this.url.searchParams.set("select",u),o&&(this.headers.Prefer=`count=${o}`),new t.default({method:a,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}insert(s,{count:i,defaultToNull:o=!0}={}){const a="POST",l=[];if(this.headers.Prefer&&l.push(this.headers.Prefer),i&&l.push(`count=${i}`),o||l.push("missing=default"),this.headers.Prefer=l.join(","),Array.isArray(s)){const u=s.reduce((c,h)=>c.concat(Object.keys(h)),[]);if(u.length>0){const c=[...new Set(u)].map(h=>`"${h}"`);this.url.searchParams.set("columns",c.join(","))}}return new t.default({method:a,url:this.url,headers:this.headers,schema:this.schema,body:s,fetch:this.fetch,allowEmpty:!1})}upsert(s,{onConflict:i,ignoreDuplicates:o=!1,count:a,defaultToNull:l=!0}={}){const u="POST",c=[`resolution=${o?"ignore":"merge"}-duplicates`];if(i!==void 0&&this.url.searchParams.set("on_conflict",i),this.headers.Prefer&&c.push(this.headers.Prefer),a&&c.push(`count=${a}`),l||c.push("missing=default"),this.headers.Prefer=c.join(","),Array.isArray(s)){const h=s.reduce((f,g)=>f.concat(Object.keys(g)),[]);if(h.length>0){const f=[...new Set(h)].map(g=>`"${g}"`);this.url.searchParams.set("columns",f.join(","))}}return new t.default({method:u,url:this.url,headers:this.headers,schema:this.schema,body:s,fetch:this.fetch,allowEmpty:!1})}update(s,{count:i}={}){const o="PATCH",a=[];return this.headers.Prefer&&a.push(this.headers.Prefer),i&&a.push(`count=${i}`),this.headers.Prefer=a.join(","),new t.default({method:o,url:this.url,headers:this.headers,schema:this.schema,body:s,fetch:this.fetch,allowEmpty:!1})}delete({count:s}={}){const i="DELETE",o=[];return s&&o.push(`count=${s}`),this.headers.Prefer&&o.unshift(this.headers.Prefer),this.headers.Prefer=o.join(","),new t.default({method:i,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}}return on.default=n,on}var Rn={},gr={},vo;function Kh(){return vo||(vo=1,Object.defineProperty(gr,"__esModule",{value:!0}),gr.version=void 0,gr.version="0.0.0-automated"),gr}var yo;function Gh(){if(yo)return Rn;yo=1,Object.defineProperty(Rn,"__esModule",{value:!0}),Rn.DEFAULT_HEADERS=void 0;const e=Kh();return Rn.DEFAULT_HEADERS={"X-Client-Info":`postgrest-js/${e.version}`},Rn}var _o;function Qh(){if(_o)return sn;_o=1;var e=sn&&sn.__importDefault||function(i){return i&&i.__esModule?i:{default:i}};Object.defineProperty(sn,"__esModule",{value:!0});const t=e(Sl()),n=e(yi()),r=Gh();class s{constructor(o,{headers:a={},schema:l,fetch:u}={}){this.url=o,this.headers=Object.assign(Object.assign({},r.DEFAULT_HEADERS),a),this.schemaName=l,this.fetch=u}from(o){const a=new URL(`${this.url}/${o}`);return new t.default(a,{headers:Object.assign({},this.headers),schema:this.schemaName,fetch:this.fetch})}schema(o){return new s(this.url,{headers:this.headers,schema:o,fetch:this.fetch})}rpc(o,a={},{head:l=!1,get:u=!1,count:c}={}){let h;const f=new URL(`${this.url}/rpc/${o}`);let g;l||u?(h=l?"HEAD":"GET",Object.entries(a).filter(([b,x])=>x!==void 0).map(([b,x])=>[b,Array.isArray(x)?`{${x.join(",")}}`:`${x}`]).forEach(([b,x])=>{f.searchParams.append(b,x)})):(h="POST",g=a);const v=Object.assign({},this.headers);return c&&(v.Prefer=`count=${c}`),new n.default({method:h,url:f,headers:v,schema:this.schemaName,body:g,fetch:this.fetch,allowEmpty:!1})}}return sn.default=s,sn}var bo;function Xh(){if(bo)return pe;bo=1;var e=pe&&pe.__importDefault||function(a){return a&&a.__esModule?a:{default:a}};Object.defineProperty(pe,"__esModule",{value:!0}),pe.PostgrestError=pe.PostgrestBuilder=pe.PostgrestTransformBuilder=pe.PostgrestFilterBuilder=pe.PostgrestQueryBuilder=pe.PostgrestClient=void 0;const t=e(Qh());pe.PostgrestClient=t.default;const n=e(Sl());pe.PostgrestQueryBuilder=n.default;const r=e(yi());pe.PostgrestFilterBuilder=r.default;const s=e(El());pe.PostgrestTransformBuilder=s.default;const i=e(kl());pe.PostgrestBuilder=i.default;const o=e(wl());return pe.PostgrestError=o.default,pe.default={PostgrestClient:t.default,PostgrestQueryBuilder:n.default,PostgrestFilterBuilder:r.default,PostgrestTransformBuilder:s.default,PostgrestBuilder:i.default,PostgrestError:o.default},pe}var Yh=Xh();const Zh=Bh(Yh),{PostgrestClient:ed,PostgrestQueryBuilder:Vg,PostgrestFilterBuilder:Hg,PostgrestTransformBuilder:Wg,PostgrestBuilder:Jg,PostgrestError:Kg}=Zh,td="2.11.2",nd={"X-Client-Info":`realtime-js/${td}`},rd="1.0.0",Al=1e4,sd=1e3;var bn;(function(e){e[e.connecting=0]="connecting",e[e.open=1]="open",e[e.closing=2]="closing",e[e.closed=3]="closed"})(bn||(bn={}));var De;(function(e){e.closed="closed",e.errored="errored",e.joined="joined",e.joining="joining",e.leaving="leaving"})(De||(De={}));var Qe;(function(e){e.close="phx_close",e.error="phx_error",e.join="phx_join",e.reply="phx_reply",e.leave="phx_leave",e.access_token="access_token"})(Qe||(Qe={}));var Ns;(function(e){e.websocket="websocket"})(Ns||(Ns={}));var Wt;(function(e){e.Connecting="connecting",e.Open="open",e.Closing="closing",e.Closed="closed"})(Wt||(Wt={}));class id{constructor(){this.HEADER_LENGTH=1}decode(t,n){return t.constructor===ArrayBuffer?n(this._binaryDecode(t)):n(typeof t=="string"?JSON.parse(t):{})}_binaryDecode(t){const n=new DataView(t),r=new TextDecoder;return this._decodeBroadcast(t,n,r)}_decodeBroadcast(t,n,r){const s=n.getUint8(1),i=n.getUint8(2);let o=this.HEADER_LENGTH+2;const a=r.decode(t.slice(o,o+s));o=o+s;const l=r.decode(t.slice(o,o+i));o=o+i;const u=JSON.parse(r.decode(t.slice(o,t.byteLength)));return{ref:null,topic:a,event:l,payload:u}}}class Tl{constructor(t,n){this.callback=t,this.timerCalc=n,this.timer=void 0,this.tries=0,this.callback=t,this.timerCalc=n}reset(){this.tries=0,clearTimeout(this.timer)}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var te;(function(e){e.abstime="abstime",e.bool="bool",e.date="date",e.daterange="daterange",e.float4="float4",e.float8="float8",e.int2="int2",e.int4="int4",e.int4range="int4range",e.int8="int8",e.int8range="int8range",e.json="json",e.jsonb="jsonb",e.money="money",e.numeric="numeric",e.oid="oid",e.reltime="reltime",e.text="text",e.time="time",e.timestamp="timestamp",e.timestamptz="timestamptz",e.timetz="timetz",e.tsrange="tsrange",e.tstzrange="tstzrange"})(te||(te={}));const wo=(e,t,n={})=>{var r;const s=(r=n.skipTypes)!==null&&r!==void 0?r:[];return Object.keys(t).reduce((i,o)=>(i[o]=od(o,e,t,s),i),{})},od=(e,t,n,r)=>{const s=t.find(a=>a.name===e),i=s==null?void 0:s.type,o=n[e];return i&&!r.includes(i)?xl(i,o):Ms(o)},xl=(e,t)=>{if(e.charAt(0)==="_"){const n=e.slice(1,e.length);return ud(t,n)}switch(e){case te.bool:return ad(t);case te.float4:case te.float8:case te.int2:case te.int4:case te.int8:case te.numeric:case te.oid:return ld(t);case te.json:case te.jsonb:return cd(t);case te.timestamp:return hd(t);case te.abstime:case te.date:case te.daterange:case te.int4range:case te.int8range:case te.money:case te.reltime:case te.text:case te.time:case te.timestamptz:case te.timetz:case te.tsrange:case te.tstzrange:return Ms(t);default:return Ms(t)}},Ms=e=>e,ad=e=>{switch(e){case"t":return!0;case"f":return!1;default:return e}},ld=e=>{if(typeof e=="string"){const t=parseFloat(e);if(!Number.isNaN(t))return t}return e},cd=e=>{if(typeof e=="string")try{return JSON.parse(e)}catch(t){return console.log(`JSON parse error: ${t}`),e}return e},ud=(e,t)=>{if(typeof e!="string")return e;const n=e.length-1,r=e[n];if(e[0]==="{"&&r==="}"){let s;const i=e.slice(1,n);try{s=JSON.parse("["+i+"]")}catch{s=i?i.split(","):[]}return s.map(o=>xl(t,o))}return e},hd=e=>typeof e=="string"?e.replace(" ","T"):e,Ol=e=>{let t=e;return t=t.replace(/^ws/i,"http"),t=t.replace(/(\/socket\/websocket|\/socket|\/websocket)\/?$/i,""),t.replace(/\/+$/,"")};class gs{constructor(t,n,r={},s=Al){this.channel=t,this.event=n,this.payload=r,this.timeout=s,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(t){this.timeout=t,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(t){this.payload=Object.assign(Object.assign({},this.payload),t)}receive(t,n){var r;return this._hasReceived(t)&&n((r=this.receivedResp)===null||r===void 0?void 0:r.response),this.recHooks.push({status:t,callback:n}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const t=n=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=n,this._matchReceive(n)};this.channel._on(this.refEvent,{},t),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(t,n){this.refEvent&&this.channel._trigger(this.refEvent,{status:t,response:n})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:t,response:n}){this.recHooks.filter(r=>r.status===t).forEach(r=>r.callback(n))}_hasReceived(t){return this.receivedResp&&this.receivedResp.status===t}}var ko;(function(e){e.SYNC="sync",e.JOIN="join",e.LEAVE="leave"})(ko||(ko={}));class Wn{constructor(t,n){this.channel=t,this.state={},this.pendingDiffs=[],this.joinRef=null,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const r=(n==null?void 0:n.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(r.state,{},s=>{const{onJoin:i,onLeave:o,onSync:a}=this.caller;this.joinRef=this.channel._joinRef(),this.state=Wn.syncState(this.state,s,i,o),this.pendingDiffs.forEach(l=>{this.state=Wn.syncDiff(this.state,l,i,o)}),this.pendingDiffs=[],a()}),this.channel._on(r.diff,{},s=>{const{onJoin:i,onLeave:o,onSync:a}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(s):(this.state=Wn.syncDiff(this.state,s,i,o),a())}),this.onJoin((s,i,o)=>{this.channel._trigger("presence",{event:"join",key:s,currentPresences:i,newPresences:o})}),this.onLeave((s,i,o)=>{this.channel._trigger("presence",{event:"leave",key:s,currentPresences:i,leftPresences:o})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(t,n,r,s){const i=this.cloneDeep(t),o=this.transformState(n),a={},l={};return this.map(i,(u,c)=>{o[u]||(l[u]=c)}),this.map(o,(u,c)=>{const h=i[u];if(h){const f=c.map(x=>x.presence_ref),g=h.map(x=>x.presence_ref),v=c.filter(x=>g.indexOf(x.presence_ref)<0),b=h.filter(x=>f.indexOf(x.presence_ref)<0);v.length>0&&(a[u]=v),b.length>0&&(l[u]=b)}else a[u]=c}),this.syncDiff(i,{joins:a,leaves:l},r,s)}static syncDiff(t,n,r,s){const{joins:i,leaves:o}={joins:this.transformState(n.joins),leaves:this.transformState(n.leaves)};return r||(r=()=>{}),s||(s=()=>{}),this.map(i,(a,l)=>{var u;const c=(u=t[a])!==null&&u!==void 0?u:[];if(t[a]=this.cloneDeep(l),c.length>0){const h=t[a].map(g=>g.presence_ref),f=c.filter(g=>h.indexOf(g.presence_ref)<0);t[a].unshift(...f)}r(a,c,l)}),this.map(o,(a,l)=>{let u=t[a];if(!u)return;const c=l.map(h=>h.presence_ref);u=u.filter(h=>c.indexOf(h.presence_ref)<0),t[a]=u,s(a,u,l),u.length===0&&delete t[a]}),t}static map(t,n){return Object.getOwnPropertyNames(t).map(r=>n(r,t[r]))}static transformState(t){return t=this.cloneDeep(t),Object.getOwnPropertyNames(t).reduce((n,r)=>{const s=t[r];return"metas"in s?n[r]=s.metas.map(i=>(i.presence_ref=i.phx_ref,delete i.phx_ref,delete i.phx_ref_prev,i)):n[r]=s,n},{})}static cloneDeep(t){return JSON.parse(JSON.stringify(t))}onJoin(t){this.caller.onJoin=t}onLeave(t){this.caller.onLeave=t}onSync(t){this.caller.onSync=t}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var Eo;(function(e){e.ALL="*",e.INSERT="INSERT",e.UPDATE="UPDATE",e.DELETE="DELETE"})(Eo||(Eo={}));var So;(function(e){e.BROADCAST="broadcast",e.PRESENCE="presence",e.POSTGRES_CHANGES="postgres_changes",e.SYSTEM="system"})(So||(So={}));var pt;(function(e){e.SUBSCRIBED="SUBSCRIBED",e.TIMED_OUT="TIMED_OUT",e.CLOSED="CLOSED",e.CHANNEL_ERROR="CHANNEL_ERROR"})(pt||(pt={}));class _i{constructor(t,n={config:{}},r){this.topic=t,this.params=n,this.socket=r,this.bindings={},this.state=De.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=t.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:""},private:!1},n.config),this.timeout=this.socket.timeout,this.joinPush=new gs(this,Qe.join,this.params,this.timeout),this.rejoinTimer=new Tl(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=De.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(s=>s.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=De.closed,this.socket._remove(this)}),this._onError(s=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,s),this.state=De.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=De.errored,this.rejoinTimer.scheduleTimeout())}),this._on(Qe.reply,{},(s,i)=>{this._trigger(this._replyEventName(i),s)}),this.presence=new Wn(this),this.broadcastEndpointURL=Ol(this.socket.endPoint)+"/api/broadcast",this.private=this.params.config.private||!1}subscribe(t,n=this.timeout){var r,s;if(this.socket.isConnected()||this.socket.connect(),this.joinedOnce)throw"tried to subscribe multiple times. 'subscribe' can only be called a single time per channel instance";{const{config:{broadcast:i,presence:o,private:a}}=this.params;this._onError(c=>t==null?void 0:t(pt.CHANNEL_ERROR,c)),this._onClose(()=>t==null?void 0:t(pt.CLOSED));const l={},u={broadcast:i,presence:o,postgres_changes:(s=(r=this.bindings.postgres_changes)===null||r===void 0?void 0:r.map(c=>c.filter))!==null&&s!==void 0?s:[],private:a};this.socket.accessTokenValue&&(l.access_token=this.socket.accessTokenValue),this.updateJoinPayload(Object.assign({config:u},l)),this.joinedOnce=!0,this._rejoin(n),this.joinPush.receive("ok",async({postgres_changes:c})=>{var h;if(this.socket.setAuth(),c===void 0){t==null||t(pt.SUBSCRIBED);return}else{const f=this.bindings.postgres_changes,g=(h=f==null?void 0:f.length)!==null&&h!==void 0?h:0,v=[];for(let b=0;b<g;b++){const x=f[b],{filter:{event:$,schema:w,table:E,filter:T}}=x,N=c&&c[b];if(N&&N.event===$&&N.schema===w&&N.table===E&&N.filter===T)v.push(Object.assign(Object.assign({},x),{id:N.id}));else{this.unsubscribe(),t==null||t(pt.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=v,t&&t(pt.SUBSCRIBED);return}}).receive("error",c=>{t==null||t(pt.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(c).join(", ")||"error")))}).receive("timeout",()=>{t==null||t(pt.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(t,n={}){return await this.send({type:"presence",event:"track",payload:t},n.timeout||this.timeout)}async untrack(t={}){return await this.send({type:"presence",event:"untrack"},t)}on(t,n,r){return this._on(t,n,r)}async send(t,n={}){var r,s;if(!this._canPush()&&t.type==="broadcast"){const{event:i,payload:o}=t,a={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:i,payload:o,private:this.private}]})};try{const l=await this._fetchWithTimeout(this.broadcastEndpointURL,a,(r=n.timeout)!==null&&r!==void 0?r:this.timeout);return await((s=l.body)===null||s===void 0?void 0:s.cancel()),l.ok?"ok":"error"}catch(l){return l.name==="AbortError"?"timed out":"error"}}else return new Promise(i=>{var o,a,l;const u=this._push(t.type,t,n.timeout||this.timeout);t.type==="broadcast"&&!(!((l=(a=(o=this.params)===null||o===void 0?void 0:o.config)===null||a===void 0?void 0:a.broadcast)===null||l===void 0)&&l.ack)&&i("ok"),u.receive("ok",()=>i("ok")),u.receive("error",()=>i("error")),u.receive("timeout",()=>i("timed out"))})}updateJoinPayload(t){this.joinPush.updatePayload(t)}unsubscribe(t=this.timeout){this.state=De.leaving;const n=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(Qe.close,"leave",this._joinRef())};return this.rejoinTimer.reset(),this.joinPush.destroy(),new Promise(r=>{const s=new gs(this,Qe.leave,{},t);s.receive("ok",()=>{n(),r("ok")}).receive("timeout",()=>{n(),r("timed out")}).receive("error",()=>{r("error")}),s.send(),this._canPush()||s.trigger("ok",{})})}async _fetchWithTimeout(t,n,r){const s=new AbortController,i=setTimeout(()=>s.abort(),r),o=await this.socket.fetch(t,Object.assign(Object.assign({},n),{signal:s.signal}));return clearTimeout(i),o}_push(t,n,r=this.timeout){if(!this.joinedOnce)throw`tried to push '${t}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let s=new gs(this,t,n,r);return this._canPush()?s.send():(s.startTimeout(),this.pushBuffer.push(s)),s}_onMessage(t,n,r){return n}_isMember(t){return this.topic===t}_joinRef(){return this.joinPush.ref}_trigger(t,n,r){var s,i;const o=t.toLocaleLowerCase(),{close:a,error:l,leave:u,join:c}=Qe;if(r&&[a,l,u,c].indexOf(o)>=0&&r!==this._joinRef())return;let h=this._onMessage(o,n,r);if(n&&!h)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(o)?(s=this.bindings.postgres_changes)===null||s===void 0||s.filter(f=>{var g,v,b;return((g=f.filter)===null||g===void 0?void 0:g.event)==="*"||((b=(v=f.filter)===null||v===void 0?void 0:v.event)===null||b===void 0?void 0:b.toLocaleLowerCase())===o}).map(f=>f.callback(h,r)):(i=this.bindings[o])===null||i===void 0||i.filter(f=>{var g,v,b,x,$,w;if(["broadcast","presence","postgres_changes"].includes(o))if("id"in f){const E=f.id,T=(g=f.filter)===null||g===void 0?void 0:g.event;return E&&((v=n.ids)===null||v===void 0?void 0:v.includes(E))&&(T==="*"||(T==null?void 0:T.toLocaleLowerCase())===((b=n.data)===null||b===void 0?void 0:b.type.toLocaleLowerCase()))}else{const E=($=(x=f==null?void 0:f.filter)===null||x===void 0?void 0:x.event)===null||$===void 0?void 0:$.toLocaleLowerCase();return E==="*"||E===((w=n==null?void 0:n.event)===null||w===void 0?void 0:w.toLocaleLowerCase())}else return f.type.toLocaleLowerCase()===o}).map(f=>{if(typeof h=="object"&&"ids"in h){const g=h.data,{schema:v,table:b,commit_timestamp:x,type:$,errors:w}=g;h=Object.assign(Object.assign({},{schema:v,table:b,commit_timestamp:x,eventType:$,new:{},old:{},errors:w}),this._getPayloadRecords(g))}f.callback(h,r)})}_isClosed(){return this.state===De.closed}_isJoined(){return this.state===De.joined}_isJoining(){return this.state===De.joining}_isLeaving(){return this.state===De.leaving}_replyEventName(t){return`chan_reply_${t}`}_on(t,n,r){const s=t.toLocaleLowerCase(),i={type:s,filter:n,callback:r};return this.bindings[s]?this.bindings[s].push(i):this.bindings[s]=[i],this}_off(t,n){const r=t.toLocaleLowerCase();return this.bindings[r]=this.bindings[r].filter(s=>{var i;return!(((i=s.type)===null||i===void 0?void 0:i.toLocaleLowerCase())===r&&_i.isEqual(s.filter,n))}),this}static isEqual(t,n){if(Object.keys(t).length!==Object.keys(n).length)return!1;for(const r in t)if(t[r]!==n[r])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(t){this._on(Qe.close,{},t)}_onError(t){this._on(Qe.error,{},n=>t(n))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(t=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=De.joining,this.joinPush.resend(t))}_getPayloadRecords(t){const n={new:{},old:{}};return(t.type==="INSERT"||t.type==="UPDATE")&&(n.new=wo(t.columns,t.record)),(t.type==="UPDATE"||t.type==="DELETE")&&(n.old=wo(t.columns,t.old_record)),n}}const dd=()=>{},fd=typeof WebSocket<"u",pd=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class gd{constructor(t,n){var r;this.accessTokenValue=null,this.apiKey=null,this.channels=[],this.endPoint="",this.httpEndpoint="",this.headers=nd,this.params={},this.timeout=Al,this.heartbeatIntervalMs=3e4,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.ref=0,this.logger=dd,this.conn=null,this.sendBuffer=[],this.serializer=new id,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._resolveFetch=i=>{let o;return i?o=i:typeof fetch>"u"?o=(...a)=>ge(async()=>{const{default:l}=await Promise.resolve().then(()=>xn);return{default:l}},void 0).then(({default:l})=>l(...a)):o=fetch,(...a)=>o(...a)},this.endPoint=`${t}/${Ns.websocket}`,this.httpEndpoint=Ol(t),n!=null&&n.transport?this.transport=n.transport:this.transport=null,n!=null&&n.params&&(this.params=n.params),n!=null&&n.headers&&(this.headers=Object.assign(Object.assign({},this.headers),n.headers)),n!=null&&n.timeout&&(this.timeout=n.timeout),n!=null&&n.logger&&(this.logger=n.logger),n!=null&&n.heartbeatIntervalMs&&(this.heartbeatIntervalMs=n.heartbeatIntervalMs);const s=(r=n==null?void 0:n.params)===null||r===void 0?void 0:r.apikey;if(s&&(this.accessTokenValue=s,this.apiKey=s),this.reconnectAfterMs=n!=null&&n.reconnectAfterMs?n.reconnectAfterMs:i=>[1e3,2e3,5e3,1e4][i-1]||1e4,this.encode=n!=null&&n.encode?n.encode:(i,o)=>o(JSON.stringify(i)),this.decode=n!=null&&n.decode?n.decode:this.serializer.decode.bind(this.serializer),this.reconnectTimer=new Tl(async()=>{this.disconnect(),this.connect()},this.reconnectAfterMs),this.fetch=this._resolveFetch(n==null?void 0:n.fetch),n!=null&&n.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.worker=(n==null?void 0:n.worker)||!1,this.workerUrl=n==null?void 0:n.workerUrl}this.accessToken=(n==null?void 0:n.accessToken)||null}connect(){if(!this.conn){if(this.transport){this.conn=new this.transport(this.endpointURL(),void 0,{headers:this.headers});return}if(fd){this.conn=new WebSocket(this.endpointURL()),this.setupConnection();return}this.conn=new md(this.endpointURL(),void 0,{close:()=>{this.conn=null}}),ge(async()=>{const{default:t}=await Ie(()=>import("./browser-Dl4JI1hi-C6E7JKQ1.js"),[]).then(n=>n.b);return{default:t}},[]).then(({default:t})=>{this.conn=new t(this.endpointURL(),void 0,{headers:this.headers}),this.setupConnection()})}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:rd}))}disconnect(t,n){this.conn&&(this.conn.onclose=function(){},t?this.conn.close(t,n??""):this.conn.close(),this.conn=null,this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.reset())}getChannels(){return this.channels}async removeChannel(t){const n=await t.unsubscribe();return this.channels.length===0&&this.disconnect(),n}async removeAllChannels(){const t=await Promise.all(this.channels.map(n=>n.unsubscribe()));return this.disconnect(),t}log(t,n,r){this.logger(t,n,r)}connectionState(){switch(this.conn&&this.conn.readyState){case bn.connecting:return Wt.Connecting;case bn.open:return Wt.Open;case bn.closing:return Wt.Closing;default:return Wt.Closed}}isConnected(){return this.connectionState()===Wt.Open}channel(t,n={config:{}}){const r=new _i(`realtime:${t}`,n,this);return this.channels.push(r),r}push(t){const{topic:n,event:r,payload:s,ref:i}=t,o=()=>{this.encode(t,a=>{var l;(l=this.conn)===null||l===void 0||l.send(a)})};this.log("push",`${n} ${r} (${i})`,s),this.isConnected()?o():this.sendBuffer.push(o)}async setAuth(t=null){let n=t||this.accessToken&&await this.accessToken()||this.accessTokenValue;if(n){let r=null;try{r=JSON.parse(atob(n.split(".")[1]))}catch{}if(r&&r.exp&&!(Math.floor(Date.now()/1e3)-r.exp<0))return this.log("auth",`InvalidJWTToken: Invalid value for JWT claim "exp" with value ${r.exp}`),Promise.reject(`InvalidJWTToken: Invalid value for JWT claim "exp" with value ${r.exp}`);this.accessTokenValue=n,this.channels.forEach(s=>{n&&s.updateJoinPayload({access_token:n}),s.joinedOnce&&s._isJoined()&&s._push(Qe.access_token,{access_token:n})})}}async sendHeartbeat(){var t;if(this.isConnected()){if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection"),(t=this.conn)===null||t===void 0||t.close(sd,"hearbeat timeout");return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef}),this.setAuth()}}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(t=>t()),this.sendBuffer=[])}_makeRef(){let t=this.ref+1;return t===this.ref?this.ref=0:this.ref=t,this.ref.toString()}_leaveOpenTopic(t){let n=this.channels.find(r=>r.topic===t&&(r._isJoined()||r._isJoining()));n&&(this.log("transport",`leaving duplicate topic "${t}"`),n.unsubscribe())}_remove(t){this.channels=this.channels.filter(n=>n._joinRef()!==t._joinRef())}setupConnection(){this.conn&&(this.conn.binaryType="arraybuffer",this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=t=>this._onConnError(t),this.conn.onmessage=t=>this._onConnMessage(t),this.conn.onclose=t=>this._onConnClose(t))}_onConnMessage(t){this.decode(t.data,n=>{let{topic:r,event:s,payload:i,ref:o}=n;o&&o===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null),this.log("receive",`${i.status||""} ${r} ${s} ${o&&"("+o+")"||""}`,i),this.channels.filter(a=>a._isMember(r)).forEach(a=>a._trigger(s,i,o)),this.stateChangeCallbacks.message.forEach(a=>a(n))})}async _onConnOpen(){if(this.log("transport",`connected to ${this.endpointURL()}`),this.flushSendBuffer(),this.reconnectTimer.reset(),!this.worker)this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs);else{this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const t=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(t),this.workerRef.onerror=n=>{this.log("worker","worker error",n.message),this.workerRef.terminate()},this.workerRef.onmessage=n=>{n.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}this.stateChangeCallbacks.open.forEach(t=>t())}_onConnClose(t){this.log("transport","close",t),this._triggerChanError(),this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.scheduleTimeout(),this.stateChangeCallbacks.close.forEach(n=>n(t))}_onConnError(t){this.log("transport",t.message),this._triggerChanError(),this.stateChangeCallbacks.error.forEach(n=>n(t))}_triggerChanError(){this.channels.forEach(t=>t._trigger(Qe.error))}_appendParams(t,n){if(Object.keys(n).length===0)return t;const r=t.match(/\?/)?"&":"?",s=new URLSearchParams(n);return`${t}${r}${s}`}_workerObjectUrl(t){let n;if(t)n=t;else{const r=new Blob([pd],{type:"application/javascript"});n=URL.createObjectURL(r)}return n}}class md{constructor(t,n,r){this.binaryType="arraybuffer",this.onclose=()=>{},this.onerror=()=>{},this.onmessage=()=>{},this.onopen=()=>{},this.readyState=bn.connecting,this.send=()=>{},this.url=null,this.url=t,this.close=r.close}}class bi extends Error{constructor(t){super(t),this.__isStorageError=!0,this.name="StorageError"}}function me(e){return typeof e=="object"&&e!==null&&"__isStorageError"in e}class vd extends bi{constructor(t,n){super(t),this.name="StorageApiError",this.status=n}toJSON(){return{name:this.name,message:this.message,status:this.status}}}class Fs extends bi{constructor(t,n){super(t),this.name="StorageUnknownError",this.originalError=n}}var yd=function(e,t,n,r){function s(i){return i instanceof n?i:new n(function(o){o(i)})}return new(n||(n=Promise))(function(i,o){function a(c){try{u(r.next(c))}catch(h){o(h)}}function l(c){try{u(r.throw(c))}catch(h){o(h)}}function u(c){c.done?i(c.value):s(c.value).then(a,l)}u((r=r.apply(e,[])).next())})};const jl=e=>{let t;return e?t=e:typeof fetch>"u"?t=(...n)=>ge(async()=>{const{default:r}=await Promise.resolve().then(()=>xn);return{default:r}},void 0).then(({default:r})=>r(...n)):t=fetch,(...n)=>t(...n)},_d=()=>yd(void 0,void 0,void 0,function*(){return typeof Response>"u"?(yield ge(()=>Promise.resolve().then(()=>xn),void 0)).Response:Response}),Bs=e=>{if(Array.isArray(e))return e.map(n=>Bs(n));if(typeof e=="function"||e!==Object(e))return e;const t={};return Object.entries(e).forEach(([n,r])=>{const s=n.replace(/([-_][a-z])/gi,i=>i.toUpperCase().replace(/[-_]/g,""));t[s]=Bs(r)}),t};var Yt=function(e,t,n,r){function s(i){return i instanceof n?i:new n(function(o){o(i)})}return new(n||(n=Promise))(function(i,o){function a(c){try{u(r.next(c))}catch(h){o(h)}}function l(c){try{u(r.throw(c))}catch(h){o(h)}}function u(c){c.done?i(c.value):s(c.value).then(a,l)}u((r=r.apply(e,[])).next())})};const ms=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),bd=(e,t,n)=>Yt(void 0,void 0,void 0,function*(){const r=yield _d();e instanceof r&&!(n!=null&&n.noResolveJson)?e.json().then(s=>{t(new vd(ms(s),e.status||500))}).catch(s=>{t(new Fs(ms(s),s))}):t(new Fs(ms(e),e))}),wd=(e,t,n,r)=>{const s={method:e,headers:(t==null?void 0:t.headers)||{}};return e==="GET"?s:(s.headers=Object.assign({"Content-Type":"application/json"},t==null?void 0:t.headers),r&&(s.body=JSON.stringify(r)),Object.assign(Object.assign({},s),n))};function lr(e,t,n,r,s,i){return Yt(this,void 0,void 0,function*(){return new Promise((o,a)=>{e(n,wd(t,r,s,i)).then(l=>{if(!l.ok)throw l;return r!=null&&r.noResolveJson?l:l.json()}).then(l=>o(l)).catch(l=>bd(l,a,r))})})}function Nr(e,t,n,r){return Yt(this,void 0,void 0,function*(){return lr(e,"GET",t,n,r)})}function Tt(e,t,n,r,s){return Yt(this,void 0,void 0,function*(){return lr(e,"POST",t,r,s,n)})}function kd(e,t,n,r,s){return Yt(this,void 0,void 0,function*(){return lr(e,"PUT",t,r,s,n)})}function Ed(e,t,n,r){return Yt(this,void 0,void 0,function*(){return lr(e,"HEAD",t,Object.assign(Object.assign({},n),{noResolveJson:!0}),r)})}function Pl(e,t,n,r,s){return Yt(this,void 0,void 0,function*(){return lr(e,"DELETE",t,r,s,n)})}var je=function(e,t,n,r){function s(i){return i instanceof n?i:new n(function(o){o(i)})}return new(n||(n=Promise))(function(i,o){function a(c){try{u(r.next(c))}catch(h){o(h)}}function l(c){try{u(r.throw(c))}catch(h){o(h)}}function u(c){c.done?i(c.value):s(c.value).then(a,l)}u((r=r.apply(e,[])).next())})};const Sd={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},Ao={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class Ad{constructor(t,n={},r,s){this.url=t,this.headers=n,this.bucketId=r,this.fetch=jl(s)}uploadOrUpdate(t,n,r,s){return je(this,void 0,void 0,function*(){try{let i;const o=Object.assign(Object.assign({},Ao),s);let a=Object.assign(Object.assign({},this.headers),t==="POST"&&{"x-upsert":String(o.upsert)});const l=o.metadata;typeof Blob<"u"&&r instanceof Blob?(i=new FormData,i.append("cacheControl",o.cacheControl),l&&i.append("metadata",this.encodeMetadata(l)),i.append("",r)):typeof FormData<"u"&&r instanceof FormData?(i=r,i.append("cacheControl",o.cacheControl),l&&i.append("metadata",this.encodeMetadata(l))):(i=r,a["cache-control"]=`max-age=${o.cacheControl}`,a["content-type"]=o.contentType,l&&(a["x-metadata"]=this.toBase64(this.encodeMetadata(l)))),s!=null&&s.headers&&(a=Object.assign(Object.assign({},a),s.headers));const u=this._removeEmptyFolders(n),c=this._getFinalPath(u),h=yield this.fetch(`${this.url}/object/${c}`,Object.assign({method:t,body:i,headers:a},o!=null&&o.duplex?{duplex:o.duplex}:{})),f=yield h.json();return h.ok?{data:{path:u,id:f.Id,fullPath:f.Key},error:null}:{data:null,error:f}}catch(i){if(me(i))return{data:null,error:i};throw i}})}upload(t,n,r){return je(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",t,n,r)})}uploadToSignedUrl(t,n,r,s){return je(this,void 0,void 0,function*(){const i=this._removeEmptyFolders(t),o=this._getFinalPath(i),a=new URL(this.url+`/object/upload/sign/${o}`);a.searchParams.set("token",n);try{let l;const u=Object.assign({upsert:Ao.upsert},s),c=Object.assign(Object.assign({},this.headers),{"x-upsert":String(u.upsert)});typeof Blob<"u"&&r instanceof Blob?(l=new FormData,l.append("cacheControl",u.cacheControl),l.append("",r)):typeof FormData<"u"&&r instanceof FormData?(l=r,l.append("cacheControl",u.cacheControl)):(l=r,c["cache-control"]=`max-age=${u.cacheControl}`,c["content-type"]=u.contentType);const h=yield this.fetch(a.toString(),{method:"PUT",body:l,headers:c}),f=yield h.json();return h.ok?{data:{path:i,fullPath:f.Key},error:null}:{data:null,error:f}}catch(l){if(me(l))return{data:null,error:l};throw l}})}createSignedUploadUrl(t,n){return je(this,void 0,void 0,function*(){try{let r=this._getFinalPath(t);const s=Object.assign({},this.headers);n!=null&&n.upsert&&(s["x-upsert"]="true");const i=yield Tt(this.fetch,`${this.url}/object/upload/sign/${r}`,{},{headers:s}),o=new URL(this.url+i.url),a=o.searchParams.get("token");if(!a)throw new bi("No token returned by API");return{data:{signedUrl:o.toString(),path:t,token:a},error:null}}catch(r){if(me(r))return{data:null,error:r};throw r}})}update(t,n,r){return je(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",t,n,r)})}move(t,n,r){return je(this,void 0,void 0,function*(){try{return{data:yield Tt(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:t,destinationKey:n,destinationBucket:r==null?void 0:r.destinationBucket},{headers:this.headers}),error:null}}catch(s){if(me(s))return{data:null,error:s};throw s}})}copy(t,n,r){return je(this,void 0,void 0,function*(){try{return{data:{path:(yield Tt(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:t,destinationKey:n,destinationBucket:r==null?void 0:r.destinationBucket},{headers:this.headers})).Key},error:null}}catch(s){if(me(s))return{data:null,error:s};throw s}})}createSignedUrl(t,n,r){return je(this,void 0,void 0,function*(){try{let s=this._getFinalPath(t),i=yield Tt(this.fetch,`${this.url}/object/sign/${s}`,Object.assign({expiresIn:n},r!=null&&r.transform?{transform:r.transform}:{}),{headers:this.headers});const o=r!=null&&r.download?`&download=${r.download===!0?"":r.download}`:"";return i={signedUrl:encodeURI(`${this.url}${i.signedURL}${o}`)},{data:i,error:null}}catch(s){if(me(s))return{data:null,error:s};throw s}})}createSignedUrls(t,n,r){return je(this,void 0,void 0,function*(){try{const s=yield Tt(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:n,paths:t},{headers:this.headers}),i=r!=null&&r.download?`&download=${r.download===!0?"":r.download}`:"";return{data:s.map(o=>Object.assign(Object.assign({},o),{signedUrl:o.signedURL?encodeURI(`${this.url}${o.signedURL}${i}`):null})),error:null}}catch(s){if(me(s))return{data:null,error:s};throw s}})}download(t,n){return je(this,void 0,void 0,function*(){const r=typeof(n==null?void 0:n.transform)<"u"?"render/image/authenticated":"object",s=this.transformOptsToQueryString((n==null?void 0:n.transform)||{}),i=s?`?${s}`:"";try{const o=this._getFinalPath(t);return{data:yield(yield Nr(this.fetch,`${this.url}/${r}/${o}${i}`,{headers:this.headers,noResolveJson:!0})).blob(),error:null}}catch(o){if(me(o))return{data:null,error:o};throw o}})}info(t){return je(this,void 0,void 0,function*(){const n=this._getFinalPath(t);try{const r=yield Nr(this.fetch,`${this.url}/object/info/${n}`,{headers:this.headers});return{data:Bs(r),error:null}}catch(r){if(me(r))return{data:null,error:r};throw r}})}exists(t){return je(this,void 0,void 0,function*(){const n=this._getFinalPath(t);try{return yield Ed(this.fetch,`${this.url}/object/${n}`,{headers:this.headers}),{data:!0,error:null}}catch(r){if(me(r)&&r instanceof Fs){const s=r.originalError;if([400,404].includes(s==null?void 0:s.status))return{data:!1,error:r}}throw r}})}getPublicUrl(t,n){const r=this._getFinalPath(t),s=[],i=n!=null&&n.download?`download=${n.download===!0?"":n.download}`:"";i!==""&&s.push(i);const o=typeof(n==null?void 0:n.transform)<"u"?"render/image":"object",a=this.transformOptsToQueryString((n==null?void 0:n.transform)||{});a!==""&&s.push(a);let l=s.join("&");return l!==""&&(l=`?${l}`),{data:{publicUrl:encodeURI(`${this.url}/${o}/public/${r}${l}`)}}}remove(t){return je(this,void 0,void 0,function*(){try{return{data:yield Pl(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:t},{headers:this.headers}),error:null}}catch(n){if(me(n))return{data:null,error:n};throw n}})}list(t,n,r){return je(this,void 0,void 0,function*(){try{const s=Object.assign(Object.assign(Object.assign({},Sd),n),{prefix:t||""});return{data:yield Tt(this.fetch,`${this.url}/object/list/${this.bucketId}`,s,{headers:this.headers},r),error:null}}catch(s){if(me(s))return{data:null,error:s};throw s}})}encodeMetadata(t){return JSON.stringify(t)}toBase64(t){return typeof Buffer<"u"?Buffer.from(t).toString("base64"):btoa(t)}_getFinalPath(t){return`${this.bucketId}/${t}`}_removeEmptyFolders(t){return t.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(t){const n=[];return t.width&&n.push(`width=${t.width}`),t.height&&n.push(`height=${t.height}`),t.resize&&n.push(`resize=${t.resize}`),t.format&&n.push(`format=${t.format}`),t.quality&&n.push(`quality=${t.quality}`),n.join("&")}}const Td="2.7.1",xd={"X-Client-Info":`storage-js/${Td}`};var un=function(e,t,n,r){function s(i){return i instanceof n?i:new n(function(o){o(i)})}return new(n||(n=Promise))(function(i,o){function a(c){try{u(r.next(c))}catch(h){o(h)}}function l(c){try{u(r.throw(c))}catch(h){o(h)}}function u(c){c.done?i(c.value):s(c.value).then(a,l)}u((r=r.apply(e,[])).next())})};class Od{constructor(t,n={},r){this.url=t,this.headers=Object.assign(Object.assign({},xd),n),this.fetch=jl(r)}listBuckets(){return un(this,void 0,void 0,function*(){try{return{data:yield Nr(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(t){if(me(t))return{data:null,error:t};throw t}})}getBucket(t){return un(this,void 0,void 0,function*(){try{return{data:yield Nr(this.fetch,`${this.url}/bucket/${t}`,{headers:this.headers}),error:null}}catch(n){if(me(n))return{data:null,error:n};throw n}})}createBucket(t,n={public:!1}){return un(this,void 0,void 0,function*(){try{return{data:yield Tt(this.fetch,`${this.url}/bucket`,{id:t,name:t,public:n.public,file_size_limit:n.fileSizeLimit,allowed_mime_types:n.allowedMimeTypes},{headers:this.headers}),error:null}}catch(r){if(me(r))return{data:null,error:r};throw r}})}updateBucket(t,n){return un(this,void 0,void 0,function*(){try{return{data:yield kd(this.fetch,`${this.url}/bucket/${t}`,{id:t,name:t,public:n.public,file_size_limit:n.fileSizeLimit,allowed_mime_types:n.allowedMimeTypes},{headers:this.headers}),error:null}}catch(r){if(me(r))return{data:null,error:r};throw r}})}emptyBucket(t){return un(this,void 0,void 0,function*(){try{return{data:yield Tt(this.fetch,`${this.url}/bucket/${t}/empty`,{},{headers:this.headers}),error:null}}catch(n){if(me(n))return{data:null,error:n};throw n}})}deleteBucket(t){return un(this,void 0,void 0,function*(){try{return{data:yield Pl(this.fetch,`${this.url}/bucket/${t}`,{},{headers:this.headers}),error:null}}catch(n){if(me(n))return{data:null,error:n};throw n}})}}class jd extends Od{constructor(t,n={},r){super(t,n,r)}from(t){return new Ad(this.url,this.headers,t,this.fetch)}}const Pd="2.47.10";let Dn="";typeof Deno<"u"?Dn="deno":typeof document<"u"?Dn="web":typeof navigator<"u"&&navigator.product==="ReactNative"?Dn="react-native":Dn="node";const Cd={"X-Client-Info":`supabase-js-${Dn}/${Pd}`},$d={headers:Cd},Rd={schema:"public"},Ld={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},Id={};var Ud=function(e,t,n,r){function s(i){return i instanceof n?i:new n(function(o){o(i)})}return new(n||(n=Promise))(function(i,o){function a(c){try{u(r.next(c))}catch(h){o(h)}}function l(c){try{u(r.throw(c))}catch(h){o(h)}}function u(c){c.done?i(c.value):s(c.value).then(a,l)}u((r=r.apply(e,[])).next())})};const Dd=e=>{let t;return e?t=e:typeof fetch>"u"?t=_l:t=fetch,(...n)=>t(...n)},Nd=()=>typeof Headers>"u"?bl:Headers,Md=(e,t,n)=>{const r=Dd(n),s=Nd();return(i,o)=>Ud(void 0,void 0,void 0,function*(){var a;const l=(a=yield t())!==null&&a!==void 0?a:e;let u=new s(o==null?void 0:o.headers);return u.has("apikey")||u.set("apikey",e),u.has("Authorization")||u.set("Authorization",`Bearer ${l}`),r(i,Object.assign(Object.assign({},o),{headers:u}))})};var Fd=function(e,t,n,r){function s(i){return i instanceof n?i:new n(function(o){o(i)})}return new(n||(n=Promise))(function(i,o){function a(c){try{u(r.next(c))}catch(h){o(h)}}function l(c){try{u(r.throw(c))}catch(h){o(h)}}function u(c){c.done?i(c.value):s(c.value).then(a,l)}u((r=r.apply(e,[])).next())})};function Bd(e){return e.replace(/\/$/,"")}function zd(e,t){const{db:n,auth:r,realtime:s,global:i}=e,{db:o,auth:a,realtime:l,global:u}=t,c={db:Object.assign(Object.assign({},o),n),auth:Object.assign(Object.assign({},a),r),realtime:Object.assign(Object.assign({},l),s),global:Object.assign(Object.assign({},u),i),accessToken:()=>Fd(this,void 0,void 0,function*(){return""})};return e.accessToken?c.accessToken=e.accessToken:delete c.accessToken,c}const Cl="2.67.3",qd="http://localhost:9999",Vd="supabase.auth.token",Hd={"X-Client-Info":`gotrue-js/${Cl}`},To=10,zs="X-Supabase-Api-Version",$l={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}};function Wd(e){return Math.round(Date.now()/1e3)+e}function Jd(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){const t=Math.random()*16|0;return(e=="x"?t:t&3|8).toString(16)})}const tt=()=>typeof window<"u"&&typeof document<"u",zt={tested:!1,writable:!1},Jn=()=>{if(!tt())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(zt.tested)return zt.writable;const e=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(e,e),globalThis.localStorage.removeItem(e),zt.tested=!0,zt.writable=!0}catch{zt.tested=!0,zt.writable=!1}return zt.writable};function Kd(e){const t={},n=new URL(e);if(n.hash&&n.hash[0]==="#")try{new URLSearchParams(n.hash.substring(1)).forEach((r,s)=>{t[s]=r})}catch{}return n.searchParams.forEach((r,s)=>{t[s]=r}),t}const Rl=e=>{let t;return e?t=e:typeof fetch>"u"?t=(...n)=>ge(async()=>{const{default:r}=await Promise.resolve().then(()=>xn);return{default:r}},void 0).then(({default:r})=>r(...n)):t=fetch,(...n)=>t(...n)},Gd=e=>typeof e=="object"&&e!==null&&"status"in e&&"ok"in e&&"json"in e&&typeof e.json=="function",Ll=async(e,t,n)=>{await e.setItem(t,JSON.stringify(n))},mr=async(e,t)=>{const n=await e.getItem(t);if(!n)return null;try{return JSON.parse(n)}catch{return n}},vr=async(e,t)=>{await e.removeItem(t)};function Qd(e){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";let n="",r,s,i,o,a,l,u,c=0;for(e=e.replace("-","+").replace("_","/");c<e.length;)o=t.indexOf(e.charAt(c++)),a=t.indexOf(e.charAt(c++)),l=t.indexOf(e.charAt(c++)),u=t.indexOf(e.charAt(c++)),r=o<<2|a>>4,s=(a&15)<<4|l>>2,i=(l&3)<<6|u,n=n+String.fromCharCode(r),l!=64&&s!=0&&(n=n+String.fromCharCode(s)),u!=64&&i!=0&&(n=n+String.fromCharCode(i));return n}class Zr{constructor(){this.promise=new Zr.promiseConstructor((t,n)=>{this.resolve=t,this.reject=n})}}Zr.promiseConstructor=Promise;function xo(e){const t=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}=?$|[a-z0-9_-]{2}(==)?$)$/i,n=e.split(".");if(n.length!==3)throw new Error("JWT is not valid: not a JWT structure");if(!t.test(n[1]))throw new Error("JWT is not valid: payload is not in base64url format");const r=n[1];return JSON.parse(Qd(r))}async function Xd(e){return await new Promise(t=>{setTimeout(()=>t(null),e)})}function Yd(e,t){return new Promise((n,r)=>{(async()=>{for(let s=0;s<1/0;s++)try{const i=await e(s);if(!t(s,null,i)){n(i);return}}catch(i){if(!t(s,i)){r(i);return}}})()})}function Zd(e){return("0"+e.toString(16)).substr(-2)}function ef(){const e=new Uint32Array(56);if(typeof crypto>"u"){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",n=t.length;let r="";for(let s=0;s<56;s++)r+=t.charAt(Math.floor(Math.random()*n));return r}return crypto.getRandomValues(e),Array.from(e,Zd).join("")}async function tf(e){const t=new TextEncoder().encode(e),n=await crypto.subtle.digest("SHA-256",t),r=new Uint8Array(n);return Array.from(r).map(s=>String.fromCharCode(s)).join("")}function nf(e){return btoa(e).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function rf(e){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),e;const t=await tf(e);return nf(t)}async function hn(e,t,n=!1){const r=ef();let s=r;n&&(s+="/PASSWORD_RECOVERY"),await Ll(e,`${t}-code-verifier`,s);const i=await rf(r);return[i,r===i?"plain":"s256"]}const sf=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function of(e){const t=e.headers.get(zs);if(!t||!t.match(sf))return null;try{return new Date(`${t}T00:00:00.0Z`)}catch{return null}}class wi extends Error{constructor(t,n,r){super(t),this.__isAuthError=!0,this.name="AuthError",this.status=n,this.code=r}}function q(e){return typeof e=="object"&&e!==null&&"__isAuthError"in e}class af extends wi{constructor(t,n,r){super(t,n,r),this.name="AuthApiError",this.status=n,this.code=r}}function lf(e){return q(e)&&e.name==="AuthApiError"}class Il extends wi{constructor(t,n){super(t),this.name="AuthUnknownError",this.originalError=n}}class Zt extends wi{constructor(t,n,r,s){super(t,r,s),this.name=n,this.status=r}}class kt extends Zt{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function cf(e){return q(e)&&e.name==="AuthSessionMissingError"}class vs extends Zt{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class yr extends Zt{constructor(t){super(t,"AuthInvalidCredentialsError",400,void 0)}}class _r extends Zt{constructor(t,n=null){super(t,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function uf(e){return q(e)&&e.name==="AuthImplicitGrantRedirectError"}class Oo extends Zt{constructor(t,n=null){super(t,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class qs extends Zt{constructor(t,n){super(t,"AuthRetryableFetchError",n,void 0)}}function ys(e){return q(e)&&e.name==="AuthRetryableFetchError"}class jo extends Zt{constructor(t,n,r){super(t,"AuthWeakPasswordError",n,"weak_password"),this.reasons=r}}var hf=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(e);s<r.length;s++)t.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(e,r[s])&&(n[r[s]]=e[r[s]]);return n};const Ht=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),df=[502,503,504];async function Po(e){var t;if(!Gd(e))throw new qs(Ht(e),0);if(df.includes(e.status))throw new qs(Ht(e),e.status);let n;try{n=await e.json()}catch(i){throw new Il(Ht(i),i)}let r;const s=of(e);if(s&&s.getTime()>=$l["2024-01-01"].timestamp&&typeof n=="object"&&n&&typeof n.code=="string"?r=n.code:typeof n=="object"&&n&&typeof n.error_code=="string"&&(r=n.error_code),r){if(r==="weak_password")throw new jo(Ht(n),e.status,((t=n.weak_password)===null||t===void 0?void 0:t.reasons)||[]);if(r==="session_not_found")throw new kt}else if(typeof n=="object"&&n&&typeof n.weak_password=="object"&&n.weak_password&&Array.isArray(n.weak_password.reasons)&&n.weak_password.reasons.length&&n.weak_password.reasons.reduce((i,o)=>i&&typeof o=="string",!0))throw new jo(Ht(n),e.status,n.weak_password.reasons);throw new af(Ht(n),e.status||500,r)}const ff=(e,t,n,r)=>{const s={method:e,headers:(t==null?void 0:t.headers)||{}};return e==="GET"?s:(s.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},t==null?void 0:t.headers),s.body=JSON.stringify(r),Object.assign(Object.assign({},s),n))};async function W(e,t,n,r){var s;const i=Object.assign({},r==null?void 0:r.headers);i[zs]||(i[zs]=$l["2024-01-01"].name),r!=null&&r.jwt&&(i.Authorization=`Bearer ${r.jwt}`);const o=(s=r==null?void 0:r.query)!==null&&s!==void 0?s:{};r!=null&&r.redirectTo&&(o.redirect_to=r.redirectTo);const a=Object.keys(o).length?"?"+new URLSearchParams(o).toString():"",l=await pf(e,t,n+a,{headers:i,noResolveJson:r==null?void 0:r.noResolveJson},{},r==null?void 0:r.body);return r!=null&&r.xform?r==null?void 0:r.xform(l):{data:Object.assign({},l),error:null}}async function pf(e,t,n,r,s,i){const o=ff(t,r,s,i);let a;try{a=await e(n,Object.assign({},o))}catch(l){throw console.error(l),new qs(Ht(l),0)}if(a.ok||await Po(a),r!=null&&r.noResolveJson)return a;try{return await a.json()}catch(l){await Po(l)}}function Et(e){var t;let n=null;yf(e)&&(n=Object.assign({},e),e.expires_at||(n.expires_at=Wd(e.expires_in)));const r=(t=e.user)!==null&&t!==void 0?t:e;return{data:{session:n,user:r},error:null}}function Co(e){const t=Et(e);return!t.error&&e.weak_password&&typeof e.weak_password=="object"&&Array.isArray(e.weak_password.reasons)&&e.weak_password.reasons.length&&e.weak_password.message&&typeof e.weak_password.message=="string"&&e.weak_password.reasons.reduce((n,r)=>n&&typeof r=="string",!0)&&(t.data.weak_password=e.weak_password),t}function Ot(e){var t;return{data:{user:(t=e.user)!==null&&t!==void 0?t:e},error:null}}function gf(e){return{data:e,error:null}}function mf(e){const{action_link:t,email_otp:n,hashed_token:r,redirect_to:s,verification_type:i}=e,o=hf(e,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),a={action_link:t,email_otp:n,hashed_token:r,redirect_to:s,verification_type:i},l=Object.assign({},o);return{data:{properties:a,user:l},error:null}}function vf(e){return e}function yf(e){return e.access_token&&e.refresh_token&&e.expires_in}var _f=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(e);s<r.length;s++)t.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(e,r[s])&&(n[r[s]]=e[r[s]]);return n};class bf{constructor({url:t="",headers:n={},fetch:r}){this.url=t,this.headers=n,this.fetch=Rl(r),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)}}async signOut(t,n="global"){try{return await W(this.fetch,"POST",`${this.url}/logout?scope=${n}`,{headers:this.headers,jwt:t,noResolveJson:!0}),{data:null,error:null}}catch(r){if(q(r))return{data:null,error:r};throw r}}async inviteUserByEmail(t,n={}){try{return await W(this.fetch,"POST",`${this.url}/invite`,{body:{email:t,data:n.data},headers:this.headers,redirectTo:n.redirectTo,xform:Ot})}catch(r){if(q(r))return{data:{user:null},error:r};throw r}}async generateLink(t){try{const{options:n}=t,r=_f(t,["options"]),s=Object.assign(Object.assign({},r),n);return"newEmail"in r&&(s.new_email=r==null?void 0:r.newEmail,delete s.newEmail),await W(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:s,headers:this.headers,xform:mf,redirectTo:n==null?void 0:n.redirectTo})}catch(n){if(q(n))return{data:{properties:null,user:null},error:n};throw n}}async createUser(t){try{return await W(this.fetch,"POST",`${this.url}/admin/users`,{body:t,headers:this.headers,xform:Ot})}catch(n){if(q(n))return{data:{user:null},error:n};throw n}}async listUsers(t){var n,r,s,i,o,a,l;try{const u={nextPage:null,lastPage:0,total:0},c=await W(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(r=(n=t==null?void 0:t.page)===null||n===void 0?void 0:n.toString())!==null&&r!==void 0?r:"",per_page:(i=(s=t==null?void 0:t.perPage)===null||s===void 0?void 0:s.toString())!==null&&i!==void 0?i:""},xform:vf});if(c.error)throw c.error;const h=await c.json(),f=(o=c.headers.get("x-total-count"))!==null&&o!==void 0?o:0,g=(l=(a=c.headers.get("link"))===null||a===void 0?void 0:a.split(","))!==null&&l!==void 0?l:[];return g.length>0&&(g.forEach(v=>{const b=parseInt(v.split(";")[0].split("=")[1].substring(0,1)),x=JSON.parse(v.split(";")[1].split("=")[1]);u[`${x}Page`]=b}),u.total=parseInt(f)),{data:Object.assign(Object.assign({},h),u),error:null}}catch(u){if(q(u))return{data:{users:[]},error:u};throw u}}async getUserById(t){try{return await W(this.fetch,"GET",`${this.url}/admin/users/${t}`,{headers:this.headers,xform:Ot})}catch(n){if(q(n))return{data:{user:null},error:n};throw n}}async updateUserById(t,n){try{return await W(this.fetch,"PUT",`${this.url}/admin/users/${t}`,{body:n,headers:this.headers,xform:Ot})}catch(r){if(q(r))return{data:{user:null},error:r};throw r}}async deleteUser(t,n=!1){try{return await W(this.fetch,"DELETE",`${this.url}/admin/users/${t}`,{headers:this.headers,body:{should_soft_delete:n},xform:Ot})}catch(r){if(q(r))return{data:{user:null},error:r};throw r}}async _listFactors(t){try{const{data:n,error:r}=await W(this.fetch,"GET",`${this.url}/admin/users/${t.userId}/factors`,{headers:this.headers,xform:s=>({data:{factors:s},error:null})});return{data:n,error:r}}catch(n){if(q(n))return{data:null,error:n};throw n}}async _deleteFactor(t){try{return{data:await W(this.fetch,"DELETE",`${this.url}/admin/users/${t.userId}/factors/${t.id}`,{headers:this.headers}),error:null}}catch(n){if(q(n))return{data:null,error:n};throw n}}}const wf={getItem:e=>Jn()?globalThis.localStorage.getItem(e):null,setItem:(e,t)=>{Jn()&&globalThis.localStorage.setItem(e,t)},removeItem:e=>{Jn()&&globalThis.localStorage.removeItem(e)}};function $o(e={}){return{getItem:t=>e[t]||null,setItem:(t,n)=>{e[t]=n},removeItem:t=>{delete e[t]}}}function kf(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}const dn={debug:!!(globalThis&&Jn()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class Ul extends Error{constructor(t){super(t),this.isAcquireTimeout=!0}}class Ef extends Ul{}async function Sf(e,t,n){dn.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",e,t);const r=new globalThis.AbortController;return t>0&&setTimeout(()=>{r.abort(),dn.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",e)},t),await Promise.resolve().then(()=>globalThis.navigator.locks.request(e,t===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:r.signal},async s=>{if(s){dn.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",e,s.name);try{return await n()}finally{dn.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",e,s.name)}}else{if(t===0)throw dn.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",e),new Ef(`Acquiring an exclusive Navigator LockManager lock "${e}" immediately failed`);if(dn.debug)try{const i=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(i,null,"  "))}catch(i){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",i)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await n()}}))}kf();const Af={url:qd,storageKey:Vd,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:Hd,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1},Ln=30*1e3,Ro=3;async function Lo(e,t,n){return await n()}class tr{constructor(t){var n,r;this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=tr.nextInstanceID,tr.nextInstanceID+=1,this.instanceID>0&&tt()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const s=Object.assign(Object.assign({},Af),t);if(this.logDebugMessages=!!s.debug,typeof s.debug=="function"&&(this.logger=s.debug),this.persistSession=s.persistSession,this.storageKey=s.storageKey,this.autoRefreshToken=s.autoRefreshToken,this.admin=new bf({url:s.url,headers:s.headers,fetch:s.fetch}),this.url=s.url,this.headers=s.headers,this.fetch=Rl(s.fetch),this.lock=s.lock||Lo,this.detectSessionInUrl=s.detectSessionInUrl,this.flowType=s.flowType,this.hasCustomAuthorizationHeader=s.hasCustomAuthorizationHeader,s.lock?this.lock=s.lock:tt()&&!((n=globalThis==null?void 0:globalThis.navigator)===null||n===void 0)&&n.locks?this.lock=Sf:this.lock=Lo,this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this)},this.persistSession?s.storage?this.storage=s.storage:Jn()?this.storage=wf:(this.memoryStorage={},this.storage=$o(this.memoryStorage)):(this.memoryStorage={},this.storage=$o(this.memoryStorage)),tt()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(i){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",i)}(r=this.broadcastChannel)===null||r===void 0||r.addEventListener("message",async i=>{this._debug("received broadcast notification from other tab or client",i),await this._notifyAllSubscribers(i.data.event,i.data.session,!1)})}this.initialize()}_debug(...t){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${Cl}) ${new Date().toISOString()}`,...t),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var t;try{const n=Kd(window.location.href);let r="none";if(this._isImplicitGrantCallback(n)?r="implicit":await this._isPKCECallback(n)&&(r="pkce"),tt()&&this.detectSessionInUrl&&r!=="none"){const{data:s,error:i}=await this._getSessionFromURL(n,r);if(i){if(this._debug("#_initialize()","error detecting session from URL",i),uf(i)){const l=(t=i.details)===null||t===void 0?void 0:t.code;if(l==="identity_already_exists"||l==="identity_not_found"||l==="single_identity_not_deletable")return{error:i}}return await this._removeSession(),{error:i}}const{session:o,redirectType:a}=s;return this._debug("#_initialize()","detected session in URL",o,"redirect type",a),await this._saveSession(o),setTimeout(async()=>{a==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",o):await this._notifyAllSubscribers("SIGNED_IN",o)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(n){return q(n)?{error:n}:{error:new Il("Unexpected error during initialization",n)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(t){var n,r,s;try{const i=await W(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(r=(n=t==null?void 0:t.options)===null||n===void 0?void 0:n.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:(s=t==null?void 0:t.options)===null||s===void 0?void 0:s.captchaToken}},xform:Et}),{data:o,error:a}=i;if(a||!o)return{data:{user:null,session:null},error:a};const l=o.session,u=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",l)),{data:{user:u,session:l},error:null}}catch(i){if(q(i))return{data:{user:null,session:null},error:i};throw i}}async signUp(t){var n,r,s;try{let i;if("email"in t){const{email:c,password:h,options:f}=t;let g=null,v=null;this.flowType==="pkce"&&([g,v]=await hn(this.storage,this.storageKey)),i=await W(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:f==null?void 0:f.emailRedirectTo,body:{email:c,password:h,data:(n=f==null?void 0:f.data)!==null&&n!==void 0?n:{},gotrue_meta_security:{captcha_token:f==null?void 0:f.captchaToken},code_challenge:g,code_challenge_method:v},xform:Et})}else if("phone"in t){const{phone:c,password:h,options:f}=t;i=await W(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:c,password:h,data:(r=f==null?void 0:f.data)!==null&&r!==void 0?r:{},channel:(s=f==null?void 0:f.channel)!==null&&s!==void 0?s:"sms",gotrue_meta_security:{captcha_token:f==null?void 0:f.captchaToken}},xform:Et})}else throw new yr("You must provide either an email or phone number and a password");const{data:o,error:a}=i;if(a||!o)return{data:{user:null,session:null},error:a};const l=o.session,u=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",l)),{data:{user:u,session:l},error:null}}catch(i){if(q(i))return{data:{user:null,session:null},error:i};throw i}}async signInWithPassword(t){try{let n;if("email"in t){const{email:i,password:o,options:a}=t;n=await W(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:i,password:o,gotrue_meta_security:{captcha_token:a==null?void 0:a.captchaToken}},xform:Co})}else if("phone"in t){const{phone:i,password:o,options:a}=t;n=await W(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:i,password:o,gotrue_meta_security:{captcha_token:a==null?void 0:a.captchaToken}},xform:Co})}else throw new yr("You must provide either an email or phone number and a password");const{data:r,error:s}=n;return s?{data:{user:null,session:null},error:s}:!r||!r.session||!r.user?{data:{user:null,session:null},error:new vs}:(r.session&&(await this._saveSession(r.session),await this._notifyAllSubscribers("SIGNED_IN",r.session)),{data:Object.assign({user:r.user,session:r.session},r.weak_password?{weakPassword:r.weak_password}:null),error:s})}catch(n){if(q(n))return{data:{user:null,session:null},error:n};throw n}}async signInWithOAuth(t){var n,r,s,i;return await this._handleProviderSignIn(t.provider,{redirectTo:(n=t.options)===null||n===void 0?void 0:n.redirectTo,scopes:(r=t.options)===null||r===void 0?void 0:r.scopes,queryParams:(s=t.options)===null||s===void 0?void 0:s.queryParams,skipBrowserRedirect:(i=t.options)===null||i===void 0?void 0:i.skipBrowserRedirect})}async exchangeCodeForSession(t){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(t))}async _exchangeCodeForSession(t){const n=await mr(this.storage,`${this.storageKey}-code-verifier`),[r,s]=(n??"").split("/");try{const{data:i,error:o}=await W(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:t,code_verifier:r},xform:Et});if(await vr(this.storage,`${this.storageKey}-code-verifier`),o)throw o;return!i||!i.session||!i.user?{data:{user:null,session:null,redirectType:null},error:new vs}:(i.session&&(await this._saveSession(i.session),await this._notifyAllSubscribers("SIGNED_IN",i.session)),{data:Object.assign(Object.assign({},i),{redirectType:s??null}),error:o})}catch(i){if(q(i))return{data:{user:null,session:null,redirectType:null},error:i};throw i}}async signInWithIdToken(t){try{const{options:n,provider:r,token:s,access_token:i,nonce:o}=t,a=await W(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:r,id_token:s,access_token:i,nonce:o,gotrue_meta_security:{captcha_token:n==null?void 0:n.captchaToken}},xform:Et}),{data:l,error:u}=a;return u?{data:{user:null,session:null},error:u}:!l||!l.session||!l.user?{data:{user:null,session:null},error:new vs}:(l.session&&(await this._saveSession(l.session),await this._notifyAllSubscribers("SIGNED_IN",l.session)),{data:l,error:u})}catch(n){if(q(n))return{data:{user:null,session:null},error:n};throw n}}async signInWithOtp(t){var n,r,s,i,o;try{if("email"in t){const{email:a,options:l}=t;let u=null,c=null;this.flowType==="pkce"&&([u,c]=await hn(this.storage,this.storageKey));const{error:h}=await W(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:a,data:(n=l==null?void 0:l.data)!==null&&n!==void 0?n:{},create_user:(r=l==null?void 0:l.shouldCreateUser)!==null&&r!==void 0?r:!0,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken},code_challenge:u,code_challenge_method:c},redirectTo:l==null?void 0:l.emailRedirectTo});return{data:{user:null,session:null},error:h}}if("phone"in t){const{phone:a,options:l}=t,{data:u,error:c}=await W(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:a,data:(s=l==null?void 0:l.data)!==null&&s!==void 0?s:{},create_user:(i=l==null?void 0:l.shouldCreateUser)!==null&&i!==void 0?i:!0,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken},channel:(o=l==null?void 0:l.channel)!==null&&o!==void 0?o:"sms"}});return{data:{user:null,session:null,messageId:u==null?void 0:u.message_id},error:c}}throw new yr("You must provide either an email or phone number.")}catch(a){if(q(a))return{data:{user:null,session:null},error:a};throw a}}async verifyOtp(t){var n,r;try{let s,i;"options"in t&&(s=(n=t.options)===null||n===void 0?void 0:n.redirectTo,i=(r=t.options)===null||r===void 0?void 0:r.captchaToken);const{data:o,error:a}=await W(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},t),{gotrue_meta_security:{captcha_token:i}}),redirectTo:s,xform:Et});if(a)throw a;if(!o)throw new Error("An error occurred on token verification.");const l=o.session,u=o.user;return l!=null&&l.access_token&&(await this._saveSession(l),await this._notifyAllSubscribers(t.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",l)),{data:{user:u,session:l},error:null}}catch(s){if(q(s))return{data:{user:null,session:null},error:s};throw s}}async signInWithSSO(t){var n,r,s;try{let i=null,o=null;return this.flowType==="pkce"&&([i,o]=await hn(this.storage,this.storageKey)),await W(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in t?{provider_id:t.providerId}:null),"domain"in t?{domain:t.domain}:null),{redirect_to:(r=(n=t.options)===null||n===void 0?void 0:n.redirectTo)!==null&&r!==void 0?r:void 0}),!((s=t==null?void 0:t.options)===null||s===void 0)&&s.captchaToken?{gotrue_meta_security:{captcha_token:t.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:i,code_challenge_method:o}),headers:this.headers,xform:gf})}catch(i){if(q(i))return{data:null,error:i};throw i}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async t=>{const{data:{session:n},error:r}=t;if(r)throw r;if(!n)throw new kt;const{error:s}=await W(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:n.access_token});return{data:{user:null,session:null},error:s}})}catch(t){if(q(t))return{data:{user:null,session:null},error:t};throw t}}async resend(t){try{const n=`${this.url}/resend`;if("email"in t){const{email:r,type:s,options:i}=t,{error:o}=await W(this.fetch,"POST",n,{headers:this.headers,body:{email:r,type:s,gotrue_meta_security:{captcha_token:i==null?void 0:i.captchaToken}},redirectTo:i==null?void 0:i.emailRedirectTo});return{data:{user:null,session:null},error:o}}else if("phone"in t){const{phone:r,type:s,options:i}=t,{data:o,error:a}=await W(this.fetch,"POST",n,{headers:this.headers,body:{phone:r,type:s,gotrue_meta_security:{captcha_token:i==null?void 0:i.captchaToken}}});return{data:{user:null,session:null,messageId:o==null?void 0:o.message_id},error:a}}throw new yr("You must provide either an email or phone number and a type")}catch(n){if(q(n))return{data:{user:null,session:null},error:n};throw n}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async t=>t))}async _acquireLock(t,n){this._debug("#_acquireLock","begin",t);try{if(this.lockAcquired){const r=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),s=(async()=>(await r,await n()))();return this.pendingInLock.push((async()=>{try{await s}catch{}})()),s}return await this.lock(`lock:${this.storageKey}`,t,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const r=n();for(this.pendingInLock.push((async()=>{try{await r}catch{}})()),await r;this.pendingInLock.length;){const s=[...this.pendingInLock];await Promise.all(s),this.pendingInLock.splice(0,s.length)}return await r}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(t){this._debug("#_useSession","begin");try{const n=await this.__loadSession();return await t(n)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let t=null;const n=await mr(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",n),n!==null&&(this._isValidSession(n)?t=n:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!t)return{data:{session:null},error:null};const r=t.expires_at?t.expires_at<=Date.now()/1e3:!1;if(this._debug("#__loadSession()",`session has${r?"":" not"} expired`,"expires_at",t.expires_at),!r){if(this.storage.isServer){let o=this.suppressGetSessionWarning;t=new Proxy(t,{get:(a,l,u)=>(!o&&l==="user"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),o=!0,this.suppressGetSessionWarning=!0),Reflect.get(a,l,u))})}return{data:{session:t},error:null}}const{session:s,error:i}=await this._callRefreshToken(t.refresh_token);return i?{data:{session:null},error:i}:{data:{session:s},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(t){return t?await this._getUser(t):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(t){try{return t?await W(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:t,xform:Ot}):await this._useSession(async n=>{var r,s,i;const{data:o,error:a}=n;if(a)throw a;return!(!((r=o.session)===null||r===void 0)&&r.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new kt}:await W(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(i=(s=o.session)===null||s===void 0?void 0:s.access_token)!==null&&i!==void 0?i:void 0,xform:Ot})})}catch(n){if(q(n))return cf(n)&&(await this._removeSession(),await vr(this.storage,`${this.storageKey}-code-verifier`)),{data:{user:null},error:n};throw n}}async updateUser(t,n={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(t,n))}async _updateUser(t,n={}){try{return await this._useSession(async r=>{const{data:s,error:i}=r;if(i)throw i;if(!s.session)throw new kt;const o=s.session;let a=null,l=null;this.flowType==="pkce"&&t.email!=null&&([a,l]=await hn(this.storage,this.storageKey));const{data:u,error:c}=await W(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:n==null?void 0:n.emailRedirectTo,body:Object.assign(Object.assign({},t),{code_challenge:a,code_challenge_method:l}),jwt:o.access_token,xform:Ot});if(c)throw c;return o.user=u.user,await this._saveSession(o),await this._notifyAllSubscribers("USER_UPDATED",o),{data:{user:o.user},error:null}})}catch(r){if(q(r))return{data:{user:null},error:r};throw r}}_decodeJWT(t){return xo(t)}async setSession(t){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(t))}async _setSession(t){try{if(!t.access_token||!t.refresh_token)throw new kt;const n=Date.now()/1e3;let r=n,s=!0,i=null;const o=xo(t.access_token);if(o.exp&&(r=o.exp,s=r<=n),s){const{session:a,error:l}=await this._callRefreshToken(t.refresh_token);if(l)return{data:{user:null,session:null},error:l};if(!a)return{data:{user:null,session:null},error:null};i=a}else{const{data:a,error:l}=await this._getUser(t.access_token);if(l)throw l;i={access_token:t.access_token,refresh_token:t.refresh_token,user:a.user,token_type:"bearer",expires_in:r-n,expires_at:r},await this._saveSession(i),await this._notifyAllSubscribers("SIGNED_IN",i)}return{data:{user:i.user,session:i},error:null}}catch(n){if(q(n))return{data:{session:null,user:null},error:n};throw n}}async refreshSession(t){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(t))}async _refreshSession(t){try{return await this._useSession(async n=>{var r;if(!t){const{data:o,error:a}=n;if(a)throw a;t=(r=o.session)!==null&&r!==void 0?r:void 0}if(!(t!=null&&t.refresh_token))throw new kt;const{session:s,error:i}=await this._callRefreshToken(t.refresh_token);return i?{data:{user:null,session:null},error:i}:s?{data:{user:s.user,session:s},error:null}:{data:{user:null,session:null},error:null}})}catch(n){if(q(n))return{data:{user:null,session:null},error:n};throw n}}async _getSessionFromURL(t,n){try{if(!tt())throw new _r("No browser detected.");if(t.error||t.error_description||t.error_code)throw new _r(t.error_description||"Error in URL with unspecified error_description",{error:t.error||"unspecified_error",code:t.error_code||"unspecified_code"});switch(n){case"implicit":if(this.flowType==="pkce")throw new Oo("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new _r("Not a valid implicit grant flow url.");break;default:}if(n==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!t.code)throw new Oo("No code detected.");const{data:w,error:E}=await this._exchangeCodeForSession(t.code);if(E)throw E;const T=new URL(window.location.href);return T.searchParams.delete("code"),window.history.replaceState(window.history.state,"",T.toString()),{data:{session:w.session,redirectType:null},error:null}}const{provider_token:r,provider_refresh_token:s,access_token:i,refresh_token:o,expires_in:a,expires_at:l,token_type:u}=t;if(!i||!a||!o||!u)throw new _r("No session defined in URL");const c=Math.round(Date.now()/1e3),h=parseInt(a);let f=c+h;l&&(f=parseInt(l));const g=f-c;g*1e3<=Ln&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${g}s, should have been closer to ${h}s`);const v=f-h;c-v>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",v,f,c):c-v<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",v,f,c);const{data:b,error:x}=await this._getUser(i);if(x)throw x;const $={provider_token:r,provider_refresh_token:s,access_token:i,expires_in:h,expires_at:f,refresh_token:o,token_type:u,user:b.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:$,redirectType:t.type},error:null}}catch(r){if(q(r))return{data:{session:null,redirectType:null},error:r};throw r}}_isImplicitGrantCallback(t){return!!(t.access_token||t.error_description)}async _isPKCECallback(t){const n=await mr(this.storage,`${this.storageKey}-code-verifier`);return!!(t.code&&n)}async signOut(t={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(t))}async _signOut({scope:t}={scope:"global"}){return await this._useSession(async n=>{var r;const{data:s,error:i}=n;if(i)return{error:i};const o=(r=s.session)===null||r===void 0?void 0:r.access_token;if(o){const{error:a}=await this.admin.signOut(o,t);if(a&&!(lf(a)&&(a.status===404||a.status===401||a.status===403)))return{error:a}}return t!=="others"&&(await this._removeSession(),await vr(this.storage,`${this.storageKey}-code-verifier`)),{error:null}})}onAuthStateChange(t){const n=Jd(),r={id:n,callback:t,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",n),this.stateChangeEmitters.delete(n)}};return this._debug("#onAuthStateChange()","registered callback with id",n),this.stateChangeEmitters.set(n,r),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(n)})))(),{data:{subscription:r}}}async _emitInitialSession(t){return await this._useSession(async n=>{var r,s;try{const{data:{session:i},error:o}=n;if(o)throw o;await((r=this.stateChangeEmitters.get(t))===null||r===void 0?void 0:r.callback("INITIAL_SESSION",i)),this._debug("INITIAL_SESSION","callback id",t,"session",i)}catch(i){await((s=this.stateChangeEmitters.get(t))===null||s===void 0?void 0:s.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",t,"error",i),console.error(i)}})}async resetPasswordForEmail(t,n={}){let r=null,s=null;this.flowType==="pkce"&&([r,s]=await hn(this.storage,this.storageKey,!0));try{return await W(this.fetch,"POST",`${this.url}/recover`,{body:{email:t,code_challenge:r,code_challenge_method:s,gotrue_meta_security:{captcha_token:n.captchaToken}},headers:this.headers,redirectTo:n.redirectTo})}catch(i){if(q(i))return{data:null,error:i};throw i}}async getUserIdentities(){var t;try{const{data:n,error:r}=await this.getUser();if(r)throw r;return{data:{identities:(t=n.user.identities)!==null&&t!==void 0?t:[]},error:null}}catch(n){if(q(n))return{data:null,error:n};throw n}}async linkIdentity(t){var n;try{const{data:r,error:s}=await this._useSession(async i=>{var o,a,l,u,c;const{data:h,error:f}=i;if(f)throw f;const g=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,t.provider,{redirectTo:(o=t.options)===null||o===void 0?void 0:o.redirectTo,scopes:(a=t.options)===null||a===void 0?void 0:a.scopes,queryParams:(l=t.options)===null||l===void 0?void 0:l.queryParams,skipBrowserRedirect:!0});return await W(this.fetch,"GET",g,{headers:this.headers,jwt:(c=(u=h.session)===null||u===void 0?void 0:u.access_token)!==null&&c!==void 0?c:void 0})});if(s)throw s;return tt()&&!(!((n=t.options)===null||n===void 0)&&n.skipBrowserRedirect)&&window.location.assign(r==null?void 0:r.url),{data:{provider:t.provider,url:r==null?void 0:r.url},error:null}}catch(r){if(q(r))return{data:{provider:t.provider,url:null},error:r};throw r}}async unlinkIdentity(t){try{return await this._useSession(async n=>{var r,s;const{data:i,error:o}=n;if(o)throw o;return await W(this.fetch,"DELETE",`${this.url}/user/identities/${t.identity_id}`,{headers:this.headers,jwt:(s=(r=i.session)===null||r===void 0?void 0:r.access_token)!==null&&s!==void 0?s:void 0})})}catch(n){if(q(n))return{data:null,error:n};throw n}}async _refreshAccessToken(t){const n=`#_refreshAccessToken(${t.substring(0,5)}...)`;this._debug(n,"begin");try{const r=Date.now();return await Yd(async s=>(s>0&&await Xd(200*Math.pow(2,s-1)),this._debug(n,"refreshing attempt",s),await W(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:t},headers:this.headers,xform:Et})),(s,i)=>{const o=200*Math.pow(2,s);return i&&ys(i)&&Date.now()+o-r<Ln})}catch(r){if(this._debug(n,"error",r),q(r))return{data:{session:null,user:null},error:r};throw r}finally{this._debug(n,"end")}}_isValidSession(t){return typeof t=="object"&&t!==null&&"access_token"in t&&"refresh_token"in t&&"expires_at"in t}async _handleProviderSignIn(t,n){const r=await this._getUrlForProvider(`${this.url}/authorize`,t,{redirectTo:n.redirectTo,scopes:n.scopes,queryParams:n.queryParams});return this._debug("#_handleProviderSignIn()","provider",t,"options",n,"url",r),tt()&&!n.skipBrowserRedirect&&window.location.assign(r),{data:{provider:t,url:r},error:null}}async _recoverAndRefresh(){var t;const n="#_recoverAndRefresh()";this._debug(n,"begin");try{const r=await mr(this.storage,this.storageKey);if(this._debug(n,"session from storage",r),!this._isValidSession(r)){this._debug(n,"session is not valid"),r!==null&&await this._removeSession();return}const s=Math.round(Date.now()/1e3),i=((t=r.expires_at)!==null&&t!==void 0?t:1/0)<s+To;if(this._debug(n,`session has${i?"":" not"} expired with margin of ${To}s`),i){if(this.autoRefreshToken&&r.refresh_token){const{error:o}=await this._callRefreshToken(r.refresh_token);o&&(console.error(o),ys(o)||(this._debug(n,"refresh failed with a non-retryable error, removing the session",o),await this._removeSession()))}}else await this._notifyAllSubscribers("SIGNED_IN",r)}catch(r){this._debug(n,"error",r),console.error(r);return}finally{this._debug(n,"end")}}async _callRefreshToken(t){var n,r;if(!t)throw new kt;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const s=`#_callRefreshToken(${t.substring(0,5)}...)`;this._debug(s,"begin");try{this.refreshingDeferred=new Zr;const{data:i,error:o}=await this._refreshAccessToken(t);if(o)throw o;if(!i.session)throw new kt;await this._saveSession(i.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",i.session);const a={session:i.session,error:null};return this.refreshingDeferred.resolve(a),a}catch(i){if(this._debug(s,"error",i),q(i)){const o={session:null,error:i};return ys(i)||await this._removeSession(),(n=this.refreshingDeferred)===null||n===void 0||n.resolve(o),o}throw(r=this.refreshingDeferred)===null||r===void 0||r.reject(i),i}finally{this.refreshingDeferred=null,this._debug(s,"end")}}async _notifyAllSubscribers(t,n,r=!0){const s=`#_notifyAllSubscribers(${t})`;this._debug(s,"begin",n,`broadcast = ${r}`);try{this.broadcastChannel&&r&&this.broadcastChannel.postMessage({event:t,session:n});const i=[],o=Array.from(this.stateChangeEmitters.values()).map(async a=>{try{await a.callback(t,n)}catch(l){i.push(l)}});if(await Promise.all(o),i.length>0){for(let a=0;a<i.length;a+=1)console.error(i[a]);throw i[0]}}finally{this._debug(s,"end")}}async _saveSession(t){this._debug("#_saveSession()",t),this.suppressGetSessionWarning=!0,await Ll(this.storage,this.storageKey,t)}async _removeSession(){this._debug("#_removeSession()"),await vr(this.storage,this.storageKey),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const t=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{t&&tt()&&window!=null&&window.removeEventListener&&window.removeEventListener("visibilitychange",t)}catch(n){console.error("removing visibilitychange callback failed",n)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const t=setInterval(()=>this._autoRefreshTokenTick(),Ln);this.autoRefreshTicker=t,t&&typeof t=="object"&&typeof t.unref=="function"?t.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(t),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const t=this.autoRefreshTicker;this.autoRefreshTicker=null,t&&clearInterval(t)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const t=Date.now();try{return await this._useSession(async n=>{const{data:{session:r}}=n;if(!r||!r.refresh_token||!r.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const s=Math.floor((r.expires_at*1e3-t)/Ln);this._debug("#_autoRefreshTokenTick()",`access token expires in ${s} ticks, a tick lasts ${Ln}ms, refresh threshold is ${Ro} ticks`),s<=Ro&&await this._callRefreshToken(r.refresh_token)})}catch(n){console.error("Auto refresh tick failed with error. This is likely a transient error.",n)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(t){if(t.isAcquireTimeout||t instanceof Ul)this._debug("auto refresh token tick lock not available");else throw t}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!tt()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(t){console.error("_handleVisibilityChange",t)}}async _onVisibilityChanged(t){const n=`#_onVisibilityChanged(${t})`;this._debug(n,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),t||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(n,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(t,n,r){const s=[`provider=${encodeURIComponent(n)}`];if(r!=null&&r.redirectTo&&s.push(`redirect_to=${encodeURIComponent(r.redirectTo)}`),r!=null&&r.scopes&&s.push(`scopes=${encodeURIComponent(r.scopes)}`),this.flowType==="pkce"){const[i,o]=await hn(this.storage,this.storageKey),a=new URLSearchParams({code_challenge:`${encodeURIComponent(i)}`,code_challenge_method:`${encodeURIComponent(o)}`});s.push(a.toString())}if(r!=null&&r.queryParams){const i=new URLSearchParams(r.queryParams);s.push(i.toString())}return r!=null&&r.skipBrowserRedirect&&s.push(`skip_http_redirect=${r.skipBrowserRedirect}`),`${t}?${s.join("&")}`}async _unenroll(t){try{return await this._useSession(async n=>{var r;const{data:s,error:i}=n;return i?{data:null,error:i}:await W(this.fetch,"DELETE",`${this.url}/factors/${t.factorId}`,{headers:this.headers,jwt:(r=s==null?void 0:s.session)===null||r===void 0?void 0:r.access_token})})}catch(n){if(q(n))return{data:null,error:n};throw n}}async _enroll(t){try{return await this._useSession(async n=>{var r,s;const{data:i,error:o}=n;if(o)return{data:null,error:o};const a=Object.assign({friendly_name:t.friendlyName,factor_type:t.factorType},t.factorType==="phone"?{phone:t.phone}:{issuer:t.issuer}),{data:l,error:u}=await W(this.fetch,"POST",`${this.url}/factors`,{body:a,headers:this.headers,jwt:(r=i==null?void 0:i.session)===null||r===void 0?void 0:r.access_token});return u?{data:null,error:u}:(t.factorType==="totp"&&!((s=l==null?void 0:l.totp)===null||s===void 0)&&s.qr_code&&(l.totp.qr_code=`data:image/svg+xml;utf-8,${l.totp.qr_code}`),{data:l,error:null})})}catch(n){if(q(n))return{data:null,error:n};throw n}}async _verify(t){return this._acquireLock(-1,async()=>{try{return await this._useSession(async n=>{var r;const{data:s,error:i}=n;if(i)return{data:null,error:i};const{data:o,error:a}=await W(this.fetch,"POST",`${this.url}/factors/${t.factorId}/verify`,{body:{code:t.code,challenge_id:t.challengeId},headers:this.headers,jwt:(r=s==null?void 0:s.session)===null||r===void 0?void 0:r.access_token});return a?{data:null,error:a}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+o.expires_in},o)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",o),{data:o,error:a})})}catch(n){if(q(n))return{data:null,error:n};throw n}})}async _challenge(t){return this._acquireLock(-1,async()=>{try{return await this._useSession(async n=>{var r;const{data:s,error:i}=n;return i?{data:null,error:i}:await W(this.fetch,"POST",`${this.url}/factors/${t.factorId}/challenge`,{body:{channel:t.channel},headers:this.headers,jwt:(r=s==null?void 0:s.session)===null||r===void 0?void 0:r.access_token})})}catch(n){if(q(n))return{data:null,error:n};throw n}})}async _challengeAndVerify(t){const{data:n,error:r}=await this._challenge({factorId:t.factorId});return r?{data:null,error:r}:await this._verify({factorId:t.factorId,challengeId:n.id,code:t.code})}async _listFactors(){const{data:{user:t},error:n}=await this.getUser();if(n)return{data:null,error:n};const r=(t==null?void 0:t.factors)||[],s=r.filter(o=>o.factor_type==="totp"&&o.status==="verified"),i=r.filter(o=>o.factor_type==="phone"&&o.status==="verified");return{data:{all:r,totp:s,phone:i},error:null}}async _getAuthenticatorAssuranceLevel(){return this._acquireLock(-1,async()=>await this._useSession(async t=>{var n,r;const{data:{session:s},error:i}=t;if(i)return{data:null,error:i};if(!s)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const o=this._decodeJWT(s.access_token);let a=null;o.aal&&(a=o.aal);let l=a;((r=(n=s.user.factors)===null||n===void 0?void 0:n.filter(c=>c.status==="verified"))!==null&&r!==void 0?r:[]).length>0&&(l="aal2");const u=o.amr||[];return{data:{currentLevel:a,nextLevel:l,currentAuthenticationMethods:u},error:null}}))}}tr.nextInstanceID=0;const Tf=tr;class xf extends Tf{constructor(t){super(t)}}var Of=function(e,t,n,r){function s(i){return i instanceof n?i:new n(function(o){o(i)})}return new(n||(n=Promise))(function(i,o){function a(c){try{u(r.next(c))}catch(h){o(h)}}function l(c){try{u(r.throw(c))}catch(h){o(h)}}function u(c){c.done?i(c.value):s(c.value).then(a,l)}u((r=r.apply(e,[])).next())})};class jf{constructor(t,n,r){var s,i,o;if(this.supabaseUrl=t,this.supabaseKey=n,!t)throw new Error("supabaseUrl is required.");if(!n)throw new Error("supabaseKey is required.");const a=Bd(t);this.realtimeUrl=`${a}/realtime/v1`.replace(/^http/i,"ws"),this.authUrl=`${a}/auth/v1`,this.storageUrl=`${a}/storage/v1`,this.functionsUrl=`${a}/functions/v1`;const l=`sb-${new URL(this.authUrl).hostname.split(".")[0]}-auth-token`,u={db:Rd,realtime:Id,auth:Object.assign(Object.assign({},Ld),{storageKey:l}),global:$d},c=zd(r??{},u);this.storageKey=(s=c.auth.storageKey)!==null&&s!==void 0?s:"",this.headers=(i=c.global.headers)!==null&&i!==void 0?i:{},c.accessToken?(this.accessToken=c.accessToken,this.auth=new Proxy({},{get:(h,f)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(f)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((o=c.auth)!==null&&o!==void 0?o:{},this.headers,c.global.fetch),this.fetch=Md(n,this._getAccessToken.bind(this),c.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},c.realtime)),this.rest=new ed(`${a}/rest/v1`,{headers:this.headers,schema:c.db.schema,fetch:this.fetch}),c.accessToken||this._listenForAuthEvents()}get functions(){return new Fh(this.functionsUrl,{headers:this.headers,customFetch:this.fetch})}get storage(){return new jd(this.storageUrl,this.headers,this.fetch)}from(t){return this.rest.from(t)}schema(t){return this.rest.schema(t)}rpc(t,n={},r={}){return this.rest.rpc(t,n,r)}channel(t,n={config:{}}){return this.realtime.channel(t,n)}getChannels(){return this.realtime.getChannels()}removeChannel(t){return this.realtime.removeChannel(t)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){var t,n;return Of(this,void 0,void 0,function*(){if(this.accessToken)return yield this.accessToken();const{data:r}=yield this.auth.getSession();return(n=(t=r.session)===null||t===void 0?void 0:t.access_token)!==null&&n!==void 0?n:null})}_initSupabaseAuthClient({autoRefreshToken:t,persistSession:n,detectSessionInUrl:r,storage:s,storageKey:i,flowType:o,lock:a,debug:l},u,c){var h;const f={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new xf({url:this.authUrl,headers:Object.assign(Object.assign({},f),u),storageKey:i,autoRefreshToken:t,persistSession:n,detectSessionInUrl:r,storage:s,flowType:o,lock:a,debug:l,fetch:c,hasCustomAuthorizationHeader:(h="Authorization"in this.headers)!==null&&h!==void 0?h:!1})}_initRealtimeClient(t){return new gd(this.realtimeUrl,Object.assign(Object.assign({},t),{params:Object.assign({apikey:this.supabaseKey},t==null?void 0:t.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((t,n)=>{this._handleTokenChanged(t,"CLIENT",n==null?void 0:n.access_token)})}_handleTokenChanged(t,n,r){(t==="TOKEN_REFRESHED"||t==="SIGNED_IN")&&this.changedAccessToken!==r?this.changedAccessToken=r:t==="SIGNED_OUT"&&(this.realtime.setAuth(),n=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const Pf=(e,t,n)=>new jf(e,t,n),Cf="https://kawdmbqsvrrmvhymflnx.supabase.co",$f="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Imthd2RtYnFzdnJybXZoeW1mbG54Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3MzQxNjQ2NDEsImV4cCI6MjA0OTc0MDY0MX0.wfcQk1sq6ft1ZqmfrtavRahgrb87nWP4pU9loYiNtjU",le=Pf(Cf,$f);/*!
* vue-router v4.5.0
* (c) 2024 Eduardo San Martin Morote
* @license MIT
*/const pn=typeof document<"u";function Dl(e){return typeof e=="object"||"displayName"in e||"props"in e||"__vccOpts"in e}function Rf(e){return e.__esModule||e[Symbol.toStringTag]==="Module"||e.default&&Dl(e.default)}const Q=Object.assign;function _s(e,t){const n={};for(const r in t){const s=t[r];n[r]=Ye(s)?s.map(e):e(s)}return n}const Kn=()=>{},Ye=Array.isArray,Nl=/#/g,Lf=/&/g,If=/\//g,Uf=/=/g,Df=/\?/g,Ml=/\+/g,Nf=/%5B/g,Mf=/%5D/g,Fl=/%5E/g,Ff=/%60/g,Bl=/%7B/g,Bf=/%7C/g,zl=/%7D/g,zf=/%20/g;function ki(e){return encodeURI(""+e).replace(Bf,"|").replace(Nf,"[").replace(Mf,"]")}function qf(e){return ki(e).replace(Bl,"{").replace(zl,"}").replace(Fl,"^")}function Vs(e){return ki(e).replace(Ml,"%2B").replace(zf,"+").replace(Nl,"%23").replace(Lf,"%26").replace(Ff,"`").replace(Bl,"{").replace(zl,"}").replace(Fl,"^")}function Vf(e){return Vs(e).replace(Uf,"%3D")}function Hf(e){return ki(e).replace(Nl,"%23").replace(Df,"%3F")}function Wf(e){return e==null?"":Hf(e).replace(If,"%2F")}function nr(e){try{return decodeURIComponent(""+e)}catch{}return""+e}const Jf=/\/$/,Kf=e=>e.replace(Jf,"");function bs(e,t,n="/"){let r,s={},i="",o="";const a=t.indexOf("#");let l=t.indexOf("?");return a<l&&a>=0&&(l=-1),l>-1&&(r=t.slice(0,l),i=t.slice(l+1,a>-1?a:t.length),s=e(i)),a>-1&&(r=r||t.slice(0,a),o=t.slice(a,t.length)),r=Yf(r??t,n),{fullPath:r+(i&&"?")+i+o,path:r,query:s,hash:nr(o)}}function Gf(e,t){const n=t.query?e(t.query):"";return t.path+(n&&"?")+n+(t.hash||"")}function Io(e,t){return!t||!e.toLowerCase().startsWith(t.toLowerCase())?e:e.slice(t.length)||"/"}function Qf(e,t,n){const r=t.matched.length-1,s=n.matched.length-1;return r>-1&&r===s&&Sn(t.matched[r],n.matched[s])&&ql(t.params,n.params)&&e(t.query)===e(n.query)&&t.hash===n.hash}function Sn(e,t){return(e.aliasOf||e)===(t.aliasOf||t)}function ql(e,t){if(Object.keys(e).length!==Object.keys(t).length)return!1;for(const n in e)if(!Xf(e[n],t[n]))return!1;return!0}function Xf(e,t){return Ye(e)?Uo(e,t):Ye(t)?Uo(t,e):e===t}function Uo(e,t){return Ye(t)?e.length===t.length&&e.every((n,r)=>n===t[r]):e.length===1&&e[0]===t}function Yf(e,t){if(e.startsWith("/"))return e;if(!e)return t;const n=t.split("/"),r=e.split("/"),s=r[r.length-1];(s===".."||s===".")&&r.push("");let i=n.length-1,o,a;for(o=0;o<r.length;o++)if(a=r[o],a!==".")if(a==="..")i>1&&i--;else break;return n.slice(0,i).join("/")+"/"+r.slice(o).join("/")}const bt={path:"/",name:void 0,params:{},query:{},hash:"",fullPath:"/",matched:[],meta:{},redirectedFrom:void 0};var rr;(function(e){e.pop="pop",e.push="push"})(rr||(rr={}));var Gn;(function(e){e.back="back",e.forward="forward",e.unknown=""})(Gn||(Gn={}));function Zf(e){if(!e)if(pn){const t=document.querySelector("base");e=t&&t.getAttribute("href")||"/",e=e.replace(/^\w+:\/\/[^\/]+/,"")}else e="/";return e[0]!=="/"&&e[0]!=="#"&&(e="/"+e),Kf(e)}const ep=/^[^#]+#/;function tp(e,t){return e.replace(ep,"#")+t}function np(e,t){const n=document.documentElement.getBoundingClientRect(),r=e.getBoundingClientRect();return{behavior:t.behavior,left:r.left-n.left-(t.left||0),top:r.top-n.top-(t.top||0)}}const es=()=>({left:window.scrollX,top:window.scrollY});function rp(e){let t;if("el"in e){const n=e.el,r=typeof n=="string"&&n.startsWith("#"),s=typeof n=="string"?r?document.getElementById(n.slice(1)):document.querySelector(n):n;if(!s)return;t=np(s,e)}else t=e;"scrollBehavior"in document.documentElement.style?window.scrollTo(t):window.scrollTo(t.left!=null?t.left:window.scrollX,t.top!=null?t.top:window.scrollY)}function Do(e,t){return(history.state?history.state.position-t:-1)+e}const Hs=new Map;function sp(e,t){Hs.set(e,t)}function ip(e){const t=Hs.get(e);return Hs.delete(e),t}let op=()=>location.protocol+"//"+location.host;function Vl(e,t){const{pathname:n,search:r,hash:s}=t,i=e.indexOf("#");if(i>-1){let o=s.includes(e.slice(i))?e.slice(i).length:1,a=s.slice(o);return a[0]!=="/"&&(a="/"+a),Io(a,"")}return Io(n,e)+r+s}function ap(e,t,n,r){let s=[],i=[],o=null;const a=({state:f})=>{const g=Vl(e,location),v=n.value,b=t.value;let x=0;if(f){if(n.value=g,t.value=f,o&&o===v){o=null;return}x=b?f.position-b.position:0}else r(g);s.forEach($=>{$(n.value,v,{delta:x,type:rr.pop,direction:x?x>0?Gn.forward:Gn.back:Gn.unknown})})};function l(){o=n.value}function u(f){s.push(f);const g=()=>{const v=s.indexOf(f);v>-1&&s.splice(v,1)};return i.push(g),g}function c(){const{history:f}=window;f.state&&f.replaceState(Q({},f.state,{scroll:es()}),"")}function h(){for(const f of i)f();i=[],window.removeEventListener("popstate",a),window.removeEventListener("beforeunload",c)}return window.addEventListener("popstate",a),window.addEventListener("beforeunload",c,{passive:!0}),{pauseListeners:l,listen:u,destroy:h}}function No(e,t,n,r=!1,s=!1){return{back:e,current:t,forward:n,replaced:r,position:window.history.length,scroll:s?es():null}}function lp(e){const{history:t,location:n}=window,r={value:Vl(e,n)},s={value:t.state};s.value||i(r.value,{back:null,current:r.value,forward:null,position:t.length-1,replaced:!0,scroll:null},!0);function i(l,u,c){const h=e.indexOf("#"),f=h>-1?(n.host&&document.querySelector("base")?e:e.slice(h))+l:op()+e+l;try{t[c?"replaceState":"pushState"](u,"",f),s.value=u}catch(g){console.error(g),n[c?"replace":"assign"](f)}}function o(l,u){const c=Q({},t.state,No(s.value.back,l,s.value.forward,!0),u,{position:s.value.position});i(l,c,!0),r.value=l}function a(l,u){const c=Q({},s.value,t.state,{forward:l,scroll:es()});i(c.current,c,!0);const h=Q({},No(r.value,l,null),{position:c.position+1},u);i(l,h,!1),r.value=l}return{location:r,state:s,push:a,replace:o}}function cp(e){e=Zf(e);const t=lp(e),n=ap(e,t.state,t.location,t.replace);function r(i,o=!0){o||n.pauseListeners(),history.go(i)}const s=Q({location:"",base:e,go:r,createHref:tp.bind(null,e)},t,n);return Object.defineProperty(s,"location",{enumerable:!0,get:()=>t.location.value}),Object.defineProperty(s,"state",{enumerable:!0,get:()=>t.state.value}),s}function up(e){return typeof e=="string"||e&&typeof e=="object"}function Hl(e){return typeof e=="string"||typeof e=="symbol"}const Wl=Symbol("");var Mo;(function(e){e[e.aborted=4]="aborted",e[e.cancelled=8]="cancelled",e[e.duplicated=16]="duplicated"})(Mo||(Mo={}));function An(e,t){return Q(new Error,{type:e,[Wl]:!0},t)}function dt(e,t){return e instanceof Error&&Wl in e&&(t==null||!!(e.type&t))}const Fo="[^/]+?",hp={sensitive:!1,strict:!1,start:!0,end:!0},dp=/[.+*?^${}()[\]/\\]/g;function fp(e,t){const n=Q({},hp,t),r=[];let s=n.start?"^":"";const i=[];for(const u of e){const c=u.length?[]:[90];n.strict&&!u.length&&(s+="/");for(let h=0;h<u.length;h++){const f=u[h];let g=40+(n.sensitive?.25:0);if(f.type===0)h||(s+="/"),s+=f.value.replace(dp,"\\$&"),g+=40;else if(f.type===1){const{value:v,repeatable:b,optional:x,regexp:$}=f;i.push({name:v,repeatable:b,optional:x});const w=$||Fo;if(w!==Fo){g+=10;try{new RegExp(`(${w})`)}catch(T){throw new Error(`Invalid custom RegExp for param "${v}" (${w}): `+T.message)}}let E=b?`((?:${w})(?:/(?:${w}))*)`:`(${w})`;h||(E=x&&u.length<2?`(?:/${E})`:"/"+E),x&&(E+="?"),s+=E,g+=20,x&&(g+=-8),b&&(g+=-20),w===".*"&&(g+=-50)}c.push(g)}r.push(c)}if(n.strict&&n.end){const u=r.length-1;r[u][r[u].length-1]+=.7000000000000001}n.strict||(s+="/?"),n.end?s+="$":n.strict&&!s.endsWith("/")&&(s+="(?:/|$)");const o=new RegExp(s,n.sensitive?"":"i");function a(u){const c=u.match(o),h={};if(!c)return null;for(let f=1;f<c.length;f++){const g=c[f]||"",v=i[f-1];h[v.name]=g&&v.repeatable?g.split("/"):g}return h}function l(u){let c="",h=!1;for(const f of e){(!h||!c.endsWith("/"))&&(c+="/"),h=!1;for(const g of f)if(g.type===0)c+=g.value;else if(g.type===1){const{value:v,repeatable:b,optional:x}=g,$=v in u?u[v]:"";if(Ye($)&&!b)throw new Error(`Provided param "${v}" is an array but it is not repeatable (* or + modifiers)`);const w=Ye($)?$.join("/"):$;if(!w)if(x)f.length<2&&(c.endsWith("/")?c=c.slice(0,-1):h=!0);else throw new Error(`Missing required param "${v}"`);c+=w}}return c||"/"}return{re:o,score:r,keys:i,parse:a,stringify:l}}function pp(e,t){let n=0;for(;n<e.length&&n<t.length;){const r=t[n]-e[n];if(r)return r;n++}return e.length<t.length?e.length===1&&e[0]===80?-1:1:e.length>t.length?t.length===1&&t[0]===80?1:-1:0}function Jl(e,t){let n=0;const r=e.score,s=t.score;for(;n<r.length&&n<s.length;){const i=pp(r[n],s[n]);if(i)return i;n++}if(Math.abs(s.length-r.length)===1){if(Bo(r))return 1;if(Bo(s))return-1}return s.length-r.length}function Bo(e){const t=e[e.length-1];return e.length>0&&t[t.length-1]<0}const gp={type:0,value:""},mp=/[a-zA-Z0-9_]/;function vp(e){if(!e)return[[]];if(e==="/")return[[gp]];if(!e.startsWith("/"))throw new Error(`Invalid path "${e}"`);function t(g){throw new Error(`ERR (${n})/"${u}": ${g}`)}let n=0,r=n;const s=[];let i;function o(){i&&s.push(i),i=[]}let a=0,l,u="",c="";function h(){u&&(n===0?i.push({type:0,value:u}):n===1||n===2||n===3?(i.length>1&&(l==="*"||l==="+")&&t(`A repeatable param (${u}) must be alone in its segment. eg: '/:ids+.`),i.push({type:1,value:u,regexp:c,repeatable:l==="*"||l==="+",optional:l==="*"||l==="?"})):t("Invalid state to consume buffer"),u="")}function f(){u+=l}for(;a<e.length;){if(l=e[a++],l==="\\"&&n!==2){r=n,n=4;continue}switch(n){case 0:l==="/"?(u&&h(),o()):l===":"?(h(),n=1):f();break;case 4:f(),n=r;break;case 1:l==="("?n=2:mp.test(l)?f():(h(),n=0,l!=="*"&&l!=="?"&&l!=="+"&&a--);break;case 2:l===")"?c[c.length-1]=="\\"?c=c.slice(0,-1)+l:n=3:c+=l;break;case 3:h(),n=0,l!=="*"&&l!=="?"&&l!=="+"&&a--,c="";break;default:t("Unknown state");break}}return n===2&&t(`Unfinished custom RegExp for param "${u}"`),h(),o(),s}function yp(e,t,n){const r=fp(vp(e.path),n),s=Q(r,{record:e,parent:t,children:[],alias:[]});return t&&!s.record.aliasOf==!t.record.aliasOf&&t.children.push(s),s}function _p(e,t){const n=[],r=new Map;t=Ho({strict:!1,end:!0,sensitive:!1},t);function s(h){return r.get(h)}function i(h,f,g){const v=!g,b=qo(h);b.aliasOf=g&&g.record;const x=Ho(t,h),$=[b];if("alias"in h){const T=typeof h.alias=="string"?[h.alias]:h.alias;for(const N of T)$.push(qo(Q({},b,{components:g?g.record.components:b.components,path:N,aliasOf:g?g.record:b})))}let w,E;for(const T of $){const{path:N}=T;if(f&&N[0]!=="/"){const ae=f.record.path,F=ae[ae.length-1]==="/"?"":"/";T.path=f.record.path+(N&&F+N)}if(w=yp(T,f,x),g?g.alias.push(w):(E=E||w,E!==w&&E.alias.push(w),v&&h.name&&!Vo(w)&&o(h.name)),Kl(w)&&l(w),b.children){const ae=b.children;for(let F=0;F<ae.length;F++)i(ae[F],w,g&&g.children[F])}g=g||w}return E?()=>{o(E)}:Kn}function o(h){if(Hl(h)){const f=r.get(h);f&&(r.delete(h),n.splice(n.indexOf(f),1),f.children.forEach(o),f.alias.forEach(o))}else{const f=n.indexOf(h);f>-1&&(n.splice(f,1),h.record.name&&r.delete(h.record.name),h.children.forEach(o),h.alias.forEach(o))}}function a(){return n}function l(h){const f=kp(h,n);n.splice(f,0,h),h.record.name&&!Vo(h)&&r.set(h.record.name,h)}function u(h,f){let g,v={},b,x;if("name"in h&&h.name){if(g=r.get(h.name),!g)throw An(1,{location:h});x=g.record.name,v=Q(zo(f.params,g.keys.filter(E=>!E.optional).concat(g.parent?g.parent.keys.filter(E=>E.optional):[]).map(E=>E.name)),h.params&&zo(h.params,g.keys.map(E=>E.name))),b=g.stringify(v)}else if(h.path!=null)b=h.path,g=n.find(E=>E.re.test(b)),g&&(v=g.parse(b),x=g.record.name);else{if(g=f.name?r.get(f.name):n.find(E=>E.re.test(f.path)),!g)throw An(1,{location:h,currentLocation:f});x=g.record.name,v=Q({},f.params,h.params),b=g.stringify(v)}const $=[];let w=g;for(;w;)$.unshift(w.record),w=w.parent;return{name:x,path:b,params:v,matched:$,meta:wp($)}}e.forEach(h=>i(h));function c(){n.length=0,r.clear()}return{addRoute:i,resolve:u,removeRoute:o,clearRoutes:c,getRoutes:a,getRecordMatcher:s}}function zo(e,t){const n={};for(const r of t)r in e&&(n[r]=e[r]);return n}function qo(e){const t={path:e.path,redirect:e.redirect,name:e.name,meta:e.meta||{},aliasOf:e.aliasOf,beforeEnter:e.beforeEnter,props:bp(e),children:e.children||[],instances:{},leaveGuards:new Set,updateGuards:new Set,enterCallbacks:{},components:"components"in e?e.components||null:e.component&&{default:e.component}};return Object.defineProperty(t,"mods",{value:{}}),t}function bp(e){const t={},n=e.props||!1;if("component"in e)t.default=n;else for(const r in e.components)t[r]=typeof n=="object"?n[r]:n;return t}function Vo(e){for(;e;){if(e.record.aliasOf)return!0;e=e.parent}return!1}function wp(e){return e.reduce((t,n)=>Q(t,n.meta),{})}function Ho(e,t){const n={};for(const r in e)n[r]=r in t?t[r]:e[r];return n}function kp(e,t){let n=0,r=t.length;for(;n!==r;){const i=n+r>>1;Jl(e,t[i])<0?r=i:n=i+1}const s=Ep(e);return s&&(r=t.lastIndexOf(s,r-1)),r}function Ep(e){let t=e;for(;t=t.parent;)if(Kl(t)&&Jl(e,t)===0)return t}function Kl({record:e}){return!!(e.name||e.components&&Object.keys(e.components).length||e.redirect)}function Sp(e){const t={};if(e===""||e==="?")return t;const n=(e[0]==="?"?e.slice(1):e).split("&");for(let r=0;r<n.length;++r){const s=n[r].replace(Ml," "),i=s.indexOf("="),o=nr(i<0?s:s.slice(0,i)),a=i<0?null:nr(s.slice(i+1));if(o in t){let l=t[o];Ye(l)||(l=t[o]=[l]),l.push(a)}else t[o]=a}return t}function Wo(e){let t="";for(let n in e){const r=e[n];if(n=Vf(n),r==null){r!==void 0&&(t+=(t.length?"&":"")+n);continue}(Ye(r)?r.map(s=>s&&Vs(s)):[r&&Vs(r)]).forEach(s=>{s!==void 0&&(t+=(t.length?"&":"")+n,s!=null&&(t+="="+s))})}return t}function Ap(e){const t={};for(const n in e){const r=e[n];r!==void 0&&(t[n]=Ye(r)?r.map(s=>s==null?null:""+s):r==null?r:""+r)}return t}const Tp=Symbol(""),Jo=Symbol(""),ts=Symbol(""),Ei=Symbol(""),Ws=Symbol("");function In(){let e=[];function t(r){return e.push(r),()=>{const s=e.indexOf(r);s>-1&&e.splice(s,1)}}function n(){e=[]}return{add:t,list:()=>e.slice(),reset:n}}function xt(e,t,n,r,s,i=o=>o()){const o=r&&(r.enterCallbacks[s]=r.enterCallbacks[s]||[]);return()=>new Promise((a,l)=>{const u=f=>{f===!1?l(An(4,{from:n,to:t})):f instanceof Error?l(f):up(f)?l(An(2,{from:t,to:f})):(o&&r.enterCallbacks[s]===o&&typeof f=="function"&&o.push(f),a())},c=i(()=>e.call(r&&r.instances[s],t,n,u));let h=Promise.resolve(c);e.length<3&&(h=h.then(u)),h.catch(f=>l(f))})}function ws(e,t,n,r,s=i=>i()){const i=[];for(const o of e)for(const a in o.components){let l=o.components[a];if(!(t!=="beforeRouteEnter"&&!o.instances[a]))if(Dl(l)){const u=(l.__vccOpts||l)[t];u&&i.push(xt(u,n,r,o,a,s))}else{let u=l();i.push(()=>u.then(c=>{if(!c)throw new Error(`Couldn't resolve component "${a}" at "${o.path}"`);const h=Rf(c)?c.default:c;o.mods[a]=c,o.components[a]=h;const f=(h.__vccOpts||h)[t];return f&&xt(f,n,r,o,a,s)()}))}}return i}function Ko(e){const t=Ve(ts),n=Ve(Ei),r=Ee(()=>{const l=yn(e.to);return t.resolve(l)}),s=Ee(()=>{const{matched:l}=r.value,{length:u}=l,c=l[u-1],h=n.matched;if(!c||!h.length)return-1;const f=h.findIndex(Sn.bind(null,c));if(f>-1)return f;const g=Go(l[u-2]);return u>1&&Go(c)===g&&h[h.length-1].path!==g?h.findIndex(Sn.bind(null,l[u-2])):f}),i=Ee(()=>s.value>-1&&Cp(n.params,r.value.params)),o=Ee(()=>s.value>-1&&s.value===n.matched.length-1&&ql(n.params,r.value.params));function a(l={}){if(Pp(l)){const u=t[yn(e.replace)?"replace":"push"](yn(e.to)).catch(Kn);return e.viewTransition&&typeof document<"u"&&"startViewTransition"in document&&document.startViewTransition(()=>u),u}return Promise.resolve()}return{route:r,href:Ee(()=>r.value.href),isActive:i,isExactActive:o,navigate:a}}function xp(e){return e.length===1?e[0]:e}const Op=Hr({name:"RouterLink",compatConfig:{MODE:3},props:{to:{type:[String,Object],required:!0},replace:Boolean,activeClass:String,exactActiveClass:String,custom:Boolean,ariaCurrentValue:{type:String,default:"page"}},useLink:Ko,setup(e,{slots:t}){const n=yt(Ko(e)),{options:r}=Ve(ts),s=Ee(()=>({[Qo(e.activeClass,r.linkActiveClass,"router-link-active")]:n.isActive,[Qo(e.exactActiveClass,r.linkExactActiveClass,"router-link-exact-active")]:n.isExactActive}));return()=>{const i=t.default&&xp(t.default(n));return e.custom?i:hl("a",{"aria-current":n.isExactActive?e.ariaCurrentValue:null,href:n.href,onClick:n.navigate,class:s.value},i)}}}),jp=Op;function Pp(e){if(!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)&&!e.defaultPrevented&&!(e.button!==void 0&&e.button!==0)){if(e.currentTarget&&e.currentTarget.getAttribute){const t=e.currentTarget.getAttribute("target");if(/\b_blank\b/i.test(t))return}return e.preventDefault&&e.preventDefault(),!0}}function Cp(e,t){for(const n in t){const r=t[n],s=e[n];if(typeof r=="string"){if(r!==s)return!1}else if(!Ye(s)||s.length!==r.length||r.some((i,o)=>i!==s[o]))return!1}return!0}function Go(e){return e?e.aliasOf?e.aliasOf.path:e.path:""}const Qo=(e,t,n)=>e??t??n,$p=Hr({name:"RouterView",inheritAttrs:!1,props:{name:{type:String,default:"default"},route:Object},compatConfig:{MODE:3},setup(e,{attrs:t,slots:n}){const r=Ve(Ws),s=Ee(()=>e.route||r.value),i=Ve(Jo,0),o=Ee(()=>{let u=yn(i);const{matched:c}=s.value;let h;for(;(h=c[u])&&!h.components;)u++;return u}),a=Ee(()=>s.value.matched[o.value]);kr(Jo,Ee(()=>o.value+1)),kr(Tp,a),kr(Ws,s);const l=de();return $t(()=>[l.value,a.value,e.name],([u,c,h],[f,g,v])=>{c&&(c.instances[h]=u,g&&g!==c&&u&&u===f&&(c.leaveGuards.size||(c.leaveGuards=g.leaveGuards),c.updateGuards.size||(c.updateGuards=g.updateGuards))),u&&c&&(!g||!Sn(c,g)||!f)&&(c.enterCallbacks[h]||[]).forEach(b=>b(u))},{flush:"post"}),()=>{const u=s.value,c=e.name,h=a.value,f=h&&h.components[c];if(!f)return Xo(n.default,{Component:f,route:u});const g=h.props[c],v=g?g===!0?u.params:typeof g=="function"?g(u):g:null,b=hl(f,Q({},v,t,{onVnodeUnmounted:x=>{x.component.isUnmounted&&(h.instances[c]=null)},ref:l}));return Xo(n.default,{Component:b,route:u})||b}}});function Xo(e,t){if(!e)return null;const n=e(t);return n.length===1?n[0]:n}const Rp=$p;function Lp(e){const t=_p(e.routes,e),n=e.parseQuery||Sp,r=e.stringifyQuery||Wo,s=e.history,i=In(),o=In(),a=In(),l=$c(bt);let u=bt;pn&&e.scrollBehavior&&"scrollRestoration"in history&&(history.scrollRestoration="manual");const c=_s.bind(null,_=>""+_),h=_s.bind(null,Wf),f=_s.bind(null,nr);function g(_,R){let P,I;return Hl(_)?(P=t.getRecordMatcher(_),I=R):I=_,t.addRoute(I,P)}function v(_){const R=t.getRecordMatcher(_);R&&t.removeRoute(R)}function b(){return t.getRoutes().map(_=>_.record)}function x(_){return!!t.getRecordMatcher(_)}function $(_,R){if(R=Q({},R||l.value),typeof _=="string"){const p=bs(n,_,R.path),m=t.resolve({path:p.path},R),k=s.createHref(p.fullPath);return Q(p,m,{params:f(m.params),hash:nr(p.hash),redirectedFrom:void 0,href:k})}let P;if(_.path!=null)P=Q({},_,{path:bs(n,_.path,R.path).path});else{const p=Q({},_.params);for(const m in p)p[m]==null&&delete p[m];P=Q({},_,{params:h(p)}),R.params=h(R.params)}const I=t.resolve(P,R),Y=_.hash||"";I.params=c(f(I.params));const ie=Gf(r,Q({},_,{hash:qf(Y),path:I.path})),d=s.createHref(ie);return Q({fullPath:ie,hash:Y,query:r===Wo?Ap(_.query):_.query||{}},I,{redirectedFrom:void 0,href:d})}function w(_){return typeof _=="string"?bs(n,_,l.value.path):Q({},_)}function E(_,R){if(u!==_)return An(8,{from:R,to:_})}function T(_){return F(_)}function N(_){return T(Q(w(_),{replace:!0}))}function ae(_){const R=_.matched[_.matched.length-1];if(R&&R.redirect){const{redirect:P}=R;let I=typeof P=="function"?P(_):P;return typeof I=="string"&&(I=I.includes("?")||I.includes("#")?I=w(I):{path:I},I.params={}),Q({query:_.query,hash:_.hash,params:I.path!=null?{}:_.params},I)}}function F(_,R){const P=u=$(_),I=l.value,Y=_.state,ie=_.force,d=_.replace===!0,p=ae(P);if(p)return F(Q(w(p),{state:typeof p=="object"?Q({},Y,p.state):Y,force:ie,replace:d}),R||P);const m=P;m.redirectedFrom=R;let k;return!ie&&Qf(r,I,P)&&(k=An(16,{to:m,from:I}),ut(I,I,!0,!1)),(k?Promise.resolve(k):Se(m,I)).catch(y=>dt(y)?dt(y,2)?y:ct(y):Ce(y,m,I)).then(y=>{if(y){if(dt(y,2))return F(Q({replace:d},w(y.to),{state:typeof y.to=="object"?Q({},Y,y.to.state):Y,force:ie}),R||m)}else y=Je(m,I,!0,d,Y);return Oe(m,I,y),y})}function H(_,R){const P=E(_,R);return P?Promise.reject(P):Promise.resolve()}function ce(_){const R=tn.values().next().value;return R&&typeof R.runWithContext=="function"?R.runWithContext(_):_()}function Se(_,R){let P;const[I,Y,ie]=Ip(_,R);P=ws(I.reverse(),"beforeRouteLeave",_,R);for(const p of I)p.leaveGuards.forEach(m=>{P.push(xt(m,_,R))});const d=H.bind(null,_,R);return P.push(d),Be(P).then(()=>{P=[];for(const p of i.list())P.push(xt(p,_,R));return P.push(d),Be(P)}).then(()=>{P=ws(Y,"beforeRouteUpdate",_,R);for(const p of Y)p.updateGuards.forEach(m=>{P.push(xt(m,_,R))});return P.push(d),Be(P)}).then(()=>{P=[];for(const p of ie)if(p.beforeEnter)if(Ye(p.beforeEnter))for(const m of p.beforeEnter)P.push(xt(m,_,R));else P.push(xt(p.beforeEnter,_,R));return P.push(d),Be(P)}).then(()=>(_.matched.forEach(p=>p.enterCallbacks={}),P=ws(ie,"beforeRouteEnter",_,R,ce),P.push(d),Be(P))).then(()=>{P=[];for(const p of o.list())P.push(xt(p,_,R));return P.push(d),Be(P)}).catch(p=>dt(p,8)?p:Promise.reject(p))}function Oe(_,R,P){a.list().forEach(I=>ce(()=>I(_,R,P)))}function Je(_,R,P,I,Y){const ie=E(_,R);if(ie)return ie;const d=R===bt,p=pn?history.state:{};P&&(I||d?s.replace(_.fullPath,Q({scroll:d&&p&&p.scroll},Y)):s.push(_.fullPath,Y)),l.value=_,ut(_,R,P,d),ct()}let Me;function Mt(){Me||(Me=s.listen((_,R,P)=>{if(!cr.listening)return;const I=$(_),Y=ae(I);if(Y){F(Q(Y,{replace:!0,force:!0}),I).catch(Kn);return}u=I;const ie=l.value;pn&&sp(Do(ie.fullPath,P.delta),es()),Se(I,ie).catch(d=>dt(d,12)?d:dt(d,2)?(F(Q(w(d.to),{force:!0}),I).then(p=>{dt(p,20)&&!P.delta&&P.type===rr.pop&&s.go(-1,!1)}).catch(Kn),Promise.reject()):(P.delta&&s.go(-P.delta,!1),Ce(d,I,ie))).then(d=>{d=d||Je(I,ie,!1),d&&(P.delta&&!dt(d,8)?s.go(-P.delta,!1):P.type===rr.pop&&dt(d,20)&&s.go(-1,!1)),Oe(I,ie,d)}).catch(Kn)}))}let se=In(),V=In(),G;function Ce(_,R,P){ct(_);const I=V.list();return I.length?I.forEach(Y=>Y(_,R,P)):console.error(_),Promise.reject(_)}function On(){return G&&l.value!==bt?Promise.resolve():new Promise((_,R)=>{se.add([_,R])})}function ct(_){return G||(G=!_,Mt(),se.list().forEach(([R,P])=>_?P(_):R()),se.reset()),_}function ut(_,R,P,I){const{scrollBehavior:Y}=e;if(!pn||!Y)return Promise.resolve();const ie=!P&&ip(Do(_.fullPath,0))||(I||!P)&&history.state&&history.state.scroll||null;return jt().then(()=>Y(_,R,ie)).then(d=>d&&rp(d)).catch(d=>Ce(d,_,R))}const Fe=_=>s.go(_);let en;const tn=new Set,cr={currentRoute:l,listening:!0,addRoute:g,removeRoute:v,clearRoutes:t.clearRoutes,hasRoute:x,getRoutes:b,resolve:$,options:e,push:T,replace:N,go:Fe,back:()=>Fe(-1),forward:()=>Fe(1),beforeEach:i.add,beforeResolve:o.add,afterEach:a.add,onError:V.add,isReady:On,install(_){const R=this;_.component("RouterLink",jp),_.component("RouterView",Rp),_.config.globalProperties.$router=R,Object.defineProperty(_.config.globalProperties,"$route",{enumerable:!0,get:()=>yn(l)}),pn&&!en&&l.value===bt&&(en=!0,T(s.location).catch(Y=>{}));const P={};for(const Y in bt)Object.defineProperty(P,Y,{get:()=>l.value[Y],enumerable:!0});_.provide(ts,R),_.provide(Ei,Pa(P)),_.provide(Ws,l);const I=_.unmount;tn.add(_),_.unmount=function(){tn.delete(_),tn.size<1&&(u=bt,Me&&Me(),Me=null,l.value=bt,en=!1,G=!1),I()}}};function Be(_){return _.reduce((R,P)=>R.then(()=>ce(P)),Promise.resolve())}return cr}function Ip(e,t){const n=[],r=[],s=[],i=Math.max(t.matched.length,e.matched.length);for(let o=0;o<i;o++){const a=t.matched[o];a&&(e.matched.find(u=>Sn(u,a))?r.push(a):n.push(a));const l=e.matched[o];l&&(t.matched.find(u=>Sn(u,l))||s.push(l))}return[n,r,s]}function Up(){return Ve(ts)}function Gg(e){return Ve(Ei)}const Dp=Yr("friend",()=>{const e=de([]);return{getFriends:async t=>{const{data:n,error:r}=await le.from("users").select("friends").eq("id",t).single();return r?(console.error("Error fetching friends:",r),[]):(n&&Array.isArray(n.friends)?e.value=n.friends:e.value=[],e.value)},addFriend:async(t,n)=>{try{const{data:r}=await le.from("users").select("username").eq("id",n).single(),s=[...Array.isArray(e.value)?e.value:[],{id:n,username:r.username}];await le.from("users").update({friends:s}).eq("id",t)}catch(r){console.error("Error adding friend:",r)}},removeFriend:async(t,n)=>{try{const r=e.value.filter(u=>u.id!==n),{error:s}=await le.from("users").update({friends:r}).eq("id",t);if(s)throw new Error(`Ошибка при удалении друга у текущего пользователя: ${s.message}`);const{data:i,error:o}=await le.from("users").select("friends").eq("id",n).single();if(o)throw new Error(`Ошибка при получении данных друга: ${o.message}`);const a=i.friends.filter(u=>u.id!==t),{error:l}=await le.from("users").update({friends:a}).eq("id",n);if(l)throw new Error(`Ошибка при удалении текущего пользователя у друга: ${l.message}`);console.log("Друг успешно удален у обоих пользователей.")}catch(r){console.error("Ошибка в функции removeFriend:",r.message)}},friends:e}}),ye=[];for(let e=0;e<256;++e)ye.push((e+256).toString(16).slice(1));function Np(e,t=0){return(ye[e[t+0]]+ye[e[t+1]]+ye[e[t+2]]+ye[e[t+3]]+"-"+ye[e[t+4]]+ye[e[t+5]]+"-"+ye[e[t+6]]+ye[e[t+7]]+"-"+ye[e[t+8]]+ye[e[t+9]]+"-"+ye[e[t+10]]+ye[e[t+11]]+ye[e[t+12]]+ye[e[t+13]]+ye[e[t+14]]+ye[e[t+15]]).toLowerCase()}let ks;const Mp=new Uint8Array(16);function Fp(){if(!ks){if(typeof crypto>"u"||!crypto.getRandomValues)throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");ks=crypto.getRandomValues.bind(crypto)}return ks(Mp)}const Bp=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),Yo={randomUUID:Bp};function Zo(e,t,n){if(Yo.randomUUID&&!t&&!e)return Yo.randomUUID();e=e||{};const r=e.random||(e.rng||Fp)();return r[6]=r[6]&15|64,r[8]=r[8]&63|128,Np(r)}const zp=Yr("notice",()=>{const e=de([]);return{addNotice:async(t,n,r,s)=>{const{data:i}=await le.from("users").select("notices").eq("id",n).single(),o=i.notices.length>0?[...i.notices,{id:Zo(),sender_id:t,recipient_id:n,message:r,notice_type:s}]:[{id:Zo(),sender_id:t,recipient_id:n,message:r,notice_type:s}];await le.from("users").update({notices:o}).eq("id",n)},getNotices:async t=>{const{data:n,error:r}=await le.from("users").select("notices").eq("id",t).single();return e.value=(n==null?void 0:n.notices)||[],(n==null?void 0:n.notices)||[]},removeNotice:async(t,n)=>{const{data:r}=await le.from("users").select("notices").eq("id",t).single(),s=r.notices.filter(i=>i.id!==n);await le.from("users").update({notices:s}).eq("id",t)},removeSentNotice:async(t,n)=>{const{data:r}=await le.from("users").select("notices").eq("id",t).single(),s=r.notices.filter(i=>i.notice_type!=="sentFriend"&&i.sender_id!==n);await le.from("users").update({notices:s}).eq("id",t)},notices:e}}),qp=Yr("Chat",()=>{const e=Ee(()=>n.user),t=de([]),n=ns();return{fetchChats:async()=>{if(!e.value)return;const{data:r,error:s}=await le.from("chats").select("*").or(`user1_id.eq.${e.value.id},user2_id.eq.${e.value.id}`);if(s)console.error(s);else{for(const i of r)i.user1_name=await n.getUsername(i.user1_id),i.user2_name=await n.getUsername(i.user2_id);t.value=r}},chats:t}});/*! js-cookie v3.0.5 | MIT */function br(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)e[r]=n[r]}return e}var Vp={read:function(e){return e[0]==='"'&&(e=e.slice(1,-1)),e.replace(/(%[\dA-F]{2})+/gi,decodeURIComponent)},write:function(e){return encodeURIComponent(e).replace(/%(2[346BF]|3[AC-F]|40|5[BDE]|60|7[BCD])/g,decodeURIComponent)}};function Js(e,t){function n(s,i,o){if(!(typeof document>"u")){o=br({},t,o),typeof o.expires=="number"&&(o.expires=new Date(Date.now()+o.expires*864e5)),o.expires&&(o.expires=o.expires.toUTCString()),s=encodeURIComponent(s).replace(/%(2[346B]|5E|60|7C)/g,decodeURIComponent).replace(/[()]/g,escape);var a="";for(var l in o)o[l]&&(a+="; "+l,o[l]!==!0&&(a+="="+o[l].split(";")[0]));return document.cookie=s+"="+e.write(i,s)+a}}function r(s){if(!(typeof document>"u"||arguments.length&&!s)){for(var i=document.cookie?document.cookie.split("; "):[],o={},a=0;a<i.length;a++){var l=i[a].split("="),u=l.slice(1).join("=");try{var c=decodeURIComponent(l[0]);if(o[c]=e.read(u,c),s===c)break}catch{}}return s?o[s]:o}}return Object.create({set:n,get:r,remove:function(s,i){n(s,"",br({},i,{expires:-1}))},withAttributes:function(s){return Js(this.converter,br({},this.attributes,s))},withConverter:function(s){return Js(br({},this.converter,s),this.attributes)}},{attributes:{value:Object.freeze(t)},converter:{value:Object.freeze(e)}})}var Si=Js(Vp,{path:"/"});const ns=Yr("user",()=>{const e=Up(),t=Dp(),n=zp(),r=qp(),s=de(""),i=de(null),o=de(null),a=de(null),l=de(null),u=de(null),c=de({}),h=async()=>{try{const w=Hp();if(w)return i.value=w,o.value=i.value.id,a.value=i.value.username,l.value=i.value.birthdate,u.value=i.value.avatar_url,w;const{data:{user:E}}=await le.auth.getUser();if(!E){s.value="",i.value=null;return}s.value=E.email;const{data:T,error:N}=await le.from("users").select().eq("email",s.value);if(N)throw N;return i.value=T[0],o.value=i.value.id,a.value=i.value.username,l.value=i.value.birthdate,u.value=i.value.avatar_url,Wp(i.value),console.log("user upload"),i.value}catch(w){console.error("Ошибка при получении пользователя:",w)}},f=async()=>{try{s.value="",await le.auth.signOut(),i.value=null,Si.remove("user"),e.push("/"),await h()}catch(w){console.error("Ошибка при выходе:",w)}},g=async w=>{try{const{data:E}=await le.from("users").select().eq("username",w);return E[0]}catch(E){console.error("Ошибка при получении пользователя по имени:",E)}},v=async(w="")=>{try{const E=le.from("users").select().neq("email",i.value.email);w&&E.ilike("username",`%${w}%`);const{data:T,error:N}=await E;if(N)throw N;return T}catch(E){return console.error("Ошибка при получении списка пользователей:",E),[]}},b=async w=>{try{if(w===null||w==="")return"https://kawdmbqsvrrmvhymflnx.supabase.co/storage/v1/object/public/avatars/avatars/default-avatar-icon-of-social-media-user-vector.jpg?t=2025-01-08T16%3A42%3A14.026Z";const{data:E,error:T}=await le.from("users").select("avatar_url").eq("id",w).single();if(T)throw T;return(E==null?void 0:E.avatar_url)||"https://kawdmbqsvrrmvhymflnx.supabase.co/storage/v1/object/public/avatars/avatars/default-avatar-icon-of-social-media-user-vector.jpg?t=2025-01-08T16%3A42%3A14.026Z"}catch(E){console.error("Ошибка при получении аватара:",E)}},x=async w=>{try{if(c.value[w])return c.value[w];const{data:E}=await le.from("users").select("username").eq("id",w).single();return c.value[w]=E.username,E.username}catch(E){console.error("Ошибка при получении имени пользователя:",E)}},$=async w=>{try{const{data:E,error:T}=await le.from("users").update({status:w}).eq("id",o.value);if(T)throw T}catch(E){console.error("Ошибка при изменении статуса:",E)}};return $t(()=>i.value,w=>{w&&(n.getNotices(o.value),t.getFriends(o.value),r.fetchChats())},{immediate:!0}),{getUser:h,logout:f,getUsers:v,getUsername:x,getAvatar:b,changeStatus:$,getUserByUsername:g,username:a,birthdate:l,avatar_url:u,user:i,email:s,user_id:o}}),Hp=()=>{const e=Si.get("user");return e?JSON.parse(e):null},Wp=e=>{Si.set("user",JSON.stringify(e),{expires:30})},rs=(e,t)=>{const n=e.__vccOpts||e;for(const[r,s]of t)n[r]=s;return n},Jp={},Kp={xmlns:"http://www.w3.org/2000/svg",width:"32",height:"32",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"};function Gp(e,t){return ze(),Rt("svg",Kp,t[0]||(t[0]=[lt("circle",{cx:"12",cy:"7",r:"4"},null,-1),lt("path",{d:"M4 21c0-4 4-7 8-7s8 3 8 7"},null,-1)]))}const Qp=rs(Jp,[["render",Gp]]),Xp={},Yp={xmlns:"http://www.w3.org/2000/svg",version:"1.1","xmlns:xlink":"http://www.w3.org/1999/xlink",width:"32",height:"32",x:"0",y:"0",viewBox:"0 0 48 48",style:{"enable-background":"new 0 0 512 512"},"xml:space":"preserve",class:""};function Zp(e,t){return ze(),Rt("svg",Yp,t[0]||(t[0]=[lt("g",null,[lt("path",{d:"M34.8 27.4c3.4 0 6.2-2.8 6.2-6.2s-2.8-6.3-6.3-6.3c-3.4 0-6.2 2.8-6.2 6.2 0 3.5 2.8 6.3 6.3 6.3-.1 0 0 0 0 0zm-3.3-6.3c0-1.8 1.5-3.2 3.3-3.2s3.2 1.5 3.2 3.3-1.5 3.2-3.2 3.2v1.5-1.5c-1.8 0-3.3-1.5-3.3-3.3zM18.5 21.7c4.6 0 8.3-3.7 8.4-8.3 0-4.6-3.7-8.4-8.4-8.4-4.6 0-8.3 3.7-8.4 8.3 0 2.2.9 4.3 2.4 5.9 1.6 1.6 3.7 2.5 6 2.5-.1 0 0 0 0 0zm-5.4-8.4c0-2.9 2.4-5.3 5.4-5.3s5.4 2.4 5.3 5.4c0 2.9-2.4 5.3-5.4 5.3v1.5-1.5c-1.4 0-2.8-.6-3.8-1.6s-1.5-2.4-1.5-3.8zM.5 41.2c0 .4.1.8.4 1.1s.7.5 1.1.5l32.7.2H46c.4 0 .8-.2 1.1-.5s.4-.7.4-1.1C47.1 35 41.5 30 34.7 30h-.1c-1.3 0-2.5.2-3.7.6-3.2-3-7.7-4.9-12.6-5C9 25.6 1.2 32.5.5 41.2zM34.7 33c4.6 0 8.5 3 9.5 7H36c-.4-2.5-1.4-4.8-2.8-6.8.5-.1 1-.2 1.5-.2zm-16.3-4.4c7.2 0 13.3 4.9 14.6 11.3l-29.3-.1c1.3-6.4 7.5-11.2 14.7-11.2z",fill:"#fff",opacity:"1","data-original":"#000000",class:""})],-1)]))}const eg=rs(Xp,[["render",Zp]]),tg={},ng={xmlns:"http://www.w3.org/2000/svg",version:"1.1","xmlns:xlink":"http://www.w3.org/1999/xlink",width:"32",height:"32",x:"0",y:"0",viewBox:"0 0 404.009 404.009",style:{"enable-background":"new 0 0 512 512"},"xml:space":"preserve",class:""};function rg(e,t){return ze(),Rt("svg",ng,t[0]||(t[0]=[Nu('<g><path d="M46.594 315.11c-13.5 0-26.689-3.445-38.642-10.157-6.15-3.167-8.532-11.091-4.858-17.052 12.207-19.506 16.615-43.35 11.026-65.774C8.327 198.88-.055 179.301.005 154.691.213 68.35 72.078-1.646 158.331.029c83.31 1.678 151.969 71.71 151.97 155.042.001 108.833-114.057 185.243-214.75 143.216-13.879 10.894-31.324 16.823-48.957 16.823zM30.19 288.538c18.968 5.891 40.301 1.185 54.928-12.956a11.998 11.998 0 0 1 13.517-2.199C184.842 314.6 286.301 249.996 286.3 155.071c0-70.834-57.624-129.621-128.452-131.047C84.856 22.574 24.181 81.69 24.005 154.749c-.057 23.375 9.063 42.056 14.047 64.199 5.251 23.335 2.485 48.011-7.862 69.59z" fill="#fff" opacity="1" data-original="#fff" class=""></path><path d="M357.414 404.009c-17.632 0-35.078-5.93-48.955-16.822-53.55 22.349-117.248 12.171-161.155-25.747-5.016-4.332-5.57-11.909-1.239-16.926 4.332-5.015 11.909-5.571 16.925-1.238 38.942 33.63 95.973 41.195 142.384 19.007a11.997 11.997 0 0 1 13.517 2.199c14.626 14.14 35.96 18.849 54.928 12.955-12.206-25.459-13.897-54.626-4.438-81.628.085-.243.178-.482.278-.72 6.908-16.285 10.389-33.593 10.346-51.441-.076-31.468-10.544-60.577-30.274-84.182-4.25-5.086-3.573-12.653 1.512-16.903 5.084-4.251 12.653-3.573 16.903 1.512 23.036 27.561 35.771 62.902 35.859 99.515.051 20.971-4.018 41.323-12.093 60.499-8.482 24.553-4.581 50.842 9.002 72.709 3.677 5.962 1.293 13.887-4.859 17.056-11.951 6.709-25.143 10.154-38.641 10.155z" fill="#fff" opacity="1" data-original="#fff" class=""></path><ellipse cx="155.152" cy="155.669" rx="18.988" ry="18.978" fill="#fff" opacity="1" data-original="#fff" class=""></ellipse><ellipse cx="85.196" cy="155.669" rx="18.988" ry="18.978" fill="#fff" opacity="1" data-original="#fff" class=""></ellipse><ellipse cx="225.109" cy="155.669" rx="18.988" ry="18.978" fill="#fff" opacity="1" data-original="#fff" class=""></ellipse></g>',1)]))}const sg=rs(tg,[["render",rg]]),ig={},og={xmlns:"http://www.w3.org/2000/svg",version:"1.1","xmlns:xlink":"http://www.w3.org/1999/xlink",width:"32",height:"32",x:"0",y:"0",viewBox:"0 0 512 512",style:{"enable-background":"new 0 0 512 512"},"xml:space":"preserve",class:""};function ag(e,t){return ze(),Rt("svg",og,t[0]||(t[0]=[lt("g",null,[lt("path",{d:"M363.335 488a24 24 0 0 1-24 24H113.082a80.09 80.09 0 0 1-80-80V80a80.09 80.09 0 0 1 80-80h226.253a24 24 0 0 1 0 48H113.082a32.035 32.035 0 0 0-32 32v352a32.034 32.034 0 0 0 32 32h226.253a24 24 0 0 1 24 24zm108.553-248.97L357.837 124.978a24 24 0 1 0-33.937 33.941L396.977 232H208.041a24 24 0 1 0 0 48h188.935l-73.08 73.08a24 24 0 1 0 33.941 33.941l114.051-114.05a24 24 0 0 0 0-33.941z",fill:"#fff",opacity:"1","data-original":"#fff",class:""})],-1)]))}const lg=rs(ig,[["render",ag]]),cg={class:"nav__links"},ug={__name:"BaseHeader",setup(e){const t=ns(),n=de(Ee(()=>t.user)),r=de([]),s=async()=>{await t.logout()},i=()=>{r.value=n.value!==null?[{path:"/profile/personal",name:"Профиль",icon:vn(Qp)},{path:"/friends",name:"Друзья",icon:vn(eg)},{path:"/chats",name:"Чаты",icon:vn(sg)},{path:"/notices",name:"Уведомления"}]:[{path:"/login",name:"Вход"},{path:"/register",name:"Регистрация"}]};return or(i),$t(n,()=>{i()}),(o,a)=>{const l=za("router-link");return ze(),Rt("header",null,[lt("nav",null,[fe(l,{to:"/",class:"nav__logo"},{default:Os(()=>a[0]||(a[0]=[Tr("TogetherTalk")])),_:1}),lt("div",cg,[(ze(!0),Rt(rt,null,iu(r.value,u=>(ze(),Sr(l,{key:u.name,to:u.path,class:"nav__link"},{default:Os(()=>[(ze(),Sr(Li(u.icon),{class:"nav__icon"})),Tr(" "+ha(u.name),1)]),_:2},1032,["to"]))),128)),n.value?(ze(),Rt("a",{key:0,onClick:s,class:"nav__link"},[(ze(),Sr(Li(lg))),a[1]||(a[1]=Tr(" Выйти "))])):Mu("",!0)])])])}}},hg={class:"container"},dg={__name:"App",setup(e){const t=ns();return or(async()=>{await t.getUser()}),(n,r)=>{const s=za("router-view");return ze(),Rt("div",hg,[fe(ug),fe(s)])}}},fg=[{path:"/",name:"Home",component:()=>ge(()=>Ie(()=>import("./HomePage-BwNucqiT-X41YCNZ7.js"),[]),[])},{path:"/login",name:"Login",component:()=>ge(()=>Ie(()=>import("./LoginPage-D70BFTQp-2yUwmsHH.js"),__vite__mapDeps([0,1])),Ge([0,1]))},{path:"/register",name:"Register",component:()=>ge(()=>Ie(()=>import("./RegisterPage-CQcvccQi-BLWB9Spr.js"),__vite__mapDeps([2,1])),Ge([2,1]))},{path:"/profile/personal",name:"PersonalProfile",component:()=>ge(()=>Ie(()=>import("./PersonalProfilePage-DArx3E4g-BG7nxb_D.js"),__vite__mapDeps([3,1])),Ge([3,1,4]))},{path:"/friends",name:"Friends",component:()=>ge(()=>Ie(()=>import("./FriendsPage-D-On8di--BF5Ui5kw.js"),[]),Ge([5,6]))},{path:"/profile/:username",name:"Profile",component:()=>ge(()=>Ie(()=>import("./ProfilePage-ItwmKgu1-BSK8Wuru.js"),[]),Ge([7,8]))},{path:"/notices",name:"Notices",component:()=>ge(()=>Ie(()=>import("./NoticesPage-DPF1cLtU-CYYXjE6Z.js"),[]),Ge([9,10]))},{path:"/chats",component:()=>ge(()=>Ie(()=>import("./ChatsPage-C6wyps7s-DC8oRGnb.js"),[]),Ge([11,12])),children:[{path:"",components:{sidebar:()=>ge(()=>Ie(()=>import("./ChatSlideBar-CfChXzOU-wFmGVZrC.js"),[]),Ge([13,14])),default:()=>ge(()=>Ie(()=>import("./ChatDefault-ClJgaCJE-CQRKbrJ3.js"),[]),[])}},{path:":id",components:{sidebar:()=>ge(()=>Ie(()=>import("./ChatSlideBar-CfChXzOU-wFmGVZrC.js"),[]),Ge([13,14])),default:()=>ge(()=>Ie(()=>import("./ChatsDetailsPage-DH1WKgQr-BNVIfkot.js"),[]),Ge([15,16]))},name:"ChatsDetails"}]}],Gl=Lp({history:cp(),routes:fg});Gl.beforeEach((e,t,n)=>{const r=e.meta.title||"Мой мессенджер";document.title=r,n()});/*!
* Vue-Lazyload.js v3.0.0
* (c) 2023 Awe <hilongjw@gmail.com>
* Released under the MIT License.
*/function Ql(e,t){return t={exports:{}},e(t,t.exports),t.exports}var Ks=Ql(function(e){const t=Object.prototype.toString,n=Object.prototype.propertyIsEnumerable,r=Object.getOwnPropertySymbols;e.exports=(i,...o)=>{if(!s(i))throw new TypeError("expected the first argument to be an object");if(o.length===0||typeof Symbol!="function"||typeof r!="function")return i;for(let a of o){let l=r(a);for(let u of l)n.call(a,u)&&(i[u]=a[u])}return i};function s(i){return typeof i=="function"||t.call(i)==="[object Object]"||Array.isArray(i)}}),ea=Object.freeze({__proto__:null,default:Ks,__moduleExports:Ks}),pg=ea&&Ks||ea,ta=Ql(function(e){const t=Object.prototype.toString,n=o=>o!=="__proto__"&&o!=="constructor"&&o!=="prototype",r=e.exports=(o,...a)=>{let l=0;for(i(o)&&(o=a[l++]),o||(o={});l<a.length;l++)if(s(a[l])){for(const u of Object.keys(a[l]))n(u)&&(s(o[u])&&s(a[l][u])?r(o[u],a[l][u]):o[u]=a[l][u]);pg(o,a[l])}return o};function s(o){return typeof o=="function"||t.call(o)==="[object Object]"}function i(o){return typeof o=="object"?o===null:typeof o!="function"}});const It=typeof window<"u"&&window!==null,na=gg();function gg(){return It&&"IntersectionObserver"in window&&"IntersectionObserverEntry"in window&&"intersectionRatio"in window.IntersectionObserverEntry.prototype?("isIntersecting"in window.IntersectionObserverEntry.prototype||Object.defineProperty(window.IntersectionObserverEntry.prototype,"isIntersecting",{get:function(){return this.intersectionRatio>0}}),!0):!1}const qt={event:"event",observer:"observer"};function Nn(e,t){if(!e.length)return;const n=e.indexOf(t);if(n>-1)return e.splice(n,1)}function ra(e,t){if(e.tagName!=="IMG"||!e.getAttribute("data-srcset"))return"";let n=e.getAttribute("data-srcset").trim().split(",");const r=[],s=e.parentNode.offsetWidth*t;let i,o,a;n.forEach(c=>{c=c.trim(),i=c.lastIndexOf(" "),i===-1?(o=c,a=99999):(o=c.substr(0,i),a=parseInt(c.substr(i+1,c.length-i-2),10)),r.push([a,o])}),r.sort((c,h)=>{if(c[0]<h[0])return 1;if(c[0]>h[0])return-1;if(c[0]===h[0]){if(h[1].indexOf(".webp",h[1].length-5)!==-1)return 1;if(c[1].indexOf(".webp",c[1].length-5)!==-1)return-1}return 0});let l="",u;for(let c=0;c<r.length;c++){u=r[c],l=u[1];const h=r[c+1];if(h&&h[0]<s){l=u[1];break}else if(!h){l=u[1];break}}return l}const mg=(e=1)=>It&&window.devicePixelRatio||e;function vg(){if(!It)return!1;let e=!0;function t(n,r){const s={lossy:"UklGRiIAAABXRUJQVlA4IBYAAAAwAQCdASoBAAEADsD+JaQAA3AAAAAA",lossless:"UklGRhoAAABXRUJQVlA4TA0AAAAvAAAAEAcQERGIiP4HAA==",alpha:"UklGRkoAAABXRUJQVlA4WAoAAAAQAAAAAAAAAAAAQUxQSAwAAAARBxAR/Q9ERP8DAABWUDggGAAAABQBAJ0BKgEAAQAAAP4AAA3AAP7mtQAAAA==",animation:"UklGRlIAAABXRUJQVlA4WAoAAAASAAAAAAAAAAAAQU5JTQYAAAD/////AABBTk1GJgAAAAAAAAAAAAAAAAAAAGQAAABWUDhMDQAAAC8AAAAQBxAREYiI/gcA"},i=new Image;i.onload=function(){const o=i.width>0&&i.height>0;r(o)},i.onerror=function(){r(!1)},i.src="data:image/webp;base64,"+s[n]}return t("lossy",n=>{e=n}),t("lossless",n=>{e=n}),t("alpha",n=>{e=n}),t("animation",n=>{e=n}),e}function yg(e,t){let n=null,r=0;return function(){if(n)return;const s=Date.now()-r,i=this,o=arguments,a=function(){r=Date.now(),n=!1,e.apply(i,o)};s>=t?a():n=setTimeout(a,t)}}function _g(){if(!It)return!1;let e=!1;try{const t=Object.defineProperty({},"passive",{get:function(){e=!0}});window.addEventListener("test",Ai,t)}catch{}return e}const bg=_g(),wg={on(e,t,n,r=!1){bg?e.addEventListener(t,n,{capture:r,passive:!0}):e.addEventListener(t,n,r)},off(e,t,n,r=!1){e.removeEventListener(t,n,r)}},Gs=(e,t,n)=>{let r=new Image;if(!e||!e.src){const s=new Error("image src is required");return n(s)}e.cors&&(r.crossOrigin=e.cors),r.src=e.src,r.onload=function(){t({naturalHeight:r.naturalHeight,naturalWidth:r.naturalWidth,src:r.src}),r=null},r.onerror=function(s){n(s)}},Es=(e,t)=>typeof getComputedStyle<"u"?getComputedStyle(e,null).getPropertyValue(t):e.style[t],kg=e=>Es(e,"overflow")+Es(e,"overflowY")+Es(e,"overflowX"),Eg=e=>{if(!It)return;if(!(e instanceof Element))return window;let t=e;for(;t&&!(t===document.body||t===document.documentElement||!t.parentNode);){if(/(scroll|auto)/.test(kg(t)))return t;t=t.parentNode}return window};function Sg(e){return e!==null&&typeof e=="object"}function Ai(){}class Ag{constructor(t){this.max=t||100,this._caches=[]}has(t){return this._caches.indexOf(t)>-1}add(t){this.has(t)||(this._caches.push(t),this._caches.length>this.max&&this.free())}free(){this._caches.shift()}}class Tg{constructor(t,n,r,s,i,o,a,l,u,c){this.el=t,this.src=n,this.error=r,this.loading=s,this.bindType=i,this.attempt=0,this.cors=l,this.naturalHeight=0,this.naturalWidth=0,this.options=a,this.rect={},this.$parent=o,this.elRenderer=u,this._imageCache=c,this.performanceData={init:Date.now(),loadStart:0,loadEnd:0},this.filter(),this.initState(),this.render("loading",!1)}initState(){"dataset"in this.el?this.el.dataset.src=this.src:this.el.setAttribute("data-src",this.src),this.state={loading:!1,error:!1,loaded:!1,rendered:!1}}record(t){this.performanceData[t]=Date.now()}update(t){const n=this.src;this.src=t.src,this.loading=t.loading,this.error=t.error,this.filter(),n!==this.src&&(this.attempt=0,this.initState())}getRect(){this.rect=this.el.getBoundingClientRect()}checkInView(){return this.getRect(),this.rect.top<window.innerHeight*this.options.preLoad&&this.rect.bottom>this.options.preLoadTop&&this.rect.left<window.innerWidth*this.options.preLoad&&this.rect.right>0}filter(){for(const t in this.options.filter)this.options.filter[t](this,this.options)}renderLoading(t){this.state.loading=!0,Gs({src:this.loading,cors:this.cors},()=>{this.render("loading",!1),this.state.loading=!1,t()},()=>{t(),this.state.loading=!1,this.options.silent||console.warn(`VueLazyload log: load failed with loading image(${this.loading})`)})}load(t=Ai){if(this.attempt>this.options.attempt-1&&this.state.error){this.options.silent||console.log(`VueLazyload log: ${this.src} tried too more than ${this.options.attempt} times`),t();return}if(!(this.state.rendered&&this.state.loaded)){if(this._imageCache.has(this.src))return this.state.loaded=!0,this.render("loaded",!0),this.state.rendered=!0,t();this.renderLoading(()=>{this.attempt++,this.options.adapter.beforeLoad&&this.options.adapter.beforeLoad(this,this.options),this.record("loadStart"),Gs({src:this.src,cors:this.cors},n=>{this.naturalHeight=n.naturalHeight,this.naturalWidth=n.naturalWidth,this.state.loaded=!0,this.state.error=!1,this.record("loadEnd"),this.render("loaded",!1),this.state.rendered=!0,this._imageCache.add(this.src),t()},n=>{!this.options.silent&&console.error(n),this.state.error=!0,this.state.loaded=!1,this.render("error",!1)})})}}render(t,n){this.elRenderer(this,t,n)}performance(){let t="loading",n=0;return this.state.loaded&&(t="loaded",n=(this.performanceData.loadEnd-this.performanceData.loadStart)/1e3),this.state.error&&(t="error"),{src:this.src,state:t,time:n}}$destroy(){this.el=null,this.src="",this.error=null,this.loading="",this.bindType=null,this.attempt=0}}const sa="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7",xg=["scroll","wheel","mousewheel","resize","animationend","transitionend","touchmove"],Og={rootMargin:"0px",threshold:0};class jg{constructor({preLoad:t,error:n,throttleWait:r,preLoadTop:s,dispatchEvent:i,loading:o,attempt:a,silent:l=!0,scale:u,listenEvents:c,filter:h,adapter:f,observer:g,observerOptions:v}){this.version='"3.0.0"',this.lazyContainerMananger=null,this.mode=qt.event,this.ListenerQueue=[],this.TargetIndex=0,this.TargetQueue=[],this.options={silent:l,dispatchEvent:!!i,throttleWait:r||200,preLoad:t||1.3,preLoadTop:s||0,error:n||sa,loading:o||sa,attempt:a||3,scale:u||mg(u),listenEvents:c||xg,supportWebp:vg(),filter:h||{},adapter:f||{},observer:!!g,observerOptions:v||Og},this._initEvent(),this._imageCache=new Ag(200),this.lazyLoadHandler=yg(this._lazyLoadHandler.bind(this),this.options.throttleWait),this.setMode(this.options.observer?qt.observer:qt.event)}performance(){const t=[];return this.ListenerQueue.map(n=>t.push(n.performance())),t}addLazyBox(t){this.ListenerQueue.push(t),It&&(this._addListenerTarget(window),this._observer&&this._observer.observe(t.el),t.$el&&t.$el.parentNode&&this._addListenerTarget(t.$el.parentNode))}add(t,n,r){if(this.ListenerQueue.some(l=>l.el===t))return this.update(t,n),jt(this.lazyLoadHandler);let{src:s,loading:i,error:o,cors:a}=this._valueFormatter(n.value);jt(()=>{s=ra(t,this.options.scale)||s,this._observer&&this._observer.observe(t);const l=Object.keys(n.modifiers)[0];let u;l&&(u=n.instance.$refs[l],u=u?u.el||u:document.getElementById(l)),u||(u=Eg(t));const c=new Tg(t,s,o,i,n.arg,u,this.options,a,this._elRenderer.bind(this),this._imageCache);this.ListenerQueue.push(c),It&&(this._addListenerTarget(window),this._addListenerTarget(u)),jt(this.lazyLoadHandler)})}update(t,n,r){let{src:s,loading:i,error:o}=this._valueFormatter(n.value);s=ra(t,this.options.scale)||s;const a=this.ListenerQueue.find(l=>l.el===t);a?a.update({src:s,loading:i,error:o}):(t.getAttribute("lazy")!=="loaded"||t.dataset.src!==s)&&this.add(t,n,r),this._observer&&(this._observer.unobserve(t),this._observer.observe(t)),jt(this.lazyLoadHandler)}remove(t){if(!t)return;this._observer&&this._observer.unobserve(t);const n=this.ListenerQueue.find(r=>r.el===t);n&&(this._removeListenerTarget(n.$parent),this._removeListenerTarget(window),Nn(this.ListenerQueue,n),n.$destroy&&n.$destroy())}removeComponent(t){t&&(Nn(this.ListenerQueue,t),this._observer&&this._observer.unobserve(t.el),t.$parent&&t.$el.parentNode&&this._removeListenerTarget(t.$el.parentNode),this._removeListenerTarget(window))}setMode(t){!na&&t===qt.observer&&(t=qt.event),this.mode=t,t===qt.event?(this._observer&&(this.ListenerQueue.forEach(n=>{this._observer.unobserve(n.el)}),this._observer=null),this.TargetQueue.forEach(n=>{this._initListen(n.el,!0)})):(this.TargetQueue.forEach(n=>{this._initListen(n.el,!1)}),this._initIntersectionObserver())}_addListenerTarget(t){if(!t)return;let n=this.TargetQueue.find(r=>r.el===t);return n?n.childrenCount++:(n={el:t,id:++this.TargetIndex,childrenCount:1,listened:!0},this.mode===qt.event&&this._initListen(n.el,!0),this.TargetQueue.push(n)),this.TargetIndex}_removeListenerTarget(t){this.TargetQueue.forEach((n,r)=>{n.el===t&&(n.childrenCount--,n.childrenCount||(this._initListen(n.el,!1),this.TargetQueue.splice(r,1),n=null))})}_initListen(t,n){this.options.listenEvents.forEach(r=>wg[n?"on":"off"](t,r,this.lazyLoadHandler))}_initEvent(){this.Event={listeners:{loading:[],loaded:[],error:[]}},this.$on=(t,n)=>{this.Event.listeners[t]||(this.Event.listeners[t]=[]),this.Event.listeners[t].push(n)},this.$once=(t,n)=>{const r=this;function s(){r.$off(t,s),n.apply(r,arguments)}this.$on(t,s)},this.$off=(t,n)=>{if(!n){if(!this.Event.listeners[t])return;this.Event.listeners[t].length=0;return}Nn(this.Event.listeners[t],n)},this.$emit=(t,n,r)=>{this.Event.listeners[t]&&this.Event.listeners[t].forEach(s=>s(n,r))}}_lazyLoadHandler(){const t=[];this.ListenerQueue.forEach((n,r)=>{(!n.el||!n.el.parentNode||n.state.loaded)&&t.push(n),n.checkInView()&&(n.state.loaded||n.load())}),t.forEach(n=>{Nn(this.ListenerQueue,n),n.$destroy&&n.$destroy()})}_initIntersectionObserver(){na&&(this._observer=new IntersectionObserver(this._observerHandler.bind(this),this.options.observerOptions),this.ListenerQueue.length&&this.ListenerQueue.forEach(t=>{this._observer.observe(t.el)}))}_observerHandler(t){t.forEach(n=>{n.isIntersecting&&this.ListenerQueue.forEach(r=>{if(r.el===n.target){if(r.state.loaded)return this._observer.unobserve(r.el);r.load()}})})}_elRenderer(t,n,r){if(!t.el)return;const{el:s,bindType:i}=t;let o;switch(n){case"loading":o=t.loading;break;case"error":o=t.error;break;default:o=t.src;break}if(i?s.style[i]='url("'+o+'")':s.getAttribute("src")!==o&&s.setAttribute("src",o),s.setAttribute("lazy",n),this.$emit(n,t,r),this.options.adapter[n]&&this.options.adapter[n](t,this.options),this.options.dispatchEvent){const a=new CustomEvent(n,{detail:t});s.dispatchEvent(a)}}_valueFormatter(t){return Sg(t)?(!t.src&&!this.options.silent&&console.error("Vue Lazyload warning: miss src with "+t),{src:t.src,loading:t.loading||this.options.loading,error:t.error||this.options.error,cors:this.options.cors}):{src:t,loading:this.options.loading,error:this.options.error,cors:this.options.cors}}}const Xl=(e,t)=>{let n=yt({});const r=()=>{n=e.value.getBoundingClientRect()};return{rect:n,checkInView:()=>(r(),It&&n.top<window.innerHeight*t&&n.bottom>0&&n.left<window.innerWidth*t&&n.right>0)}};var Pg=e=>Hr({props:{tag:{type:String,default:"div"}},emits:["show"],setup(t,{emit:n,slots:r}){const s=de(),i=yt({loaded:!1,error:!1,attempt:0}),o=de(!1),{rect:a,checkInView:l}=Xl(s,e.options.preLoad),u=()=>{o.value=!0,i.loaded=!0,n("show",o.value)},c=Ee(()=>({el:s.value,rect:a,checkInView:l,load:u,state:i}));return or(()=>{e.addLazyBox(c.value),e.lazyLoadHandler()}),Jr(()=>{e.removeComponent(c.value)}),()=>{var h;return fe(t.tag,{ref:s},[o.value&&((h=r.default)===null||h===void 0?void 0:h.call(r))])}}});class Cg{constructor(t){this.lazy=t,t.lazyContainerMananger=this,this._queue=[]}bind(t,n,r){const s=new Rg(t,n,r,this.lazy);this._queue.push(s)}update(t,n,r){const s=this._queue.find(i=>i.el===t);s&&s.update(t,n)}unbind(t,n,r){const s=this._queue.find(i=>i.el===t);s&&(s.clear(),Nn(this._queue,s))}}const $g={selector:"img",error:"",loading:""};class Rg{constructor(t,n,r,s){this.el=t,this.vnode=r,this.binding=n,this.options={},this.lazy=s,this._queue=[],this.update(t,n)}update(t,n){this.el=t,this.options=ta({},$g,n.value),this.getImgs().forEach(r=>{this.lazy.add(r,ta({},this.binding,{value:{src:r.getAttribute("data-src")||r.dataset.src,error:r.getAttribute("data-error")||r.dataset.error||this.options.error,loading:r.getAttribute("data-loading")||r.dataset.loading||this.options.loading}}),this.vnode)})}getImgs(){return Array.from(this.el.querySelectorAll(this.options.selector))}clear(){this.getImgs().forEach(t=>this.lazy.remove(t)),this.vnode=null,this.binding=null,this.lazy=null}}var Lg=e=>Hr({setup(t,{slots:n}){const r=de(),s=yt({src:"",error:"",loading:"",attempt:e.options.attempt}),i=yt({loaded:!1,error:!1,attempt:0}),{rect:o,checkInView:a}=Xl(r,e.options.preLoad),l=de(""),u=(f=Ai)=>{if(i.attempt>s.attempt-1&&i.error)return e.options.silent||console.log(`VueLazyload log: ${s.src} tried too more than ${s.attempt} times`),f();const g=s.src;Gs({src:g},({src:v})=>{l.value=v,i.loaded=!0},()=>{i.attempt++,l.value=s.error,i.error=!0})},c=Ee(()=>({el:r.value,rect:o,checkInView:a,load:u,state:i}));or(()=>{e.addLazyBox(c.value),e.lazyLoadHandler()}),Jr(()=>{e.removeComponent(c.value)});const h=()=>{const{src:f,loading:g,error:v}=e._valueFormatter(t.src);i.loaded=!1,s.src=f,s.error=v,s.loading=g,l.value=s.loading};return $t(()=>t.src,()=>{h(),e.addLazyBox(c.value),e.lazyLoadHandler()},{immediate:!0}),()=>{var f;return fe(t.tag||"img",{src:l.value,ref:r},[(f=n.default)===null||f===void 0?void 0:f.call(n)])}}}),Ig={install(e,t={}){const n=new jg(t),r=new Cg(n);if(Number(e.version.split(".")[0])<3)return new Error("Vue version at least 3.0");e.config.globalProperties.$Lazyload=n,e.provide("Lazyload",n),t.lazyComponent&&e.component("lazy-component",Pg(n)),t.lazyImage&&e.component("lazy-image",Lg(n)),e.directive("lazy",{beforeMount:n.add.bind(n),beforeUpdate:n.update.bind(n),updated:n.lazyLoadHandler.bind(n),unmounted:n.remove.bind(n)}),e.directive("lazy-container",{beforeMount:r.bind.bind(r),updated:r.update.bind(r),unmounted:r.unbind.bind(r)})}};const Ug=xh();Eh(dg).use(Ug).use(Gl).use(Ig).mount("#app");const Dg=ns();window.addEventListener("beforeunload",async()=>{await Dg.changeStatus("offline")});export{Rt as $,Tr as A,ze as B,Up as C,Bh as D,Yr as G,Mg as I,Fg as L,qp as M,za as N,Ee as S,zp as U,Gg as V,ns as Z,Bg as a,Mu as b,le as c,fe as d,rs as e,de as f,Dp as g,rt as h,iu as i,Ng as j,$t as k,ha as l,yt as m,or as n,lt as o,Jr as p,yn as q,qg as r,zg as s,so as t,Sr as w,Os as x};
