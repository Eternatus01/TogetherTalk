import{u as l,_ as m}from"./PostList-D9LreT3s.js";import{u as f,r as n,c as p,o as d,w as _,a as h,b as w,d as v,e as y}from"./index-Dy3JlB_K.js";import"./Avatar-emXoMLdg.js";import"./DisplayAvatar-C0PwlrbW.js";const P={class:"home-view"},A={__name:"HomePage",setup(g){var r;const t=l(),e=f(),i=n(""),o=n(!1),u=p(()=>t.posts),a=async()=>{try{o.value=!0,await t.fetchPosts({forceRefresh:!0})}catch(s){i.value=s.message||"Ошибка загрузки постов"}finally{o.value=!1}};return(!e.isAuthenticated||(r=e.user)!=null&&r.id)&&d(async()=>{await a()}),_(()=>{var s;return(s=e.user)==null?void 0:s.id},async()=>{await a()}),(s,c)=>(y(),h("div",P,[c[0]||(c[0]=w("h1",{style:{color:"white","margin-bottom":"1rem"}},"Последние публикации:",-1)),v(m,{posts:u.value},null,8,["posts"])]))}};export{A as default};
